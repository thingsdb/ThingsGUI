// +build !debug
package main
import "encoding/base64"
// FileEditorWorkerJS is a byte representation for ./static/js/editor.worker.js
var FileEditorWorkerJS, _ = base64.StdEncoding.DecodeString("IWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIG4ocil7aWYodFtyXSlyZXR1cm4gdFtyXS5leHBvcnRzO3ZhciBpPXRbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3JdLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLG4pLGkubD0hMCxpLmV4cG9ydHN9bi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxyKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxuLnI9ZnVuY3Rpb24oZSl7InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZToiTW9kdWxlIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1uKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiYib2JqZWN0Ij09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkociwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6ZX0pLDImdCYmInN0cmluZyIhPXR5cGVvZiBlKWZvcih2YXIgaSBpbiBlKW4uZChyLGksZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxpKSk7cmV0dXJuIHJ9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsImEiLHQpLHR9LG4ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sbi5wPSIvanMvIixuKG4ucz02KX0oW2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7KGZ1bmN0aW9uKGUscil7bi5kKHQsImMiLChmdW5jdGlvbigpe3JldHVybiBtfSkpLG4uZCh0LCJiIiwoZnVuY3Rpb24oKXtyZXR1cm4gcH0pKSxuLmQodCwiYSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGd9KSk7dmFyIGk9ITEsbz0hMSxzPSExLHU9ITEsYT0hMSxsPXZvaWQgMCE9PWUmJnZvaWQgMCE9PWUudmVyc2lvbnMmJnZvaWQgMCE9PWUudmVyc2lvbnMuZWxlY3Ryb24mJiJyZW5kZXJlciI9PT1lLnR5cGU7aWYoIm9iamVjdCIhPXR5cGVvZiBuYXZpZ2F0b3J8fGwpe2lmKCJvYmplY3QiPT10eXBlb2YgZSl7aT0id2luMzIiPT09ZS5wbGF0Zm9ybSxvPSJkYXJ3aW4iPT09ZS5wbGF0Zm9ybSxzPSJsaW51eCI9PT1lLnBsYXRmb3JtLCJlbiIsImVuIjt2YXIgYz1lLmVudi5WU0NPREVfTkxTX0NPTkZJRztpZihjKXRyeXt2YXIgZj1KU09OLnBhcnNlKGMpLGg9Zi5hdmFpbGFibGVMYW5ndWFnZXNbIioiXTtmLmxvY2FsZSxofHwiZW4iLGYuX3RyYW5zbGF0aW9uc0NvbmZpZ0ZpbGV9Y2F0Y2goZSl7fXU9ITB9fWVsc2V7dmFyIGQ9bmF2aWdhdG9yLnVzZXJBZ2VudDtpPWQuaW5kZXhPZigiV2luZG93cyIpPj0wLG89ZC5pbmRleE9mKCJNYWNpbnRvc2giKT49MCxzPWQuaW5kZXhPZigiTGludXgiKT49MCxhPSEwLG5hdmlnYXRvci5sYW5ndWFnZX12YXIgbT1pLHA9YSxnPSJvYmplY3QiPT10eXBlb2Ygc2VsZj9zZWxmOiJvYmplY3QiPT10eXBlb2Ygcj9yOnt9fSkuY2FsbCh0aGlzLG4oMiksbigxKSl9LGZ1bmN0aW9uKGUsdCl7dmFyIG47bj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3RyeXtuPW58fG5ldyBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpfWNhdGNoKGUpeyJvYmplY3QiPT10eXBlb2Ygd2luZG93JiYobj13aW5kb3cpfWUuZXhwb3J0cz1ufSxmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLmV4cG9ydHM9e307ZnVuY3Rpb24gbygpe3Rocm93IG5ldyBFcnJvcigic2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfWZ1bmN0aW9uIHMoKXt0aHJvdyBuZXcgRXJyb3IoImNsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCIpfWZ1bmN0aW9uIHUoZSl7aWYobj09PXNldFRpbWVvdXQpcmV0dXJuIHNldFRpbWVvdXQoZSwwKTtpZigobj09PW98fCFuKSYmc2V0VGltZW91dClyZXR1cm4gbj1zZXRUaW1lb3V0LHNldFRpbWVvdXQoZSwwKTt0cnl7cmV0dXJuIG4oZSwwKX1jYXRjaCh0KXt0cnl7cmV0dXJuIG4uY2FsbChudWxsLGUsMCl9Y2F0Y2godCl7cmV0dXJuIG4uY2FsbCh0aGlzLGUsMCl9fX0hZnVuY3Rpb24oKXt0cnl7bj0iZnVuY3Rpb24iPT10eXBlb2Ygc2V0VGltZW91dD9zZXRUaW1lb3V0Om99Y2F0Y2goZSl7bj1vfXRyeXtyPSJmdW5jdGlvbiI9PXR5cGVvZiBjbGVhclRpbWVvdXQ/Y2xlYXJUaW1lb3V0OnN9Y2F0Y2goZSl7cj1zfX0oKTt2YXIgYSxsPVtdLGM9ITEsZj0tMTtmdW5jdGlvbiBoKCl7YyYmYSYmKGM9ITEsYS5sZW5ndGg/bD1hLmNvbmNhdChsKTpmPS0xLGwubGVuZ3RoJiZkKCkpfWZ1bmN0aW9uIGQoKXtpZighYyl7dmFyIGU9dShoKTtjPSEwO2Zvcih2YXIgdD1sLmxlbmd0aDt0Oyl7Zm9yKGE9bCxsPVtdOysrZjx0OylhJiZhW2ZdLnJ1bigpO2Y9LTEsdD1sLmxlbmd0aH1hPW51bGwsYz0hMSxmdW5jdGlvbihlKXtpZihyPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoZSk7aWYoKHI9PT1zfHwhcikmJmNsZWFyVGltZW91dClyZXR1cm4gcj1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KGUpO3RyeXtyKGUpfWNhdGNoKHQpe3RyeXtyZXR1cm4gci5jYWxsKG51bGwsZSl9Y2F0Y2godCl7cmV0dXJuIHIuY2FsbCh0aGlzLGUpfX19KGUpfX1mdW5jdGlvbiBtKGUsdCl7dGhpcy5mdW49ZSx0aGlzLmFycmF5PXR9ZnVuY3Rpb24gcCgpe31pLm5leHRUaWNrPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbi0xXT1hcmd1bWVudHNbbl07bC5wdXNoKG5ldyBtKGUsdCkpLDEhPT1sLmxlbmd0aHx8Y3x8dShkKX0sbS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0saS50aXRsZT0iYnJvd3NlciIsaS5icm93c2VyPSEwLGkuZW52PXt9LGkuYXJndj1bXSxpLnZlcnNpb249IiIsaS52ZXJzaW9ucz17fSxpLm9uPXAsaS5hZGRMaXN0ZW5lcj1wLGkub25jZT1wLGkub2ZmPXAsaS5yZW1vdmVMaXN0ZW5lcj1wLGkucmVtb3ZlQWxsTGlzdGVuZXJzPXAsaS5lbWl0PXAsaS5wcmVwZW5kTGlzdGVuZXI9cCxpLnByZXBlbmRPbmNlTGlzdGVuZXI9cCxpLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm5bXX0saS5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKX0saS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LGkuY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0saS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0sZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihlLHQpeyhmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3ZhciB0PXRoaXMuY29uc3RydWN0b3I7cmV0dXJuIHRoaXMudGhlbigoZnVuY3Rpb24obil7cmV0dXJuIHQucmVzb2x2ZShlKCkpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIG59KSl9KSwoZnVuY3Rpb24obil7cmV0dXJuIHQucmVzb2x2ZShlKCkpLnRoZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHQucmVqZWN0KG4pfSkpfSkpfXZhciByPXNldFRpbWVvdXQ7ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBvKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG8pKXRocm93IG5ldyBUeXBlRXJyb3IoIlByb21pc2VzIG11c3QgYmUgY29uc3RydWN0ZWQgdmlhIG5ldyIpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoIm5vdCBhIGZ1bmN0aW9uIik7dGhpcy5fc3RhdGU9MCx0aGlzLl9oYW5kbGVkPSExLHRoaXMuX3ZhbHVlPXZvaWQgMCx0aGlzLl9kZWZlcnJlZHM9W10sZihlLHRoaXMpfWZ1bmN0aW9uIHMoZSx0KXtmb3IoOzM9PT1lLl9zdGF0ZTspZT1lLl92YWx1ZTswIT09ZS5fc3RhdGU/KGUuX2hhbmRsZWQ9ITAsby5faW1tZWRpYXRlRm4oKGZ1bmN0aW9uKCl7dmFyIG49MT09PWUuX3N0YXRlP3Qub25GdWxmaWxsZWQ6dC5vblJlamVjdGVkO2lmKG51bGwhPT1uKXt2YXIgcjt0cnl7cj1uKGUuX3ZhbHVlKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBhKHQucHJvbWlzZSxlKX11KHQucHJvbWlzZSxyKX1lbHNlKDE9PT1lLl9zdGF0ZT91OmEpKHQucHJvbWlzZSxlLl92YWx1ZSl9KSkpOmUuX2RlZmVycmVkcy5wdXNoKHQpfWZ1bmN0aW9uIHUoZSx0KXt0cnl7aWYodD09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcigiQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi4iKTtpZih0JiYoIm9iamVjdCI9PXR5cGVvZiB0fHwiZnVuY3Rpb24iPT10eXBlb2YgdCkpe3ZhciBuPXQudGhlbjtpZih0IGluc3RhbmNlb2YgbylyZXR1cm4gZS5fc3RhdGU9MyxlLl92YWx1ZT10LHZvaWQgbChlKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgbilyZXR1cm4gdm9pZCBmKChyPW4saT10LGZ1bmN0aW9uKCl7ci5hcHBseShpLGFyZ3VtZW50cyl9KSxlKX1lLl9zdGF0ZT0xLGUuX3ZhbHVlPXQsbChlKX1jYXRjaCh0KXthKGUsdCl9dmFyIHIsaX1mdW5jdGlvbiBhKGUsdCl7ZS5fc3RhdGU9MixlLl92YWx1ZT10LGwoZSl9ZnVuY3Rpb24gbChlKXsyPT09ZS5fc3RhdGUmJjA9PT1lLl9kZWZlcnJlZHMubGVuZ3RoJiZvLl9pbW1lZGlhdGVGbigoZnVuY3Rpb24oKXtlLl9oYW5kbGVkfHxvLl91bmhhbmRsZWRSZWplY3Rpb25GbihlLl92YWx1ZSl9KSk7Zm9yKHZhciB0PTAsbj1lLl9kZWZlcnJlZHMubGVuZ3RoO3Q8bjt0KyspcyhlLGUuX2RlZmVycmVkc1t0XSk7ZS5fZGVmZXJyZWRzPW51bGx9ZnVuY3Rpb24gYyhlLHQsbil7dGhpcy5vbkZ1bGZpbGxlZD0iZnVuY3Rpb24iPT10eXBlb2YgZT9lOm51bGwsdGhpcy5vblJlamVjdGVkPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6bnVsbCx0aGlzLnByb21pc2U9bn1mdW5jdGlvbiBmKGUsdCl7dmFyIG49ITE7dHJ5e2UoKGZ1bmN0aW9uKGUpe258fChuPSEwLHUodCxlKSl9KSwoZnVuY3Rpb24oZSl7bnx8KG49ITAsYSh0LGUpKX0pKX1jYXRjaChlKXtpZihuKXJldHVybjtuPSEwLGEodCxlKX19by5wcm90b3R5cGUuY2F0Y2g9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGUpfSxvLnByb3RvdHlwZS50aGVuPWZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IHRoaXMuY29uc3RydWN0b3IoaSk7cmV0dXJuIHModGhpcyxuZXcgYyhlLHQsbikpLG59LG8ucHJvdG90eXBlLmZpbmFsbHk9bixvLmFsbD1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8oKGZ1bmN0aW9uKHQsbil7aWYoIWV8fHZvaWQgMD09PWUubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoIlByb21pc2UuYWxsIGFjY2VwdHMgYW4gYXJyYXkiKTt2YXIgcj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKTtpZigwPT09ci5sZW5ndGgpcmV0dXJuIHQoW10pO3ZhciBpPXIubGVuZ3RoO2Z1bmN0aW9uIG8oZSxzKXt0cnl7aWYocyYmKCJvYmplY3QiPT10eXBlb2Ygc3x8ImZ1bmN0aW9uIj09dHlwZW9mIHMpKXt2YXIgdT1zLnRoZW47aWYoImZ1bmN0aW9uIj09dHlwZW9mIHUpcmV0dXJuIHZvaWQgdS5jYWxsKHMsKGZ1bmN0aW9uKHQpe28oZSx0KX0pLG4pfXJbZV09cywwPT0tLWkmJnQocil9Y2F0Y2goZSl7bihlKX19Zm9yKHZhciBzPTA7czxyLmxlbmd0aDtzKyspbyhzLHJbc10pfSkpfSxvLnJlc29sdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJvYmplY3QiPT10eXBlb2YgZSYmZS5jb25zdHJ1Y3Rvcj09PW8/ZTpuZXcgbygoZnVuY3Rpb24odCl7dChlKX0pKX0sby5yZWplY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvKChmdW5jdGlvbih0LG4pe24oZSl9KSl9LG8ucmFjZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8oKGZ1bmN0aW9uKHQsbil7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKWVbcl0udGhlbih0LG4pfSkpfSxvLl9pbW1lZGlhdGVGbj0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZnVuY3Rpb24odCl7ZSh0KX18fGZ1bmN0aW9uKGUpe3IoZSwwKX0sby5fdW5oYW5kbGVkUmVqZWN0aW9uRm49ZnVuY3Rpb24oZSl7InVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlJiZjb25zb2xlLndhcm4oIlBvc3NpYmxlIFVuaGFuZGxlZCBQcm9taXNlIFJlamVjdGlvbjoiLGUpfTt2YXIgaD1mdW5jdGlvbigpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZilyZXR1cm4gc2VsZjtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdylyZXR1cm4gd2luZG93O2lmKHZvaWQgMCE9PXQpcmV0dXJuIHQ7dGhyb3cgbmV3IEVycm9yKCJ1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QiKX0oKTsiUHJvbWlzZSJpbiBoP2guUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseXx8KGguUHJvbWlzZS5wcm90b3R5cGUuZmluYWxseT1uKTpoLlByb21pc2U9b30pKCl9KS5jYWxsKHRoaXMsbig0KS5zZXRJbW1lZGlhdGUsbigxKSl9LGZ1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24oZSl7dmFyIHI9dm9pZCAwIT09ZSYmZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmfHx3aW5kb3csaT1GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7ZnVuY3Rpb24gbyhlLHQpe3RoaXMuX2lkPWUsdGhpcy5fY2xlYXJGbj10fXQuc2V0VGltZW91dD1mdW5jdGlvbigpe3JldHVybiBuZXcgbyhpLmNhbGwoc2V0VGltZW91dCxyLGFyZ3VtZW50cyksY2xlYXJUaW1lb3V0KX0sdC5zZXRJbnRlcnZhbD1mdW5jdGlvbigpe3JldHVybiBuZXcgbyhpLmNhbGwoc2V0SW50ZXJ2YWwscixhcmd1bWVudHMpLGNsZWFySW50ZXJ2YWwpfSx0LmNsZWFyVGltZW91dD10LmNsZWFySW50ZXJ2YWw9ZnVuY3Rpb24oZSl7ZSYmZS5jbG9zZSgpfSxvLnByb3RvdHlwZS51bnJlZj1vLnByb3RvdHlwZS5yZWY9ZnVuY3Rpb24oKXt9LG8ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJGbi5jYWxsKHIsdGhpcy5faWQpfSx0LmVucm9sbD1mdW5jdGlvbihlLHQpe2NsZWFyVGltZW91dChlLl9pZGxlVGltZW91dElkKSxlLl9pZGxlVGltZW91dD10fSx0LnVuZW5yb2xsPWZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChlLl9pZGxlVGltZW91dElkKSxlLl9pZGxlVGltZW91dD0tMX0sdC5fdW5yZWZBY3RpdmU9dC5hY3RpdmU9ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KGUuX2lkbGVUaW1lb3V0SWQpO3ZhciB0PWUuX2lkbGVUaW1lb3V0O3Q+PTAmJihlLl9pZGxlVGltZW91dElkPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS5fb25UaW1lb3V0JiZlLl9vblRpbWVvdXQoKX0pLHQpKX0sbig1KSx0LnNldEltbWVkaWF0ZT0idW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuc2V0SW1tZWRpYXRlfHx2b2lkIDAhPT1lJiZlLnNldEltbWVkaWF0ZXx8dGhpcyYmdGhpcy5zZXRJbW1lZGlhdGUsdC5jbGVhckltbWVkaWF0ZT0idW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuY2xlYXJJbW1lZGlhdGV8fHZvaWQgMCE9PWUmJmUuY2xlYXJJbW1lZGlhdGV8fHRoaXMmJnRoaXMuY2xlYXJJbW1lZGlhdGV9KS5jYWxsKHRoaXMsbigxKSl9LGZ1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24oZSx0KXshZnVuY3Rpb24oZSxuKXsidXNlIHN0cmljdCI7aWYoIWUuc2V0SW1tZWRpYXRlKXt2YXIgcixpLG8scyx1LGE9MSxsPXt9LGM9ITEsZj1lLmRvY3VtZW50LGg9T2JqZWN0LmdldFByb3RvdHlwZU9mJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7aD1oJiZoLnNldFRpbWVvdXQ/aDplLCJbb2JqZWN0IHByb2Nlc3NdIj09PXt9LnRvU3RyaW5nLmNhbGwoZS5wcm9jZXNzKT9yPWZ1bmN0aW9uKGUpe3QubmV4dFRpY2soKGZ1bmN0aW9uKCl7bShlKX0pKX06IWZ1bmN0aW9uKCl7aWYoZS5wb3N0TWVzc2FnZSYmIWUuaW1wb3J0U2NyaXB0cyl7dmFyIHQ9ITAsbj1lLm9ubWVzc2FnZTtyZXR1cm4gZS5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXt0PSExfSxlLnBvc3RNZXNzYWdlKCIiLCIqIiksZS5vbm1lc3NhZ2U9bix0fX0oKT9lLk1lc3NhZ2VDaGFubmVsPygobz1uZXcgTWVzc2FnZUNoYW5uZWwpLnBvcnQxLm9ubWVzc2FnZT1mdW5jdGlvbihlKXttKGUuZGF0YSl9LHI9ZnVuY3Rpb24oZSl7by5wb3J0Mi5wb3N0TWVzc2FnZShlKX0pOmYmJiJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gZi5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKT8oaT1mLmRvY3VtZW50RWxlbWVudCxyPWZ1bmN0aW9uKGUpe3ZhciB0PWYuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7dC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXttKGUpLHQub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsaS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9LGkuYXBwZW5kQ2hpbGQodCl9KTpyPWZ1bmN0aW9uKGUpe3NldFRpbWVvdXQobSwwLGUpfToocz0ic2V0SW1tZWRpYXRlJCIrTWF0aC5yYW5kb20oKSsiJCIsdT1mdW5jdGlvbih0KXt0LnNvdXJjZT09PWUmJiJzdHJpbmciPT10eXBlb2YgdC5kYXRhJiYwPT09dC5kYXRhLmluZGV4T2YocykmJm0oK3QuZGF0YS5zbGljZShzLmxlbmd0aCkpfSxlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix1LCExKTplLmF0dGFjaEV2ZW50KCJvbm1lc3NhZ2UiLHUpLHI9ZnVuY3Rpb24odCl7ZS5wb3N0TWVzc2FnZShzK3QsIioiKX0pLGguc2V0SW1tZWRpYXRlPWZ1bmN0aW9uKGUpeyJmdW5jdGlvbiIhPXR5cGVvZiBlJiYoZT1uZXcgRnVuY3Rpb24oIiIrZSkpO2Zvcih2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKSxuPTA7bjx0Lmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbisxXTt2YXIgaT17Y2FsbGJhY2s6ZSxhcmdzOnR9O3JldHVybiBsW2FdPWkscihhKSxhKyt9LGguY2xlYXJJbW1lZGlhdGU9ZH1mdW5jdGlvbiBkKGUpe2RlbGV0ZSBsW2VdfWZ1bmN0aW9uIG0oZSl7aWYoYylzZXRUaW1lb3V0KG0sMCxlKTtlbHNle3ZhciB0PWxbZV07aWYodCl7Yz0hMDt0cnl7IWZ1bmN0aW9uKGUpe3ZhciB0PWUuY2FsbGJhY2ssbj1lLmFyZ3M7c3dpdGNoKG4ubGVuZ3RoKXtjYXNlIDA6dCgpO2JyZWFrO2Nhc2UgMTp0KG5bMF0pO2JyZWFrO2Nhc2UgMjp0KG5bMF0sblsxXSk7YnJlYWs7Y2FzZSAzOnQoblswXSxuWzFdLG5bMl0pO2JyZWFrO2RlZmF1bHQ6dC5hcHBseSh2b2lkIDAsbil9fSh0KX1maW5hbGx5e2QoZSksYz0hMX19fX19KCJ1bmRlZmluZWQiPT10eXBlb2Ygc2VsZj92b2lkIDA9PT1lP3RoaXM6ZTpzZWxmKX0pLmNhbGwodGhpcyxuKDEpLG4oMikpfSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO24ucih0KTt2YXIgcj1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5saXN0ZW5lcnM9W10sdGhpcy51bmV4cGVjdGVkRXJyb3JIYW5kbGVyPWZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYoZS5zdGFjayl0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlKyJcblxuIitlLnN0YWNrKTt0aHJvdyBlfSksMCl9fXJldHVybiBlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe3RoaXMubGlzdGVuZXJzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QoZSl9KSl9LGUucHJvdG90eXBlLm9uVW5leHBlY3RlZEVycm9yPWZ1bmN0aW9uKGUpe3RoaXMudW5leHBlY3RlZEVycm9ySGFuZGxlcihlKSx0aGlzLmVtaXQoZSl9LGUucHJvdG90eXBlLm9uVW5leHBlY3RlZEV4dGVybmFsRXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy51bmV4cGVjdGVkRXJyb3JIYW5kbGVyKGUpfSxlfSgpKTtmdW5jdGlvbiBpKGUpe3MoZSl8fHIub25VbmV4cGVjdGVkRXJyb3IoZSl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yP3skaXNFcnJvcjohMCxuYW1lOmUubmFtZSxtZXNzYWdlOmUubWVzc2FnZSxzdGFjazplLnN0YWNrdHJhY2V8fGUuc3RhY2t9OmV9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yJiYiQ2FuY2VsZWQiPT09ZS5uYW1lJiYiQ2FuY2VsZWQiPT09ZS5tZXNzYWdlfWZ1bmN0aW9uIHUoZSl7Zm9yKHZhciB0PVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbi0xXT1hcmd1bWVudHNbbl07cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/KGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuZGlzcG9zZSgpfSkpLFtdKTowPT09dC5sZW5ndGg/ZT8oZS5kaXNwb3NlKCksZSk6dm9pZCAwOih1KGUpLHUodCksW10pfWZ1bmN0aW9uIGEoZSl7cmV0dXJue2Rpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdShlKX19fXZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3RvRGlzcG9zZT1bXSx0aGlzLl9saWZlY3ljbGVfZGlzcG9zYWJsZV9pc0Rpc3Bvc2VkPSExfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fbGlmZWN5Y2xlX2Rpc3Bvc2FibGVfaXNEaXNwb3NlZD0hMCx0aGlzLl90b0Rpc3Bvc2U9dSh0aGlzLl90b0Rpc3Bvc2UpfSxlLnByb3RvdHlwZS5fcmVnaXN0ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2xpZmVjeWNsZV9kaXNwb3NhYmxlX2lzRGlzcG9zZWQ/KGNvbnNvbGUud2FybigiUmVnaXN0ZXJpbmcgZGlzcG9zYWJsZSBvbiBvYmplY3QgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGRpc3Bvc2VkLiIpLGUuZGlzcG9zZSgpKTp0aGlzLl90b0Rpc3Bvc2UucHVzaChlKSxlfSxlLk5vbmU9T2JqZWN0LmZyZWV6ZSh7ZGlzcG9zZTpmdW5jdGlvbigpe319KSxlfSgpLGM9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLm9iamVjdD1lfWUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt9fSgpLG4oMCkpO09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gZihlKXtmb3IodmFyIHQ9W10sbj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7T2JqZWN0LnByb3RvdHlwZSE9PW47KXQ9dC5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobikpLG49T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pO3JldHVybiB0fXZhciBoLGQ9KGg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oaD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZVtuXT10W25dKX0pKGUsdCl9LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1oKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KToobi5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IG4pfSk7dmFyIG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX3dvcmtlcklkPS0xLHRoaXMuX2hhbmRsZXI9ZSx0aGlzLl9sYXN0U2VudFJlcT0wLHRoaXMuX3BlbmRpbmdSZXBsaWVzPU9iamVjdC5jcmVhdGUobnVsbCl9cmV0dXJuIGUucHJvdG90eXBlLnNldFdvcmtlcklkPWZ1bmN0aW9uKGUpe3RoaXMuX3dvcmtlcklkPWV9LGUucHJvdG90eXBlLnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPVN0cmluZygrK3RoaXMuX2xhc3RTZW50UmVxKTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGksbyl7bi5fcGVuZGluZ1JlcGxpZXNbcl09e3Jlc29sdmU6aSxyZWplY3Q6b30sbi5fc2VuZCh7dnNXb3JrZXI6bi5fd29ya2VySWQscmVxOnIsbWV0aG9kOmUsYXJnczp0fSl9KSl9LGUucHJvdG90eXBlLmhhbmRsZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9SlNPTi5wYXJzZShlKX1jYXRjaChlKXtyZXR1cm59dCYmdC52c1dvcmtlciYmKC0xIT09dGhpcy5fd29ya2VySWQmJnQudnNXb3JrZXIhPT10aGlzLl93b3JrZXJJZHx8dGhpcy5faGFuZGxlTWVzc2FnZSh0KSl9LGUucHJvdG90eXBlLl9oYW5kbGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZS5zZXEpe3ZhciBuPWU7aWYoIXRoaXMuX3BlbmRpbmdSZXBsaWVzW24uc2VxXSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIkdvdCByZXBseSB0byB1bmtub3duIHNlcSIpO3ZhciByPXRoaXMuX3BlbmRpbmdSZXBsaWVzW24uc2VxXTtpZihkZWxldGUgdGhpcy5fcGVuZGluZ1JlcGxpZXNbbi5zZXFdLG4uZXJyKXt2YXIgaT1uLmVycjtyZXR1cm4gbi5lcnIuJGlzRXJyb3ImJigoaT1uZXcgRXJyb3IpLm5hbWU9bi5lcnIubmFtZSxpLm1lc3NhZ2U9bi5lcnIubWVzc2FnZSxpLnN0YWNrPW4uZXJyLnN0YWNrKSx2b2lkIHIucmVqZWN0KGkpfXIucmVzb2x2ZShuLnJlcyl9ZWxzZXt2YXIgcz1lLHU9cy5yZXE7dGhpcy5faGFuZGxlci5oYW5kbGVNZXNzYWdlKHMubWV0aG9kLHMuYXJncykudGhlbigoZnVuY3Rpb24oZSl7dC5fc2VuZCh7dnNXb3JrZXI6dC5fd29ya2VySWQsc2VxOnUscmVzOmUsZXJyOnZvaWQgMH0pfSksKGZ1bmN0aW9uKGUpe2UuZGV0YWlsIGluc3RhbmNlb2YgRXJyb3ImJihlLmRldGFpbD1vKGUuZGV0YWlsKSksdC5fc2VuZCh7dnNXb3JrZXI6dC5fd29ya2VySWQsc2VxOnUscmVzOnZvaWQgMCxlcnI6byhlKX0pfSkpfX0sZS5wcm90b3R5cGUuX3NlbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9SlNPTi5zdHJpbmdpZnkoZSk7dGhpcy5faGFuZGxlci5zZW5kTWVzc2FnZSh0KX0sZX0oKSxwPShmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzLGk9bnVsbDtyLl93b3JrZXI9ci5fcmVnaXN0ZXIodC5jcmVhdGUoInZzL2Jhc2UvY29tbW9uL3dvcmtlci9zaW1wbGVXb3JrZXIiLChmdW5jdGlvbihlKXtyLl9wcm90b2NvbC5oYW5kbGVNZXNzYWdlKGUpfSksKGZ1bmN0aW9uKGUpe2kmJmkoZSl9KSkpLHIuX3Byb3RvY29sPW5ldyBtKHtzZW5kTWVzc2FnZTpmdW5jdGlvbihlKXtyLl93b3JrZXIucG9zdE1lc3NhZ2UoZSl9LGhhbmRsZU1lc3NhZ2U6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpfX0pLHIuX3Byb3RvY29sLnNldFdvcmtlcklkKHIuX3dvcmtlci5nZXRJZCgpKTt2YXIgbz1udWxsO3ZvaWQgMCE9PXNlbGYucmVxdWlyZSYmImZ1bmN0aW9uIj09dHlwZW9mIHNlbGYucmVxdWlyZS5nZXRDb25maWc/bz1zZWxmLnJlcXVpcmUuZ2V0Q29uZmlnKCk6dm9pZCAwIT09c2VsZi5yZXF1aXJlanMmJihvPXNlbGYucmVxdWlyZWpzLnMuY29udGV4dHMuXy5jb25maWcpLHIuX29uTW9kdWxlTG9hZGVkPXIuX3Byb3RvY29sLnNlbmRNZXNzYWdlKCIkaW5pdGlhbGl6ZSIsW3IuX3dvcmtlci5nZXRJZCgpLG4sb10pLHIuX2xhenlQcm94eT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSx0KXtpPXQsci5fb25Nb2R1bGVMb2FkZWQudGhlbigoZnVuY3Rpb24odCl7Zm9yKHZhciBuPXt9LHI9MCxpPXQ7cjxpLmxlbmd0aDtyKyspe3ZhciBvPWlbcl07bltvXT11KG8scyl9ZShuKX0pLChmdW5jdGlvbihlKXt0KGUpLHIuX29uRXJyb3IoIldvcmtlciBmYWlsZWQgdG8gbG9hZCAiK24sZSl9KSl9KSk7dmFyIHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5fcmVxdWVzdChlLHQpfSx1PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiB0KGUsbil9fTtyZXR1cm4gcn1kKHQsZSksdC5wcm90b3R5cGUuZ2V0UHJveHlPYmplY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF6eVByb3h5fSx0LnByb3RvdHlwZS5fcmVxdWVzdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyLGkpe24uX29uTW9kdWxlTG9hZGVkLnRoZW4oKGZ1bmN0aW9uKCl7bi5fcHJvdG9jb2wuc2VuZE1lc3NhZ2UoZSx0KS50aGVuKHIsaSl9KSxpKX0pKX0sdC5wcm90b3R5cGUuX29uRXJyb3I9ZnVuY3Rpb24oZSx0KXtjb25zb2xlLmVycm9yKGUpLGNvbnNvbGUuaW5mbyh0KX19KGwpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBuPXRoaXM7dGhpcy5fcmVxdWVzdEhhbmRsZXI9dCx0aGlzLl9wcm90b2NvbD1uZXcgbSh7c2VuZE1lc3NhZ2U6ZnVuY3Rpb24odCl7ZSh0KX0saGFuZGxlTWVzc2FnZTpmdW5jdGlvbihlLHQpe3JldHVybiBuLl9oYW5kbGVNZXNzYWdlKGUsdCl9fSl9cmV0dXJuIGUucHJvdG90eXBlLm9ubWVzc2FnZT1mdW5jdGlvbihlKXt0aGlzLl9wcm90b2NvbC5oYW5kbGVNZXNzYWdlKGUpfSxlLnByb3RvdHlwZS5faGFuZGxlTWVzc2FnZT1mdW5jdGlvbihlLHQpe2lmKCIkaW5pdGlhbGl6ZSI9PT1lKXJldHVybiB0aGlzLmluaXRpYWxpemUodFswXSx0WzFdLHRbMl0pO2lmKCF0aGlzLl9yZXF1ZXN0SGFuZGxlcnx8ImZ1bmN0aW9uIiE9dHlwZW9mIHRoaXMuX3JlcXVlc3RIYW5kbGVyW2VdKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk1pc3NpbmcgcmVxdWVzdEhhbmRsZXIgb3IgbWV0aG9kOiAiK2UpKTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9yZXF1ZXN0SGFuZGxlcltlXS5hcHBseSh0aGlzLl9yZXF1ZXN0SGFuZGxlcix0KSl9Y2F0Y2goZSl7cmV0dXJuIFByb21pc2UucmVqZWN0KGUpfX0sZS5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcztpZih0aGlzLl9wcm90b2NvbC5zZXRXb3JrZXJJZChlKSx0aGlzLl9yZXF1ZXN0SGFuZGxlcil7Zm9yKHZhciBpPVtdLG89MCxzPWYodGhpcy5fcmVxdWVzdEhhbmRsZXIpO288cy5sZW5ndGg7bysrKXt2YXIgdT1zW29dOyJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLl9yZXF1ZXN0SGFuZGxlclt1XSYmaS5wdXNoKHUpfXJldHVybiBQcm9taXNlLnJlc29sdmUoaSl9cmV0dXJuIG4mJih2b2lkIDAhPT1uLmJhc2VVcmwmJmRlbGV0ZSBuLmJhc2VVcmwsdm9pZCAwIT09bi5wYXRocyYmdm9pZCAwIT09bi5wYXRocy52cyYmZGVsZXRlIG4ucGF0aHMudnMsbi5jYXRjaEVycm9yPSEwLHNlbGYucmVxdWlyZS5jb25maWcobikpLG5ldyBQcm9taXNlKChmdW5jdGlvbihlLG4pe3NlbGYucmVxdWlyZShbdF0sKGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXRbaV09YXJndW1lbnRzW2ldO3ZhciBvPXRbMF07aWYoci5fcmVxdWVzdEhhbmRsZXI9by5jcmVhdGUoKSxyLl9yZXF1ZXN0SGFuZGxlcil7Zm9yKHZhciBzPVtdLHU9MCxhPWYoci5fcmVxdWVzdEhhbmRsZXIpO3U8YS5sZW5ndGg7dSsrKXt2YXIgbD1hW3VdOyJmdW5jdGlvbiI9PXR5cGVvZiByLl9yZXF1ZXN0SGFuZGxlcltsXSYmcy5wdXNoKGwpfWUocyl9ZWxzZSBuKG5ldyBFcnJvcigiTm8gUmVxdWVzdEhhbmRsZXIhIikpfSksbil9KSl9LGV9KCkpO2Z1bmN0aW9uIGcoZSx0KXtyZXR1cm4gZnVuY3Rpb24gZSh0LG4scixpLG8pe2lmKGk8PXIpcmV0dXJuO3ZhciBzPXIrKGktcikvMnwwO2lmKGUodCxuLHIscyxvKSxlKHQsbixzKzEsaSxvKSxuKHRbc10sdFtzKzFdKTw9MClyZXR1cm47IWZ1bmN0aW9uKGUsdCxuLHIsaSxvKXtmb3IodmFyIHM9bix1PXIrMSxhPW47YTw9aTthKyspb1thXT1lW2FdO2ZvcihhPW47YTw9aTthKyspcz5yP2VbYV09b1t1KytdOnU+aT9lW2FdPW9bcysrXTp0KG9bdV0sb1tzXSk8MD9lW2FdPW9bdSsrXTplW2FdPW9bcysrXX0odCxuLHIscyxpLG8pfShlLHQsMCxlLmxlbmd0aC0xLFtdKSxlfXZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixyKXt0aGlzLm9yaWdpbmFsU3RhcnQ9ZSx0aGlzLm9yaWdpbmFsTGVuZ3RoPXQsdGhpcy5tb2RpZmllZFN0YXJ0PW4sdGhpcy5tb2RpZmllZExlbmd0aD1yfXJldHVybiBlLnByb3RvdHlwZS5nZXRPcmlnaW5hbEVuZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbmFsU3RhcnQrdGhpcy5vcmlnaW5hbExlbmd0aH0sZS5wcm90b3R5cGUuZ2V0TW9kaWZpZWRFbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RpZmllZFN0YXJ0K3RoaXMubW9kaWZpZWRMZW5ndGh9LGV9KCk7ZnVuY3Rpb24gdihlKXtyZXR1cm57Z2V0TGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIGUubGVuZ3RofSxnZXRFbGVtZW50QXRJbmRleDpmdW5jdGlvbih0KXtyZXR1cm4gZS5jaGFyQ29kZUF0KHQpfX19ZnVuY3Rpb24geShlLHQsbil7cmV0dXJuIG5ldyBFKHYoZSksdih0KSkuQ29tcHV0ZURpZmYobil9dmFyIEMsYj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuQXNzZXJ0PWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKHQpfSxlfSgpLEw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLkNvcHk9ZnVuY3Rpb24oZSx0LG4scixpKXtmb3IodmFyIG89MDtvPGk7bysrKW5bcitvXT1lW3Qrb119LGV9KCksTj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLm1fY2hhbmdlcz1bXSx0aGlzLm1fb3JpZ2luYWxTdGFydD1OdW1iZXIuTUFYX1ZBTFVFLHRoaXMubV9tb2RpZmllZFN0YXJ0PU51bWJlci5NQVhfVkFMVUUsdGhpcy5tX29yaWdpbmFsQ291bnQ9MCx0aGlzLm1fbW9kaWZpZWRDb3VudD0wfXJldHVybiBlLnByb3RvdHlwZS5NYXJrTmV4dENoYW5nZT1mdW5jdGlvbigpeyh0aGlzLm1fb3JpZ2luYWxDb3VudD4wfHx0aGlzLm1fbW9kaWZpZWRDb3VudD4wKSYmdGhpcy5tX2NoYW5nZXMucHVzaChuZXcgXyh0aGlzLm1fb3JpZ2luYWxTdGFydCx0aGlzLm1fb3JpZ2luYWxDb3VudCx0aGlzLm1fbW9kaWZpZWRTdGFydCx0aGlzLm1fbW9kaWZpZWRDb3VudCkpLHRoaXMubV9vcmlnaW5hbENvdW50PTAsdGhpcy5tX21vZGlmaWVkQ291bnQ9MCx0aGlzLm1fb3JpZ2luYWxTdGFydD1OdW1iZXIuTUFYX1ZBTFVFLHRoaXMubV9tb2RpZmllZFN0YXJ0PU51bWJlci5NQVhfVkFMVUV9LGUucHJvdG90eXBlLkFkZE9yaWdpbmFsRWxlbWVudD1mdW5jdGlvbihlLHQpe3RoaXMubV9vcmlnaW5hbFN0YXJ0PU1hdGgubWluKHRoaXMubV9vcmlnaW5hbFN0YXJ0LGUpLHRoaXMubV9tb2RpZmllZFN0YXJ0PU1hdGgubWluKHRoaXMubV9tb2RpZmllZFN0YXJ0LHQpLHRoaXMubV9vcmlnaW5hbENvdW50Kyt9LGUucHJvdG90eXBlLkFkZE1vZGlmaWVkRWxlbWVudD1mdW5jdGlvbihlLHQpe3RoaXMubV9vcmlnaW5hbFN0YXJ0PU1hdGgubWluKHRoaXMubV9vcmlnaW5hbFN0YXJ0LGUpLHRoaXMubV9tb2RpZmllZFN0YXJ0PU1hdGgubWluKHRoaXMubV9tb2RpZmllZFN0YXJ0LHQpLHRoaXMubV9tb2RpZmllZENvdW50Kyt9LGUucHJvdG90eXBlLmdldENoYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tX29yaWdpbmFsQ291bnQ+MHx8dGhpcy5tX21vZGlmaWVkQ291bnQ+MCkmJnRoaXMuTWFya05leHRDaGFuZ2UoKSx0aGlzLm1fY2hhbmdlc30sZS5wcm90b3R5cGUuZ2V0UmV2ZXJzZUNoYW5nZXM9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tX29yaWdpbmFsQ291bnQ+MHx8dGhpcy5tX21vZGlmaWVkQ291bnQ+MCkmJnRoaXMuTWFya05leHRDaGFuZ2UoKSx0aGlzLm1fY2hhbmdlcy5yZXZlcnNlKCksdGhpcy5tX2NoYW5nZXN9LGV9KCksRT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3ZvaWQgMD09PW4mJihuPW51bGwpLHRoaXMuT3JpZ2luYWxTZXF1ZW5jZT1lLHRoaXMuTW9kaWZpZWRTZXF1ZW5jZT10LHRoaXMuQ29udGludWVQcm9jZXNzaW5nUHJlZGljYXRlPW4sdGhpcy5tX2ZvcndhcmRIaXN0b3J5PVtdLHRoaXMubV9yZXZlcnNlSGlzdG9yeT1bXX1yZXR1cm4gZS5wcm90b3R5cGUuRWxlbWVudHNBcmVFcXVhbD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLk9yaWdpbmFsU2VxdWVuY2UuZ2V0RWxlbWVudEF0SW5kZXgoZSk9PT10aGlzLk1vZGlmaWVkU2VxdWVuY2UuZ2V0RWxlbWVudEF0SW5kZXgodCl9LGUucHJvdG90eXBlLk9yaWdpbmFsRWxlbWVudHNBcmVFcXVhbD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLk9yaWdpbmFsU2VxdWVuY2UuZ2V0RWxlbWVudEF0SW5kZXgoZSk9PT10aGlzLk9yaWdpbmFsU2VxdWVuY2UuZ2V0RWxlbWVudEF0SW5kZXgodCl9LGUucHJvdG90eXBlLk1vZGlmaWVkRWxlbWVudHNBcmVFcXVhbD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLk1vZGlmaWVkU2VxdWVuY2UuZ2V0RWxlbWVudEF0SW5kZXgoZSk9PT10aGlzLk1vZGlmaWVkU2VxdWVuY2UuZ2V0RWxlbWVudEF0SW5kZXgodCl9LGUucHJvdG90eXBlLkNvbXB1dGVEaWZmPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9Db21wdXRlRGlmZigwLHRoaXMuT3JpZ2luYWxTZXF1ZW5jZS5nZXRMZW5ndGgoKS0xLDAsdGhpcy5Nb2RpZmllZFNlcXVlbmNlLmdldExlbmd0aCgpLTEsZSl9LGUucHJvdG90eXBlLl9Db21wdXRlRGlmZj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPXRoaXMuQ29tcHV0ZURpZmZSZWN1cnNpdmUoZSx0LG4scixbITFdKTtyZXR1cm4gaT90aGlzLlByZXR0aWZ5Q2hhbmdlcyhvKTpvfSxlLnByb3RvdHlwZS5Db21wdXRlRGlmZlJlY3Vyc2l2ZT1mdW5jdGlvbihlLHQsbixyLGkpe2ZvcihpWzBdPSExO2U8PXQmJm48PXImJnRoaXMuRWxlbWVudHNBcmVFcXVhbChlLG4pOyllKyssbisrO2Zvcig7dD49ZSYmcj49biYmdGhpcy5FbGVtZW50c0FyZUVxdWFsKHQscik7KXQtLSxyLS07aWYoZT50fHxuPnIpe3ZhciBvPXZvaWQgMDtyZXR1cm4gbjw9cj8oYi5Bc3NlcnQoZT09PXQrMSwib3JpZ2luYWxTdGFydCBzaG91bGQgb25seSBiZSBvbmUgbW9yZSB0aGFuIG9yaWdpbmFsRW5kIiksbz1bbmV3IF8oZSwwLG4sci1uKzEpXSk6ZTw9dD8oYi5Bc3NlcnQobj09PXIrMSwibW9kaWZpZWRTdGFydCBzaG91bGQgb25seSBiZSBvbmUgbW9yZSB0aGFuIG1vZGlmaWVkRW5kIiksbz1bbmV3IF8oZSx0LWUrMSxuLDApXSk6KGIuQXNzZXJ0KGU9PT10KzEsIm9yaWdpbmFsU3RhcnQgc2hvdWxkIG9ubHkgYmUgb25lIG1vcmUgdGhhbiBvcmlnaW5hbEVuZCIpLGIuQXNzZXJ0KG49PT1yKzEsIm1vZGlmaWVkU3RhcnQgc2hvdWxkIG9ubHkgYmUgb25lIG1vcmUgdGhhbiBtb2RpZmllZEVuZCIpLG89W10pLG99dmFyIHM9WzBdLHU9WzBdLGE9dGhpcy5Db21wdXRlUmVjdXJzaW9uUG9pbnQoZSx0LG4scixzLHUsaSksbD1zWzBdLGM9dVswXTtpZihudWxsIT09YSlyZXR1cm4gYTtpZighaVswXSl7dmFyIGY9dGhpcy5Db21wdXRlRGlmZlJlY3Vyc2l2ZShlLGwsbixjLGkpLGg9W107cmV0dXJuIGg9aVswXT9bbmV3IF8obCsxLHQtKGwrMSkrMSxjKzEsci0oYysxKSsxKV06dGhpcy5Db21wdXRlRGlmZlJlY3Vyc2l2ZShsKzEsdCxjKzEscixpKSx0aGlzLkNvbmNhdGVuYXRlQ2hhbmdlcyhmLGgpfXJldHVybltuZXcgXyhlLHQtZSsxLG4sci1uKzEpXX0sZS5wcm90b3R5cGUuV0FMS1RSQUNFPWZ1bmN0aW9uKGUsdCxuLHIsaSxvLHMsdSxhLGwsYyxmLGgsZCxtLHAsZyx2KXt2YXIgeSxDLGI9bnVsbCxMPW5ldyBOLEU9dCxTPW4sdz1oWzBdLXBbMF0tcixBPU51bWJlci5NSU5fVkFMVUUsVD10aGlzLm1fZm9yd2FyZEhpc3RvcnkubGVuZ3RoLTE7ZG97KEM9dytlKT09PUV8fEM8UyYmYVtDLTFdPGFbQysxXT8oZD0oYz1hW0MrMV0pLXctcixjPEEmJkwuTWFya05leHRDaGFuZ2UoKSxBPWMsTC5BZGRNb2RpZmllZEVsZW1lbnQoYysxLGQpLHc9QysxLWUpOihkPShjPWFbQy0xXSsxKS13LXIsYzxBJiZMLk1hcmtOZXh0Q2hhbmdlKCksQT1jLTEsTC5BZGRPcmlnaW5hbEVsZW1lbnQoYyxkKzEpLHc9Qy0xLWUpLFQ+PTAmJihlPShhPXRoaXMubV9mb3J3YXJkSGlzdG9yeVtUXSlbMF0sRT0xLFM9YS5sZW5ndGgtMSl9d2hpbGUoLS1UPj0tMSk7aWYoeT1MLmdldFJldmVyc2VDaGFuZ2VzKCksdlswXSl7dmFyIE09aFswXSsxLFA9cFswXSsxO2lmKG51bGwhPT15JiZ5Lmxlbmd0aD4wKXt2YXIgTz15W3kubGVuZ3RoLTFdO009TWF0aC5tYXgoTSxPLmdldE9yaWdpbmFsRW5kKCkpLFA9TWF0aC5tYXgoUCxPLmdldE1vZGlmaWVkRW5kKCkpfWI9W25ldyBfKE0sZi1NKzEsUCxtLVArMSldfWVsc2V7TD1uZXcgTixFPW8sUz1zLHc9aFswXS1wWzBdLXUsQT1OdW1iZXIuTUFYX1ZBTFVFLFQ9Zz90aGlzLm1fcmV2ZXJzZUhpc3RvcnkubGVuZ3RoLTE6dGhpcy5tX3JldmVyc2VIaXN0b3J5Lmxlbmd0aC0yO2RveyhDPXcraSk9PT1FfHxDPFMmJmxbQy0xXT49bFtDKzFdPyhkPShjPWxbQysxXS0xKS13LXUsYz5BJiZMLk1hcmtOZXh0Q2hhbmdlKCksQT1jKzEsTC5BZGRPcmlnaW5hbEVsZW1lbnQoYysxLGQrMSksdz1DKzEtaSk6KGQ9KGM9bFtDLTFdKS13LXUsYz5BJiZMLk1hcmtOZXh0Q2hhbmdlKCksQT1jLEwuQWRkTW9kaWZpZWRFbGVtZW50KGMrMSxkKzEpLHc9Qy0xLWkpLFQ+PTAmJihpPShsPXRoaXMubV9yZXZlcnNlSGlzdG9yeVtUXSlbMF0sRT0xLFM9bC5sZW5ndGgtMSl9d2hpbGUoLS1UPj0tMSk7Yj1MLmdldENoYW5nZXMoKX1yZXR1cm4gdGhpcy5Db25jYXRlbmF0ZUNoYW5nZXMoeSxiKX0sZS5wcm90b3R5cGUuQ29tcHV0ZVJlY3Vyc2lvblBvaW50PWZ1bmN0aW9uKGUsdCxuLHIsaSxvLHMpe3ZhciB1LGE9MCxsPTAsYz0wLGY9MCxoPTAsZD0wO2UtLSxuLS0saVswXT0wLG9bMF09MCx0aGlzLm1fZm9yd2FyZEhpc3Rvcnk9W10sdGhpcy5tX3JldmVyc2VIaXN0b3J5PVtdO3ZhciBtLHAsZz10LWUrKHItbiksdj1nKzEseT1uZXcgQXJyYXkodiksQz1uZXcgQXJyYXkodiksYj1yLW4sTj10LWUsRT1lLW4sUz10LXIsdz0oTi1iKSUyPT0wO2Zvcih5W2JdPWUsQ1tOXT10LHNbMF09ITEsdT0xO3U8PWcvMisxO3UrKyl7dmFyIEE9MCxUPTA7Zm9yKGM9dGhpcy5DbGlwRGlhZ29uYWxCb3VuZChiLXUsdSxiLHYpLGY9dGhpcy5DbGlwRGlhZ29uYWxCb3VuZChiK3UsdSxiLHYpLG09YzttPD1mO20rPTIpe2ZvcihsPShhPW09PT1jfHxtPGYmJnlbbS0xXTx5W20rMV0/eVttKzFdOnlbbS0xXSsxKS0obS1iKS1FLHA9YTthPHQmJmw8ciYmdGhpcy5FbGVtZW50c0FyZUVxdWFsKGErMSxsKzEpOylhKyssbCsrO2lmKHlbbV09YSxhK2w+QStUJiYoQT1hLFQ9bCksIXcmJk1hdGguYWJzKG0tTik8PXUtMSYmYT49Q1ttXSlyZXR1cm4gaVswXT1hLG9bMF09bCxwPD1DW21dJiZ1PD0xNDQ4P3RoaXMuV0FMS1RSQUNFKGIsYyxmLEUsTixoLGQsUyx5LEMsYSx0LGksbCxyLG8sdyxzKTpudWxsfXZhciBNPShBLWUrKFQtbiktdSkvMjtpZihudWxsIT09dGhpcy5Db250aW51ZVByb2Nlc3NpbmdQcmVkaWNhdGUmJiF0aGlzLkNvbnRpbnVlUHJvY2Vzc2luZ1ByZWRpY2F0ZShBLHRoaXMuT3JpZ2luYWxTZXF1ZW5jZSxNKSlyZXR1cm4gc1swXT0hMCxpWzBdPUEsb1swXT1ULE0+MCYmdTw9MTQ0OD90aGlzLldBTEtUUkFDRShiLGMsZixFLE4saCxkLFMseSxDLGEsdCxpLGwscixvLHcscyk6KGUrKyxuKyssW25ldyBfKGUsdC1lKzEsbixyLW4rMSldKTtmb3IoaD10aGlzLkNsaXBEaWFnb25hbEJvdW5kKE4tdSx1LE4sdiksZD10aGlzLkNsaXBEaWFnb25hbEJvdW5kKE4rdSx1LE4sdiksbT1oO208PWQ7bSs9Mil7Zm9yKGw9KGE9bT09PWh8fG08ZCYmQ1ttLTFdPj1DW20rMV0/Q1ttKzFdLTE6Q1ttLTFdKS0obS1OKS1TLHA9YTthPmUmJmw+biYmdGhpcy5FbGVtZW50c0FyZUVxdWFsKGEsbCk7KWEtLSxsLS07aWYoQ1ttXT1hLHcmJk1hdGguYWJzKG0tYik8PXUmJmE8PXlbbV0pcmV0dXJuIGlbMF09YSxvWzBdPWwscD49eVttXSYmdTw9MTQ0OD90aGlzLldBTEtUUkFDRShiLGMsZixFLE4saCxkLFMseSxDLGEsdCxpLGwscixvLHcscyk6bnVsbH1pZih1PD0xNDQ3KXt2YXIgUD1uZXcgQXJyYXkoZi1jKzIpO1BbMF09Yi1jKzEsTC5Db3B5KHksYyxQLDEsZi1jKzEpLHRoaXMubV9mb3J3YXJkSGlzdG9yeS5wdXNoKFApLChQPW5ldyBBcnJheShkLWgrMikpWzBdPU4taCsxLEwuQ29weShDLGgsUCwxLGQtaCsxKSx0aGlzLm1fcmV2ZXJzZUhpc3RvcnkucHVzaChQKX19cmV0dXJuIHRoaXMuV0FMS1RSQUNFKGIsYyxmLEUsTixoLGQsUyx5LEMsYSx0LGksbCxyLG8sdyxzKX0sZS5wcm90b3R5cGUuUHJldHRpZnlDaGFuZ2VzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXtmb3IodmFyIG49ZVt0XSxyPXQ8ZS5sZW5ndGgtMT9lW3QrMV0ub3JpZ2luYWxTdGFydDp0aGlzLk9yaWdpbmFsU2VxdWVuY2UuZ2V0TGVuZ3RoKCksaT10PGUubGVuZ3RoLTE/ZVt0KzFdLm1vZGlmaWVkU3RhcnQ6dGhpcy5Nb2RpZmllZFNlcXVlbmNlLmdldExlbmd0aCgpLG89bi5vcmlnaW5hbExlbmd0aD4wLHM9bi5tb2RpZmllZExlbmd0aD4wO24ub3JpZ2luYWxTdGFydCtuLm9yaWdpbmFsTGVuZ3RoPHImJm4ubW9kaWZpZWRTdGFydCtuLm1vZGlmaWVkTGVuZ3RoPGkmJighb3x8dGhpcy5PcmlnaW5hbEVsZW1lbnRzQXJlRXF1YWwobi5vcmlnaW5hbFN0YXJ0LG4ub3JpZ2luYWxTdGFydCtuLm9yaWdpbmFsTGVuZ3RoKSkmJighc3x8dGhpcy5Nb2RpZmllZEVsZW1lbnRzQXJlRXF1YWwobi5tb2RpZmllZFN0YXJ0LG4ubW9kaWZpZWRTdGFydCtuLm1vZGlmaWVkTGVuZ3RoKSk7KW4ub3JpZ2luYWxTdGFydCsrLG4ubW9kaWZpZWRTdGFydCsrO3ZhciB1PVtudWxsXTt0PGUubGVuZ3RoLTEmJnRoaXMuQ2hhbmdlc092ZXJsYXAoZVt0XSxlW3QrMV0sdSkmJihlW3RdPXVbMF0sZS5zcGxpY2UodCsxLDEpLHQtLSl9Zm9yKHQ9ZS5sZW5ndGgtMTt0Pj0wO3QtLSl7bj1lW3RdLHI9MCxpPTA7aWYodD4wKXt2YXIgYT1lW3QtMV07YS5vcmlnaW5hbExlbmd0aD4wJiYocj1hLm9yaWdpbmFsU3RhcnQrYS5vcmlnaW5hbExlbmd0aCksYS5tb2RpZmllZExlbmd0aD4wJiYoaT1hLm1vZGlmaWVkU3RhcnQrYS5tb2RpZmllZExlbmd0aCl9bz1uLm9yaWdpbmFsTGVuZ3RoPjAscz1uLm1vZGlmaWVkTGVuZ3RoPjA7Zm9yKHZhciBsPTAsYz10aGlzLl9ib3VuZGFyeVNjb3JlKG4ub3JpZ2luYWxTdGFydCxuLm9yaWdpbmFsTGVuZ3RoLG4ubW9kaWZpZWRTdGFydCxuLm1vZGlmaWVkTGVuZ3RoKSxmPTE7O2YrKyl7dmFyIGg9bi5vcmlnaW5hbFN0YXJ0LWYsZD1uLm1vZGlmaWVkU3RhcnQtZjtpZihoPHJ8fGQ8aSlicmVhaztpZihvJiYhdGhpcy5PcmlnaW5hbEVsZW1lbnRzQXJlRXF1YWwoaCxoK24ub3JpZ2luYWxMZW5ndGgpKWJyZWFrO2lmKHMmJiF0aGlzLk1vZGlmaWVkRWxlbWVudHNBcmVFcXVhbChkLGQrbi5tb2RpZmllZExlbmd0aCkpYnJlYWs7dmFyIG09dGhpcy5fYm91bmRhcnlTY29yZShoLG4ub3JpZ2luYWxMZW5ndGgsZCxuLm1vZGlmaWVkTGVuZ3RoKTttPmMmJihjPW0sbD1mKX1uLm9yaWdpbmFsU3RhcnQtPWwsbi5tb2RpZmllZFN0YXJ0LT1sfXJldHVybiBlfSxlLnByb3RvdHlwZS5fT3JpZ2luYWxJc0JvdW5kYXJ5PWZ1bmN0aW9uKGUpe2lmKGU8PTB8fGU+PXRoaXMuT3JpZ2luYWxTZXF1ZW5jZS5nZXRMZW5ndGgoKS0xKXJldHVybiEwO3ZhciB0PXRoaXMuT3JpZ2luYWxTZXF1ZW5jZS5nZXRFbGVtZW50QXRJbmRleChlKTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJi9eXHMqJC8udGVzdCh0KX0sZS5wcm90b3R5cGUuX09yaWdpbmFsUmVnaW9uSXNCb3VuZGFyeT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuX09yaWdpbmFsSXNCb3VuZGFyeShlKXx8dGhpcy5fT3JpZ2luYWxJc0JvdW5kYXJ5KGUtMSkpcmV0dXJuITA7aWYodD4wKXt2YXIgbj1lK3Q7aWYodGhpcy5fT3JpZ2luYWxJc0JvdW5kYXJ5KG4tMSl8fHRoaXMuX09yaWdpbmFsSXNCb3VuZGFyeShuKSlyZXR1cm4hMH1yZXR1cm4hMX0sZS5wcm90b3R5cGUuX01vZGlmaWVkSXNCb3VuZGFyeT1mdW5jdGlvbihlKXtpZihlPD0wfHxlPj10aGlzLk1vZGlmaWVkU2VxdWVuY2UuZ2V0TGVuZ3RoKCktMSlyZXR1cm4hMDt2YXIgdD10aGlzLk1vZGlmaWVkU2VxdWVuY2UuZ2V0RWxlbWVudEF0SW5kZXgoZSk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYvXlxzKiQvLnRlc3QodCl9LGUucHJvdG90eXBlLl9Nb2RpZmllZFJlZ2lvbklzQm91bmRhcnk9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9Nb2RpZmllZElzQm91bmRhcnkoZSl8fHRoaXMuX01vZGlmaWVkSXNCb3VuZGFyeShlLTEpKXJldHVybiEwO2lmKHQ+MCl7dmFyIG49ZSt0O2lmKHRoaXMuX01vZGlmaWVkSXNCb3VuZGFyeShuLTEpfHx0aGlzLl9Nb2RpZmllZElzQm91bmRhcnkobikpcmV0dXJuITB9cmV0dXJuITF9LGUucHJvdG90eXBlLl9ib3VuZGFyeVNjb3JlPWZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybih0aGlzLl9PcmlnaW5hbFJlZ2lvbklzQm91bmRhcnkoZSx0KT8xOjApKyh0aGlzLl9Nb2RpZmllZFJlZ2lvbklzQm91bmRhcnkobixyKT8xOjApfSxlLnByb3RvdHlwZS5Db25jYXRlbmF0ZUNoYW5nZXM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXTtpZigwPT09ZS5sZW5ndGh8fDA9PT10Lmxlbmd0aClyZXR1cm4gdC5sZW5ndGg+MD90OmU7aWYodGhpcy5DaGFuZ2VzT3ZlcmxhcChlW2UubGVuZ3RoLTFdLHRbMF0sbikpe3ZhciByPW5ldyBBcnJheShlLmxlbmd0aCt0Lmxlbmd0aC0xKTtyZXR1cm4gTC5Db3B5KGUsMCxyLDAsZS5sZW5ndGgtMSkscltlLmxlbmd0aC0xXT1uWzBdLEwuQ29weSh0LDEscixlLmxlbmd0aCx0Lmxlbmd0aC0xKSxyfXI9bmV3IEFycmF5KGUubGVuZ3RoK3QubGVuZ3RoKTtyZXR1cm4gTC5Db3B5KGUsMCxyLDAsZS5sZW5ndGgpLEwuQ29weSh0LDAscixlLmxlbmd0aCx0Lmxlbmd0aCkscn0sZS5wcm90b3R5cGUuQ2hhbmdlc092ZXJsYXA9ZnVuY3Rpb24oZSx0LG4pe2lmKGIuQXNzZXJ0KGUub3JpZ2luYWxTdGFydDw9dC5vcmlnaW5hbFN0YXJ0LCJMZWZ0IGNoYW5nZSBpcyBub3QgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHJpZ2h0IGNoYW5nZSIpLGIuQXNzZXJ0KGUubW9kaWZpZWRTdGFydDw9dC5tb2RpZmllZFN0YXJ0LCJMZWZ0IGNoYW5nZSBpcyBub3QgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHJpZ2h0IGNoYW5nZSIpLGUub3JpZ2luYWxTdGFydCtlLm9yaWdpbmFsTGVuZ3RoPj10Lm9yaWdpbmFsU3RhcnR8fGUubW9kaWZpZWRTdGFydCtlLm1vZGlmaWVkTGVuZ3RoPj10Lm1vZGlmaWVkU3RhcnQpe3ZhciByPWUub3JpZ2luYWxTdGFydCxpPWUub3JpZ2luYWxMZW5ndGgsbz1lLm1vZGlmaWVkU3RhcnQscz1lLm1vZGlmaWVkTGVuZ3RoO3JldHVybiBlLm9yaWdpbmFsU3RhcnQrZS5vcmlnaW5hbExlbmd0aD49dC5vcmlnaW5hbFN0YXJ0JiYoaT10Lm9yaWdpbmFsU3RhcnQrdC5vcmlnaW5hbExlbmd0aC1lLm9yaWdpbmFsU3RhcnQpLGUubW9kaWZpZWRTdGFydCtlLm1vZGlmaWVkTGVuZ3RoPj10Lm1vZGlmaWVkU3RhcnQmJihzPXQubW9kaWZpZWRTdGFydCt0Lm1vZGlmaWVkTGVuZ3RoLWUubW9kaWZpZWRTdGFydCksblswXT1uZXcgXyhyLGksbyxzKSwhMH1yZXR1cm4gblswXT1udWxsLCExfSxlLnByb3RvdHlwZS5DbGlwRGlhZ29uYWxCb3VuZD1mdW5jdGlvbihlLHQsbixyKXtpZihlPj0wJiZlPHIpcmV0dXJuIGU7dmFyIGk9dCUyPT0wO3JldHVybiBlPDA/aT09PShuJTI9PTApPzA6MTppPT09KChyLW4tMSklMj09MCk/ci0xOnItMn0sZX0oKSxTPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCksdz17ZG9uZTohMCx2YWx1ZTp2b2lkIDB9OyFmdW5jdGlvbihlKXt2YXIgdD17bmV4dDpmdW5jdGlvbigpe3JldHVybiB3fX07ZnVuY3Rpb24gbihlLHQpe2Zvcih2YXIgbj1lLm5leHQoKTshbi5kb25lO249ZS5uZXh0KCkpdChuLnZhbHVlKX1lLmVtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHR9LGUuZnJvbUFycmF5PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09biYmKG49ZS5sZW5ndGgpLHtuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ+PW4/dzp7ZG9uZTohMSx2YWx1ZTplW3QrK119fX19LGUuZnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gdD9BcnJheS5pc0FycmF5KHQpP2UuZnJvbUFycmF5KHQpOnQ6ZS5lbXB0eSgpfSxlLm1hcD1mdW5jdGlvbihlLHQpe3JldHVybntuZXh0OmZ1bmN0aW9uKCl7dmFyIG49ZS5uZXh0KCk7cmV0dXJuIG4uZG9uZT93Ontkb25lOiExLHZhbHVlOnQobi52YWx1ZSl9fX19LGUuZmlsdGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtmb3IoOzspe3ZhciBuPWUubmV4dCgpO2lmKG4uZG9uZSlyZXR1cm4gdztpZih0KG4udmFsdWUpKXJldHVybntkb25lOiExLHZhbHVlOm4udmFsdWV9fX19fSxlLmZvckVhY2g9bixlLmNvbGxlY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIG4oZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHVzaChlKX0pKSx0fX0oQ3x8KEM9e30pKTsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4scixpKXtyZXR1cm4gdm9pZCAwPT09biYmKG49MCksdm9pZCAwPT09ciYmKHI9dC5sZW5ndGgpLHZvaWQgMD09PWkmJihpPW4tMSksZS5jYWxsKHRoaXMsdCxuLHIsaSl8fHRoaXN9Uyh0LGUpLHQucHJvdG90eXBlLmN1cnJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gZS5wcm90b3R5cGUuY3VycmVudC5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5wcmV2aW91cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4PU1hdGgubWF4KHRoaXMuaW5kZXgtMSx0aGlzLnN0YXJ0LTEpLHRoaXMuY3VycmVudCgpfSx0LnByb3RvdHlwZS5maXJzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4PXRoaXMuc3RhcnQsdGhpcy5jdXJyZW50KCl9LHQucHJvdG90eXBlLmxhc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleD10aGlzLmVuZC0xLHRoaXMuY3VycmVudCgpfSx0LnByb3RvdHlwZS5wYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19KShmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4scil7dm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09biYmKG49ZS5sZW5ndGgpLHZvaWQgMD09PXImJihyPXQtMSksdGhpcy5pdGVtcz1lLHRoaXMuc3RhcnQ9dCx0aGlzLmVuZD1uLHRoaXMuaW5kZXg9cn1yZXR1cm4gZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluZGV4PU1hdGgubWluKHRoaXMuaW5kZXgrMSx0aGlzLmVuZCksdGhpcy5jdXJyZW50KCl9LGUucHJvdG90eXBlLmN1cnJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmRleD09PXRoaXMuc3RhcnQtMXx8dGhpcy5pbmRleD09PXRoaXMuZW5kP251bGw6dGhpcy5pdGVtc1t0aGlzLmluZGV4XX0sZX0oKSksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5pdGVyYXRvcj1lLHRoaXMuZm49dH1lLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm4odGhpcy5pdGVyYXRvci5uZXh0KCkpfX0oKTt2YXIgQSxUPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCksTT0vXlx3W1x3XGQrLi1dKiQvLFA9L15cLy8sTz0vXlwvXC8vO3ZhciB4PSIiLEk9Ii8iLFI9L14oKFteOi8/I10rPyk6KT8oXC9cLyhbXi8/I10qKSk/KFtePyNdKikoXD8oW14jXSopKT8oIyguKikpPy8saz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4scixpLG8pe3ZvaWQgMD09PW8mJihvPSExKSwib2JqZWN0Ij09dHlwZW9mIGU/KHRoaXMuc2NoZW1lPWUuc2NoZW1lfHx4LHRoaXMuYXV0aG9yaXR5PWUuYXV0aG9yaXR5fHx4LHRoaXMucGF0aD1lLnBhdGh8fHgsdGhpcy5xdWVyeT1lLnF1ZXJ5fHx4LHRoaXMuZnJhZ21lbnQ9ZS5mcmFnbWVudHx8eCk6KHRoaXMuc2NoZW1lPWV8fHgsdGhpcy5hdXRob3JpdHk9dHx8eCx0aGlzLnBhdGg9ZnVuY3Rpb24oZSx0KXtzd2l0Y2goZSl7Y2FzZSJodHRwcyI6Y2FzZSJodHRwIjpjYXNlImZpbGUiOnQ/dFswXSE9PUkmJih0PUkrdCk6dD1JfXJldHVybiB0fSh0aGlzLnNjaGVtZSxufHx4KSx0aGlzLnF1ZXJ5PXJ8fHgsdGhpcy5mcmFnbWVudD1pfHx4LGZ1bmN0aW9uKGUsdCl7aWYoIWUuc2NoZW1lKXRocm93IG5ldyBFcnJvcignW1VyaUVycm9yXTogU2NoZW1lIGlzIG1pc3Npbmc6IHtzY2hlbWU6ICIiLCBhdXRob3JpdHk6ICInK2UuYXV0aG9yaXR5KyciLCBwYXRoOiAiJytlLnBhdGgrJyIsIHF1ZXJ5OiAiJytlLnF1ZXJ5KyciLCBmcmFnbWVudDogIicrZS5mcmFnbWVudCsnIn0nKTtpZihlLnNjaGVtZSYmIU0udGVzdChlLnNjaGVtZSkpdGhyb3cgbmV3IEVycm9yKCJbVXJpRXJyb3JdOiBTY2hlbWUgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzLiIpO2lmKGUucGF0aClpZihlLmF1dGhvcml0eSl7aWYoIVAudGVzdChlLnBhdGgpKXRocm93IG5ldyBFcnJvcignW1VyaUVycm9yXTogSWYgYSBVUkkgY29udGFpbnMgYW4gYXV0aG9yaXR5IGNvbXBvbmVudCwgdGhlbiB0aGUgcGF0aCBjb21wb25lbnQgbXVzdCBlaXRoZXIgYmUgZW1wdHkgb3IgYmVnaW4gd2l0aCBhIHNsYXNoICgiLyIpIGNoYXJhY3RlcicpfWVsc2UgaWYoTy50ZXN0KGUucGF0aCkpdGhyb3cgbmV3IEVycm9yKCdbVXJpRXJyb3JdOiBJZiBhIFVSSSBkb2VzIG5vdCBjb250YWluIGFuIGF1dGhvcml0eSBjb21wb25lbnQsIHRoZW4gdGhlIHBhdGggY2Fubm90IGJlZ2luIHdpdGggdHdvIHNsYXNoIGNoYXJhY3RlcnMgKCIvLyIpJyl9KHRoaXMpKX1yZXR1cm4gZS5pc1VyaT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGV8fCEhdCYmKCJzdHJpbmciPT10eXBlb2YgdC5hdXRob3JpdHkmJiJzdHJpbmciPT10eXBlb2YgdC5mcmFnbWVudCYmInN0cmluZyI9PXR5cGVvZiB0LnBhdGgmJiJzdHJpbmciPT10eXBlb2YgdC5xdWVyeSYmInN0cmluZyI9PXR5cGVvZiB0LnNjaGVtZSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuZnNQYXRoJiYiZnVuY3Rpb24iPT10eXBlb2YgdC53aXRoJiYiZnVuY3Rpb24iPT10eXBlb2YgdC50b1N0cmluZyl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZnNQYXRoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHEodGhpcyl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUud2l0aD1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gdGhpczt2YXIgdD1lLnNjaGVtZSxuPWUuYXV0aG9yaXR5LHI9ZS5wYXRoLGk9ZS5xdWVyeSxvPWUuZnJhZ21lbnQ7cmV0dXJuIHZvaWQgMD09PXQ/dD10aGlzLnNjaGVtZTpudWxsPT09dCYmKHQ9eCksdm9pZCAwPT09bj9uPXRoaXMuYXV0aG9yaXR5Om51bGw9PT1uJiYobj14KSx2b2lkIDA9PT1yP3I9dGhpcy5wYXRoOm51bGw9PT1yJiYocj14KSx2b2lkIDA9PT1pP2k9dGhpcy5xdWVyeTpudWxsPT09aSYmKGk9eCksdm9pZCAwPT09bz9vPXRoaXMuZnJhZ21lbnQ6bnVsbD09PW8mJihvPXgpLHQ9PT10aGlzLnNjaGVtZSYmbj09PXRoaXMuYXV0aG9yaXR5JiZyPT09dGhpcy5wYXRoJiZpPT09dGhpcy5xdWVyeSYmbz09PXRoaXMuZnJhZ21lbnQ/dGhpczpuZXcgVSh0LG4scixpLG8pfSxlLnBhcnNlPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ITEpO3ZhciBuPVIuZXhlYyhlKTtyZXR1cm4gbj9uZXcgVShuWzJdfHx4LGRlY29kZVVSSUNvbXBvbmVudChuWzRdfHx4KSxkZWNvZGVVUklDb21wb25lbnQobls1XXx8eCksZGVjb2RlVVJJQ29tcG9uZW50KG5bN118fHgpLGRlY29kZVVSSUNvbXBvbmVudChuWzldfHx4KSx0KTpuZXcgVSh4LHgseCx4LHgpfSxlLmZpbGU9ZnVuY3Rpb24oZSl7dmFyIHQ9eDtpZihjLmMmJihlPWUucmVwbGFjZSgvXFwvZyxJKSksZVswXT09PUkmJmVbMV09PT1JKXt2YXIgbj1lLmluZGV4T2YoSSwyKTstMT09PW4/KHQ9ZS5zdWJzdHJpbmcoMiksZT1JKToodD1lLnN1YnN0cmluZygyLG4pLGU9ZS5zdWJzdHJpbmcobil8fEkpfXJldHVybiBuZXcgVSgiZmlsZSIsdCxlLHgseCl9LGUuZnJvbT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFUoZS5zY2hlbWUsZS5hdXRob3JpdHksZS5wYXRoLGUucXVlcnksZS5mcmFnbWVudCl9LGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSksVih0aGlzLGUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5yZXZpdmU9ZnVuY3Rpb24odCl7aWYodCl7aWYodCBpbnN0YW5jZW9mIGUpcmV0dXJuIHQ7dmFyIG49bmV3IFUodCk7cmV0dXJuIG4uX2ZzUGF0aD10LmZzUGF0aCxuLl9mb3JtYXR0ZWQ9dC5leHRlcm5hbCxufXJldHVybiB0fSxlfSgpLFU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5fZm9ybWF0dGVkPW51bGwsdC5fZnNQYXRoPW51bGwsdH1yZXR1cm4gVCh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiZnNQYXRoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZzUGF0aHx8KHRoaXMuX2ZzUGF0aD1xKHRoaXMpKSx0aGlzLl9mc1BhdGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPSExKSxlP1YodGhpcywhMCk6KHRoaXMuX2Zvcm1hdHRlZHx8KHRoaXMuX2Zvcm1hdHRlZD1WKHRoaXMsITEpKSx0aGlzLl9mb3JtYXR0ZWQpfSx0LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT17JG1pZDoxfTtyZXR1cm4gdGhpcy5fZnNQYXRoJiYoZS5mc1BhdGg9dGhpcy5fZnNQYXRoKSx0aGlzLl9mb3JtYXR0ZWQmJihlLmV4dGVybmFsPXRoaXMuX2Zvcm1hdHRlZCksdGhpcy5wYXRoJiYoZS5wYXRoPXRoaXMucGF0aCksdGhpcy5zY2hlbWUmJihlLnNjaGVtZT10aGlzLnNjaGVtZSksdGhpcy5hdXRob3JpdHkmJihlLmF1dGhvcml0eT10aGlzLmF1dGhvcml0eSksdGhpcy5xdWVyeSYmKGUucXVlcnk9dGhpcy5xdWVyeSksdGhpcy5mcmFnbWVudCYmKGUuZnJhZ21lbnQ9dGhpcy5mcmFnbWVudCksZX0sdH0oayksRj0oKEE9e30pWzU4XT0iJTNBIixBWzQ3XT0iJTJGIixBWzYzXT0iJTNGIixBWzM1XT0iJTIzIixBWzkxXT0iJTVCIixBWzkzXT0iJTVEIixBWzY0XT0iJTQwIixBWzMzXT0iJTIxIixBWzM2XT0iJTI0IixBWzM4XT0iJTI2IixBWzM5XT0iJTI3IixBWzQwXT0iJTI4IixBWzQxXT0iJTI5IixBWzQyXT0iJTJBIixBWzQzXT0iJTJCIixBWzQ0XT0iJTJDIixBWzU5XT0iJTNCIixBWzYxXT0iJTNEIixBWzMyXT0iJTIwIixBKTtmdW5jdGlvbiBEKGUsdCl7Zm9yKHZhciBuPXZvaWQgMCxyPS0xLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZS5jaGFyQ29kZUF0KGkpO2lmKG8+PTk3JiZvPD0xMjJ8fG8+PTY1JiZvPD05MHx8bz49NDgmJm88PTU3fHw0NT09PW98fDQ2PT09b3x8OTU9PT1vfHwxMjY9PT1vfHx0JiY0Nz09PW8pLTEhPT1yJiYobis9ZW5jb2RlVVJJQ29tcG9uZW50KGUuc3Vic3RyaW5nKHIsaSkpLHI9LTEpLHZvaWQgMCE9PW4mJihuKz1lLmNoYXJBdChpKSk7ZWxzZXt2b2lkIDA9PT1uJiYobj1lLnN1YnN0cigwLGkpKTt2YXIgcz1GW29dO3ZvaWQgMCE9PXM/KC0xIT09ciYmKG4rPWVuY29kZVVSSUNvbXBvbmVudChlLnN1YnN0cmluZyhyLGkpKSxyPS0xKSxuKz1zKTotMT09PXImJihyPWkpfX1yZXR1cm4tMSE9PXImJihuKz1lbmNvZGVVUklDb21wb25lbnQoZS5zdWJzdHJpbmcocikpKSx2b2lkIDAhPT1uP246ZX1mdW5jdGlvbiBLKGUpe2Zvcih2YXIgdD12b2lkIDAsbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lLmNoYXJDb2RlQXQobik7MzU9PT1yfHw2Mz09PXI/KHZvaWQgMD09PXQmJih0PWUuc3Vic3RyKDAsbikpLHQrPUZbcl0pOnZvaWQgMCE9PXQmJih0Kz1lW25dKX1yZXR1cm4gdm9pZCAwIT09dD90OmV9ZnVuY3Rpb24gcShlKXt2YXIgdDtyZXR1cm4gdD1lLmF1dGhvcml0eSYmZS5wYXRoLmxlbmd0aD4xJiYiZmlsZSI9PT1lLnNjaGVtZT8iLy8iK2UuYXV0aG9yaXR5K2UucGF0aDo0Nz09PWUucGF0aC5jaGFyQ29kZUF0KDApJiYoZS5wYXRoLmNoYXJDb2RlQXQoMSk+PTY1JiZlLnBhdGguY2hhckNvZGVBdCgxKTw9OTB8fGUucGF0aC5jaGFyQ29kZUF0KDEpPj05NyYmZS5wYXRoLmNoYXJDb2RlQXQoMSk8PTEyMikmJjU4PT09ZS5wYXRoLmNoYXJDb2RlQXQoMik/ZS5wYXRoWzFdLnRvTG93ZXJDYXNlKCkrZS5wYXRoLnN1YnN0cigyKTplLnBhdGgsYy5jJiYodD10LnJlcGxhY2UoL1wvL2csIlxcIikpLHR9ZnVuY3Rpb24gVihlLHQpe3ZhciBuPXQ/SzpELHI9IiIsaT1lLnNjaGVtZSxvPWUuYXV0aG9yaXR5LHM9ZS5wYXRoLHU9ZS5xdWVyeSxhPWUuZnJhZ21lbnQ7aWYoaSYmKHIrPWkscis9IjoiKSwob3x8ImZpbGUiPT09aSkmJihyKz1JLHIrPUkpLG8pe3ZhciBsPW8uaW5kZXhPZigiQCIpO2lmKC0xIT09bCl7dmFyIGM9by5zdWJzdHIoMCxsKTtvPW8uc3Vic3RyKGwrMSksLTE9PT0obD1jLmluZGV4T2YoIjoiKSk/cis9bihjLCExKToocis9bihjLnN1YnN0cigwLGwpLCExKSxyKz0iOiIscis9bihjLnN1YnN0cihsKzEpLCExKSkscis9IkAifS0xPT09KGw9KG89by50b0xvd2VyQ2FzZSgpKS5pbmRleE9mKCI6IikpP3IrPW4obywhMSk6KHIrPW4oby5zdWJzdHIoMCxsKSwhMSkscis9by5zdWJzdHIobCkpfWlmKHMpe2lmKHMubGVuZ3RoPj0zJiY0Nz09PXMuY2hhckNvZGVBdCgwKSYmNTg9PT1zLmNoYXJDb2RlQXQoMikpKGY9cy5jaGFyQ29kZUF0KDEpKT49NjUmJmY8PTkwJiYocz0iLyIrU3RyaW5nLmZyb21DaGFyQ29kZShmKzMyKSsiOiIrcy5zdWJzdHIoMykpO2Vsc2UgaWYocy5sZW5ndGg+PTImJjU4PT09cy5jaGFyQ29kZUF0KDEpKXt2YXIgZjsoZj1zLmNoYXJDb2RlQXQoMCkpPj02NSYmZjw9OTAmJihzPVN0cmluZy5mcm9tQ2hhckNvZGUoZiszMikrIjoiK3Muc3Vic3RyKDIpKX1yKz1uKHMsITApfXJldHVybiB1JiYocis9Ij8iLHIrPW4odSwhMSkpLGEmJihyKz0iIyIscis9dD9hOkQoYSwhMSkpLHJ9dmFyIGo9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5saW5lTnVtYmVyPWUsdGhpcy5jb2x1bW49dH1yZXR1cm4gZS5wcm90b3R5cGUud2l0aD1mdW5jdGlvbih0LG4pe3JldHVybiB2b2lkIDA9PT10JiYodD10aGlzLmxpbmVOdW1iZXIpLHZvaWQgMD09PW4mJihuPXRoaXMuY29sdW1uKSx0PT09dGhpcy5saW5lTnVtYmVyJiZuPT09dGhpcy5jb2x1bW4/dGhpczpuZXcgZSh0LG4pfSxlLnByb3RvdHlwZS5kZWx0YT1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT10JiYodD0wKSx0aGlzLndpdGgodGhpcy5saW5lTnVtYmVyK2UsdGhpcy5jb2x1bW4rdCl9LGUucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gZS5lcXVhbHModGhpcyx0KX0sZS5lcXVhbHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hZSYmIXR8fCEhZSYmISF0JiZlLmxpbmVOdW1iZXI9PT10LmxpbmVOdW1iZXImJmUuY29sdW1uPT09dC5jb2x1bW59LGUucHJvdG90eXBlLmlzQmVmb3JlPWZ1bmN0aW9uKHQpe3JldHVybiBlLmlzQmVmb3JlKHRoaXMsdCl9LGUuaXNCZWZvcmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saW5lTnVtYmVyPHQubGluZU51bWJlcnx8ISh0LmxpbmVOdW1iZXI8ZS5saW5lTnVtYmVyKSYmZS5jb2x1bW48dC5jb2x1bW59LGUucHJvdG90eXBlLmlzQmVmb3JlT3JFcXVhbD1mdW5jdGlvbih0KXtyZXR1cm4gZS5pc0JlZm9yZU9yRXF1YWwodGhpcyx0KX0sZS5pc0JlZm9yZU9yRXF1YWw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saW5lTnVtYmVyPHQubGluZU51bWJlcnx8ISh0LmxpbmVOdW1iZXI8ZS5saW5lTnVtYmVyKSYmZS5jb2x1bW48PXQuY29sdW1ufSxlLmNvbXBhcmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0wfGUubGluZU51bWJlcixyPTB8dC5saW5lTnVtYmVyO3JldHVybiBuPT09cj8oMHxlLmNvbHVtbiktKDB8dC5jb2x1bW4pOm4tcn0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy5saW5lTnVtYmVyLHRoaXMuY29sdW1uKX0sZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iKCIrdGhpcy5saW5lTnVtYmVyKyIsIit0aGlzLmNvbHVtbisiKSJ9LGUubGlmdD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodC5saW5lTnVtYmVyLHQuY29sdW1uKX0sZS5pc0lQb3NpdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmIm51bWJlciI9PXR5cGVvZiBlLmxpbmVOdW1iZXImJiJudW1iZXIiPT10eXBlb2YgZS5jb2x1bW59LGV9KCksQj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4scil7ZT5ufHxlPT09biYmdD5yPyh0aGlzLnN0YXJ0TGluZU51bWJlcj1uLHRoaXMuc3RhcnRDb2x1bW49cix0aGlzLmVuZExpbmVOdW1iZXI9ZSx0aGlzLmVuZENvbHVtbj10KToodGhpcy5zdGFydExpbmVOdW1iZXI9ZSx0aGlzLnN0YXJ0Q29sdW1uPXQsdGhpcy5lbmRMaW5lTnVtYmVyPW4sdGhpcy5lbmRDb2x1bW49cil9cmV0dXJuIGUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5pc0VtcHR5KHRoaXMpfSxlLmlzRW1wdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhcnRMaW5lTnVtYmVyPT09ZS5lbmRMaW5lTnVtYmVyJiZlLnN0YXJ0Q29sdW1uPT09ZS5lbmRDb2x1bW59LGUucHJvdG90eXBlLmNvbnRhaW5zUG9zaXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIGUuY29udGFpbnNQb3NpdGlvbih0aGlzLHQpfSxlLmNvbnRhaW5zUG9zaXRpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKHQubGluZU51bWJlcjxlLnN0YXJ0TGluZU51bWJlcnx8dC5saW5lTnVtYmVyPmUuZW5kTGluZU51bWJlcikmJighKHQubGluZU51bWJlcj09PWUuc3RhcnRMaW5lTnVtYmVyJiZ0LmNvbHVtbjxlLnN0YXJ0Q29sdW1uKSYmISh0LmxpbmVOdW1iZXI9PT1lLmVuZExpbmVOdW1iZXImJnQuY29sdW1uPmUuZW5kQ29sdW1uKSl9LGUucHJvdG90eXBlLmNvbnRhaW5zUmFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGUuY29udGFpbnNSYW5nZSh0aGlzLHQpfSxlLmNvbnRhaW5zUmFuZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKHQuc3RhcnRMaW5lTnVtYmVyPGUuc3RhcnRMaW5lTnVtYmVyfHx0LmVuZExpbmVOdW1iZXI8ZS5zdGFydExpbmVOdW1iZXIpJiYoISh0LnN0YXJ0TGluZU51bWJlcj5lLmVuZExpbmVOdW1iZXJ8fHQuZW5kTGluZU51bWJlcj5lLmVuZExpbmVOdW1iZXIpJiYoISh0LnN0YXJ0TGluZU51bWJlcj09PWUuc3RhcnRMaW5lTnVtYmVyJiZ0LnN0YXJ0Q29sdW1uPGUuc3RhcnRDb2x1bW4pJiYhKHQuZW5kTGluZU51bWJlcj09PWUuZW5kTGluZU51bWJlciYmdC5lbmRDb2x1bW4+ZS5lbmRDb2x1bW4pKSl9LGUucHJvdG90eXBlLnBsdXNSYW5nZT1mdW5jdGlvbih0KXtyZXR1cm4gZS5wbHVzUmFuZ2UodGhpcyx0KX0sZS5wbHVzUmFuZ2U9ZnVuY3Rpb24odCxuKXt2YXIgcixpLG8scztyZXR1cm4gbi5zdGFydExpbmVOdW1iZXI8dC5zdGFydExpbmVOdW1iZXI/KHI9bi5zdGFydExpbmVOdW1iZXIsaT1uLnN0YXJ0Q29sdW1uKTpuLnN0YXJ0TGluZU51bWJlcj09PXQuc3RhcnRMaW5lTnVtYmVyPyhyPW4uc3RhcnRMaW5lTnVtYmVyLGk9TWF0aC5taW4obi5zdGFydENvbHVtbix0LnN0YXJ0Q29sdW1uKSk6KHI9dC5zdGFydExpbmVOdW1iZXIsaT10LnN0YXJ0Q29sdW1uKSxuLmVuZExpbmVOdW1iZXI+dC5lbmRMaW5lTnVtYmVyPyhvPW4uZW5kTGluZU51bWJlcixzPW4uZW5kQ29sdW1uKTpuLmVuZExpbmVOdW1iZXI9PT10LmVuZExpbmVOdW1iZXI/KG89bi5lbmRMaW5lTnVtYmVyLHM9TWF0aC5tYXgobi5lbmRDb2x1bW4sdC5lbmRDb2x1bW4pKToobz10LmVuZExpbmVOdW1iZXIscz10LmVuZENvbHVtbiksbmV3IGUocixpLG8scyl9LGUucHJvdG90eXBlLmludGVyc2VjdFJhbmdlcz1mdW5jdGlvbih0KXtyZXR1cm4gZS5pbnRlcnNlY3RSYW5nZXModGhpcyx0KX0sZS5pbnRlcnNlY3RSYW5nZXM9ZnVuY3Rpb24odCxuKXt2YXIgcj10LnN0YXJ0TGluZU51bWJlcixpPXQuc3RhcnRDb2x1bW4sbz10LmVuZExpbmVOdW1iZXIscz10LmVuZENvbHVtbix1PW4uc3RhcnRMaW5lTnVtYmVyLGE9bi5zdGFydENvbHVtbixsPW4uZW5kTGluZU51bWJlcixjPW4uZW5kQ29sdW1uO3JldHVybiByPHU/KHI9dSxpPWEpOnI9PT11JiYoaT1NYXRoLm1heChpLGEpKSxvPmw/KG89bCxzPWMpOm89PT1sJiYocz1NYXRoLm1pbihzLGMpKSxyPm8/bnVsbDpyPT09byYmaT5zP251bGw6bmV3IGUocixpLG8scyl9LGUucHJvdG90eXBlLmVxdWFsc1JhbmdlPWZ1bmN0aW9uKHQpe3JldHVybiBlLmVxdWFsc1JhbmdlKHRoaXMsdCl9LGUuZXF1YWxzUmFuZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJiEhdCYmZS5zdGFydExpbmVOdW1iZXI9PT10LnN0YXJ0TGluZU51bWJlciYmZS5zdGFydENvbHVtbj09PXQuc3RhcnRDb2x1bW4mJmUuZW5kTGluZU51bWJlcj09PXQuZW5kTGluZU51bWJlciYmZS5lbmRDb2x1bW49PT10LmVuZENvbHVtbn0sZS5wcm90b3R5cGUuZ2V0RW5kUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGoodGhpcy5lbmRMaW5lTnVtYmVyLHRoaXMuZW5kQ29sdW1uKX0sZS5wcm90b3R5cGUuZ2V0U3RhcnRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiBuZXcgaih0aGlzLnN0YXJ0TGluZU51bWJlcix0aGlzLnN0YXJ0Q29sdW1uKX0sZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iWyIrdGhpcy5zdGFydExpbmVOdW1iZXIrIiwiK3RoaXMuc3RhcnRDb2x1bW4rIiAtPiAiK3RoaXMuZW5kTGluZU51bWJlcisiLCIrdGhpcy5lbmRDb2x1bW4rIl0ifSxlLnByb3RvdHlwZS5zZXRFbmRQb3NpdGlvbj1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcgZSh0aGlzLnN0YXJ0TGluZU51bWJlcix0aGlzLnN0YXJ0Q29sdW1uLHQsbil9LGUucHJvdG90eXBlLnNldFN0YXJ0UG9zaXRpb249ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGUodCxuLHRoaXMuZW5kTGluZU51bWJlcix0aGlzLmVuZENvbHVtbil9LGUucHJvdG90eXBlLmNvbGxhcHNlVG9TdGFydD1mdW5jdGlvbigpe3JldHVybiBlLmNvbGxhcHNlVG9TdGFydCh0aGlzKX0sZS5jb2xsYXBzZVRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQuc3RhcnRMaW5lTnVtYmVyLHQuc3RhcnRDb2x1bW4sdC5zdGFydExpbmVOdW1iZXIsdC5zdGFydENvbHVtbil9LGUuZnJvbVBvc2l0aW9ucz1mdW5jdGlvbih0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj10KSxuZXcgZSh0LmxpbmVOdW1iZXIsdC5jb2x1bW4sbi5saW5lTnVtYmVyLG4uY29sdW1uKX0sZS5saWZ0PWZ1bmN0aW9uKHQpe3JldHVybiB0P25ldyBlKHQuc3RhcnRMaW5lTnVtYmVyLHQuc3RhcnRDb2x1bW4sdC5lbmRMaW5lTnVtYmVyLHQuZW5kQ29sdW1uKTpudWxsfSxlLmlzSVJhbmdlPWZ1bmN0aW9uKGUpe3JldHVybiBlJiYibnVtYmVyIj09dHlwZW9mIGUuc3RhcnRMaW5lTnVtYmVyJiYibnVtYmVyIj09dHlwZW9mIGUuc3RhcnRDb2x1bW4mJiJudW1iZXIiPT10eXBlb2YgZS5lbmRMaW5lTnVtYmVyJiYibnVtYmVyIj09dHlwZW9mIGUuZW5kQ29sdW1ufSxlLmFyZUludGVyc2VjdGluZ09yVG91Y2hpbmc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKGUuZW5kTGluZU51bWJlcjx0LnN0YXJ0TGluZU51bWJlcnx8ZS5lbmRMaW5lTnVtYmVyPT09dC5zdGFydExpbmVOdW1iZXImJmUuZW5kQ29sdW1uPHQuc3RhcnRDb2x1bW4pJiYhKHQuZW5kTGluZU51bWJlcjxlLnN0YXJ0TGluZU51bWJlcnx8dC5lbmRMaW5lTnVtYmVyPT09ZS5zdGFydExpbmVOdW1iZXImJnQuZW5kQ29sdW1uPGUuc3RhcnRDb2x1bW4pfSxlLmFyZUludGVyc2VjdGluZz1mdW5jdGlvbihlLHQpe3JldHVybiEoZS5lbmRMaW5lTnVtYmVyPHQuc3RhcnRMaW5lTnVtYmVyfHxlLmVuZExpbmVOdW1iZXI9PT10LnN0YXJ0TGluZU51bWJlciYmZS5lbmRDb2x1bW48PXQuc3RhcnRDb2x1bW4pJiYhKHQuZW5kTGluZU51bWJlcjxlLnN0YXJ0TGluZU51bWJlcnx8dC5lbmRMaW5lTnVtYmVyPT09ZS5zdGFydExpbmVOdW1iZXImJnQuZW5kQ29sdW1uPD1lLnN0YXJ0Q29sdW1uKX0sZS5jb21wYXJlUmFuZ2VzVXNpbmdTdGFydHM9ZnVuY3Rpb24oZSx0KXtpZihlJiZ0KXt2YXIgbj0wfGUuc3RhcnRMaW5lTnVtYmVyLHI9MHx0LnN0YXJ0TGluZU51bWJlcjtpZihuPT09cil7dmFyIGk9MHxlLnN0YXJ0Q29sdW1uLG89MHx0LnN0YXJ0Q29sdW1uO2lmKGk9PT1vKXt2YXIgcz0wfGUuZW5kTGluZU51bWJlcix1PTB8dC5lbmRMaW5lTnVtYmVyO3JldHVybiBzPT09dT8oMHxlLmVuZENvbHVtbiktKDB8dC5lbmRDb2x1bW4pOnMtdX1yZXR1cm4gaS1vfXJldHVybiBuLXJ9cmV0dXJuKGU/MTowKS0odD8xOjApfSxlLmNvbXBhcmVSYW5nZXNVc2luZ0VuZHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5lbmRMaW5lTnVtYmVyPT09dC5lbmRMaW5lTnVtYmVyP2UuZW5kQ29sdW1uPT09dC5lbmRDb2x1bW4/ZS5zdGFydExpbmVOdW1iZXI9PT10LnN0YXJ0TGluZU51bWJlcj9lLnN0YXJ0Q29sdW1uLXQuc3RhcnRDb2x1bW46ZS5zdGFydExpbmVOdW1iZXItdC5zdGFydExpbmVOdW1iZXI6ZS5lbmRDb2x1bW4tdC5lbmRDb2x1bW46ZS5lbmRMaW5lTnVtYmVyLXQuZW5kTGluZU51bWJlcn0sZS5zcGFuc011bHRpcGxlTGluZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5kTGluZU51bWJlcj5lLnN0YXJ0TGluZU51bWJlcn0sZX0oKTtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1Mjc5KTtmdW5jdGlvbiBZKGUsdCxuLHIpe3JldHVybiBuZXcgRShlLHQsbikuQ29tcHV0ZURpZmYocil9dmFyIFc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj1bXSxyPVtdLGk9MCxvPXQubGVuZ3RoO2k8bztpKyspbltpXT1lLl9nZXRGaXJzdE5vbkJsYW5rQ29sdW1uKHRbaV0sMSkscltpXT1lLl9nZXRMYXN0Tm9uQmxhbmtDb2x1bW4odFtpXSwxKTt0aGlzLl9saW5lcz10LHRoaXMuX3N0YXJ0Q29sdW1ucz1uLHRoaXMuX2VuZENvbHVtbnM9cn1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVzLmxlbmd0aH0sZS5wcm90b3R5cGUuZ2V0RWxlbWVudEF0SW5kZXg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2xpbmVzW2VdLnN1YnN0cmluZyh0aGlzLl9zdGFydENvbHVtbnNbZV0tMSx0aGlzLl9lbmRDb2x1bW5zW2VdLTEpfSxlLnByb3RvdHlwZS5nZXRTdGFydExpbmVOdW1iZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrMX0sZS5wcm90b3R5cGUuZ2V0RW5kTGluZU51bWJlcj1mdW5jdGlvbihlKXtyZXR1cm4gZSsxfSxlLl9nZXRGaXJzdE5vbkJsYW5rQ29sdW1uPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aDt0PG47dCsrKXt2YXIgcj1lLmNoYXJDb2RlQXQodCk7aWYoMzIhPT1yJiY5IT09cilyZXR1cm4gdH1yZXR1cm4tMX0oZSk7cmV0dXJuLTE9PT1uP3Q6bisxfSxlLl9nZXRMYXN0Tm9uQmxhbmtDb2x1bW49ZnVuY3Rpb24oZSx0KXt2YXIgbj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PWUubGVuZ3RoLTEpO2Zvcih2YXIgbj10O24+PTA7bi0tKXt2YXIgcj1lLmNoYXJDb2RlQXQobik7aWYoMzIhPT1yJiY5IT09cilyZXR1cm4gbn1yZXR1cm4tMX0oZSk7cmV0dXJuLTE9PT1uP3Q6bisyfSxlLnByb3RvdHlwZS5nZXRDaGFyU2VxdWVuY2U9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPVtdLG89W10scz0wLHU9dDt1PD1uO3UrKylmb3IodmFyIGE9dGhpcy5fbGluZXNbdV0sbD1lP3RoaXMuX3N0YXJ0Q29sdW1uc1t1XToxLGM9ZT90aGlzLl9lbmRDb2x1bW5zW3VdOmEubGVuZ3RoKzEsZj1sO2Y8YztmKyspcltzXT1hLmNoYXJDb2RlQXQoZi0xKSxpW3NdPXUrMSxvW3NdPWYscysrO3JldHVybiBuZXcgSChyLGksbyl9LGV9KCksSD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuX2NoYXJDb2Rlcz1lLHRoaXMuX2xpbmVOdW1iZXJzPXQsdGhpcy5fY29sdW1ucz1ufXJldHVybiBlLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhckNvZGVzLmxlbmd0aH0sZS5wcm90b3R5cGUuZ2V0RWxlbWVudEF0SW5kZXg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NoYXJDb2Rlc1tlXX0sZS5wcm90b3R5cGUuZ2V0U3RhcnRMaW5lTnVtYmVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9saW5lTnVtYmVyc1tlXX0sZS5wcm90b3R5cGUuZ2V0U3RhcnRDb2x1bW49ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbHVtbnNbZV19LGUucHJvdG90eXBlLmdldEVuZExpbmVOdW1iZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2xpbmVOdW1iZXJzW2VdfSxlLnByb3RvdHlwZS5nZXRFbmRDb2x1bW49ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbHVtbnNbZV0rMX0sZX0oKSxHPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixyLGksbyxzLHUpe3RoaXMub3JpZ2luYWxTdGFydExpbmVOdW1iZXI9ZSx0aGlzLm9yaWdpbmFsU3RhcnRDb2x1bW49dCx0aGlzLm9yaWdpbmFsRW5kTGluZU51bWJlcj1uLHRoaXMub3JpZ2luYWxFbmRDb2x1bW49cix0aGlzLm1vZGlmaWVkU3RhcnRMaW5lTnVtYmVyPWksdGhpcy5tb2RpZmllZFN0YXJ0Q29sdW1uPW8sdGhpcy5tb2RpZmllZEVuZExpbmVOdW1iZXI9cyx0aGlzLm1vZGlmaWVkRW5kQ29sdW1uPXV9cmV0dXJuIGUuY3JlYXRlRnJvbURpZmZDaGFuZ2U9ZnVuY3Rpb24odCxuLHIpe3ZhciBpLG8scyx1LGEsbCxjLGY7cmV0dXJuIDA9PT10Lm9yaWdpbmFsTGVuZ3RoPyhpPTAsbz0wLHM9MCx1PTApOihpPW4uZ2V0U3RhcnRMaW5lTnVtYmVyKHQub3JpZ2luYWxTdGFydCksbz1uLmdldFN0YXJ0Q29sdW1uKHQub3JpZ2luYWxTdGFydCkscz1uLmdldEVuZExpbmVOdW1iZXIodC5vcmlnaW5hbFN0YXJ0K3Qub3JpZ2luYWxMZW5ndGgtMSksdT1uLmdldEVuZENvbHVtbih0Lm9yaWdpbmFsU3RhcnQrdC5vcmlnaW5hbExlbmd0aC0xKSksMD09PXQubW9kaWZpZWRMZW5ndGg/KGE9MCxsPTAsYz0wLGY9MCk6KGE9ci5nZXRTdGFydExpbmVOdW1iZXIodC5tb2RpZmllZFN0YXJ0KSxsPXIuZ2V0U3RhcnRDb2x1bW4odC5tb2RpZmllZFN0YXJ0KSxjPXIuZ2V0RW5kTGluZU51bWJlcih0Lm1vZGlmaWVkU3RhcnQrdC5tb2RpZmllZExlbmd0aC0xKSxmPXIuZ2V0RW5kQ29sdW1uKHQubW9kaWZpZWRTdGFydCt0Lm1vZGlmaWVkTGVuZ3RoLTEpKSxuZXcgZShpLG8scyx1LGEsbCxjLGYpfSxlfSgpO3ZhciBRPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixyLGkpe3RoaXMub3JpZ2luYWxTdGFydExpbmVOdW1iZXI9ZSx0aGlzLm9yaWdpbmFsRW5kTGluZU51bWJlcj10LHRoaXMubW9kaWZpZWRTdGFydExpbmVOdW1iZXI9bix0aGlzLm1vZGlmaWVkRW5kTGluZU51bWJlcj1yLHRoaXMuY2hhckNoYW5nZXM9aX1yZXR1cm4gZS5jcmVhdGVGcm9tRGlmZlJlc3VsdD1mdW5jdGlvbih0LG4scixpLG8scyx1KXt2YXIgYSxsLGMsZixoPXZvaWQgMDtpZigwPT09bi5vcmlnaW5hbExlbmd0aD8oYT1yLmdldFN0YXJ0TGluZU51bWJlcihuLm9yaWdpbmFsU3RhcnQpLTEsbD0wKTooYT1yLmdldFN0YXJ0TGluZU51bWJlcihuLm9yaWdpbmFsU3RhcnQpLGw9ci5nZXRFbmRMaW5lTnVtYmVyKG4ub3JpZ2luYWxTdGFydCtuLm9yaWdpbmFsTGVuZ3RoLTEpKSwwPT09bi5tb2RpZmllZExlbmd0aD8oYz1pLmdldFN0YXJ0TGluZU51bWJlcihuLm1vZGlmaWVkU3RhcnQpLTEsZj0wKTooYz1pLmdldFN0YXJ0TGluZU51bWJlcihuLm1vZGlmaWVkU3RhcnQpLGY9aS5nZXRFbmRMaW5lTnVtYmVyKG4ubW9kaWZpZWRTdGFydCtuLm1vZGlmaWVkTGVuZ3RoLTEpKSxzJiYwIT09bi5vcmlnaW5hbExlbmd0aCYmMCE9PW4ubW9kaWZpZWRMZW5ndGgmJm8oKSl7dmFyIGQ9ci5nZXRDaGFyU2VxdWVuY2UodCxuLm9yaWdpbmFsU3RhcnQsbi5vcmlnaW5hbFN0YXJ0K24ub3JpZ2luYWxMZW5ndGgtMSksbT1pLmdldENoYXJTZXF1ZW5jZSh0LG4ubW9kaWZpZWRTdGFydCxuLm1vZGlmaWVkU3RhcnQrbi5tb2RpZmllZExlbmd0aC0xKSxwPVkoZCxtLG8sITApO3UmJihwPWZ1bmN0aW9uKGUpe2lmKGUubGVuZ3RoPD0xKXJldHVybiBlO2Zvcih2YXIgdD1bZVswXV0sbj10WzBdLHI9MSxpPWUubGVuZ3RoO3I8aTtyKyspe3ZhciBvPWVbcl0scz1vLm9yaWdpbmFsU3RhcnQtKG4ub3JpZ2luYWxTdGFydCtuLm9yaWdpbmFsTGVuZ3RoKSx1PW8ubW9kaWZpZWRTdGFydC0obi5tb2RpZmllZFN0YXJ0K24ubW9kaWZpZWRMZW5ndGgpO01hdGgubWluKHMsdSk8Mz8obi5vcmlnaW5hbExlbmd0aD1vLm9yaWdpbmFsU3RhcnQrby5vcmlnaW5hbExlbmd0aC1uLm9yaWdpbmFsU3RhcnQsbi5tb2RpZmllZExlbmd0aD1vLm1vZGlmaWVkU3RhcnQrby5tb2RpZmllZExlbmd0aC1uLm1vZGlmaWVkU3RhcnQpOih0LnB1c2gobyksbj1vKX1yZXR1cm4gdH0ocCkpLGg9W107Zm9yKHZhciBnPTAsXz1wLmxlbmd0aDtnPF87ZysrKWgucHVzaChHLmNyZWF0ZUZyb21EaWZmQ2hhbmdlKHBbZ10sZCxtKSl9cmV0dXJuIG5ldyBlKGEsbCxjLGYsaCl9LGV9KCksej1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzPW4uc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzLHRoaXMuc2hvdWxkUG9zdFByb2Nlc3NDaGFyQ2hhbmdlcz1uLnNob3VsZFBvc3RQcm9jZXNzQ2hhckNoYW5nZXMsdGhpcy5zaG91bGRJZ25vcmVUcmltV2hpdGVzcGFjZT1uLnNob3VsZElnbm9yZVRyaW1XaGl0ZXNwYWNlLHRoaXMuc2hvdWxkTWFrZVByZXR0eURpZmY9bi5zaG91bGRNYWtlUHJldHR5RGlmZix0aGlzLm1heGltdW1SdW5UaW1lTXM9NWUzLHRoaXMub3JpZ2luYWxMaW5lcz1lLHRoaXMubW9kaWZpZWRMaW5lcz10LHRoaXMub3JpZ2luYWw9bmV3IFcoZSksdGhpcy5tb2RpZmllZD1uZXcgVyh0KX1yZXR1cm4gZS5wcm90b3R5cGUuY29tcHV0ZURpZmY9ZnVuY3Rpb24oKXtpZigxPT09dGhpcy5vcmlnaW5hbC5nZXRMZW5ndGgoKSYmMD09PXRoaXMub3JpZ2luYWwuZ2V0RWxlbWVudEF0SW5kZXgoMCkubGVuZ3RoKXJldHVyblt7b3JpZ2luYWxTdGFydExpbmVOdW1iZXI6MSxvcmlnaW5hbEVuZExpbmVOdW1iZXI6MSxtb2RpZmllZFN0YXJ0TGluZU51bWJlcjoxLG1vZGlmaWVkRW5kTGluZU51bWJlcjp0aGlzLm1vZGlmaWVkLmdldExlbmd0aCgpLGNoYXJDaGFuZ2VzOlt7bW9kaWZpZWRFbmRDb2x1bW46MCxtb2RpZmllZEVuZExpbmVOdW1iZXI6MCxtb2RpZmllZFN0YXJ0Q29sdW1uOjAsbW9kaWZpZWRTdGFydExpbmVOdW1iZXI6MCxvcmlnaW5hbEVuZENvbHVtbjowLG9yaWdpbmFsRW5kTGluZU51bWJlcjowLG9yaWdpbmFsU3RhcnRDb2x1bW46MCxvcmlnaW5hbFN0YXJ0TGluZU51bWJlcjowfV19XTtpZigxPT09dGhpcy5tb2RpZmllZC5nZXRMZW5ndGgoKSYmMD09PXRoaXMubW9kaWZpZWQuZ2V0RWxlbWVudEF0SW5kZXgoMCkubGVuZ3RoKXJldHVyblt7b3JpZ2luYWxTdGFydExpbmVOdW1iZXI6MSxvcmlnaW5hbEVuZExpbmVOdW1iZXI6dGhpcy5vcmlnaW5hbC5nZXRMZW5ndGgoKSxtb2RpZmllZFN0YXJ0TGluZU51bWJlcjoxLG1vZGlmaWVkRW5kTGluZU51bWJlcjoxLGNoYXJDaGFuZ2VzOlt7bW9kaWZpZWRFbmRDb2x1bW46MCxtb2RpZmllZEVuZExpbmVOdW1iZXI6MCxtb2RpZmllZFN0YXJ0Q29sdW1uOjAsbW9kaWZpZWRTdGFydExpbmVOdW1iZXI6MCxvcmlnaW5hbEVuZENvbHVtbjowLG9yaWdpbmFsRW5kTGluZU51bWJlcjowLG9yaWdpbmFsU3RhcnRDb2x1bW46MCxvcmlnaW5hbFN0YXJ0TGluZU51bWJlcjowfV19XTt0aGlzLmNvbXB1dGF0aW9uU3RhcnRUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3ZhciBlPVkodGhpcy5vcmlnaW5hbCx0aGlzLm1vZGlmaWVkLHRoaXMuX2NvbnRpbnVlUHJvY2Vzc2luZ1ByZWRpY2F0ZS5iaW5kKHRoaXMpLHRoaXMuc2hvdWxkTWFrZVByZXR0eURpZmYpO2lmKHRoaXMuc2hvdWxkSWdub3JlVHJpbVdoaXRlc3BhY2Upe2Zvcih2YXIgdD1bXSxuPTAscj1lLmxlbmd0aDtuPHI7bisrKXQucHVzaChRLmNyZWF0ZUZyb21EaWZmUmVzdWx0KHRoaXMuc2hvdWxkSWdub3JlVHJpbVdoaXRlc3BhY2UsZVtuXSx0aGlzLm9yaWdpbmFsLHRoaXMubW9kaWZpZWQsdGhpcy5fY29udGludWVQcm9jZXNzaW5nUHJlZGljYXRlLmJpbmQodGhpcyksdGhpcy5zaG91bGRDb21wdXRlQ2hhckNoYW5nZXMsdGhpcy5zaG91bGRQb3N0UHJvY2Vzc0NoYXJDaGFuZ2VzKSk7cmV0dXJuIHR9Zm9yKHZhciBpPVtdLG89MCxzPTAsdT0obj0tMSxlLmxlbmd0aCk7bjx1O24rKyl7Zm9yKHZhciBhPW4rMTx1P2VbbisxXTpudWxsLGw9YT9hLm9yaWdpbmFsU3RhcnQ6dGhpcy5vcmlnaW5hbExpbmVzLmxlbmd0aCxjPWE/YS5tb2RpZmllZFN0YXJ0OnRoaXMubW9kaWZpZWRMaW5lcy5sZW5ndGg7bzxsJiZzPGM7KXt2YXIgZj10aGlzLm9yaWdpbmFsTGluZXNbb10saD10aGlzLm1vZGlmaWVkTGluZXNbc107aWYoZiE9PWgpe2Zvcih2YXIgZD1XLl9nZXRGaXJzdE5vbkJsYW5rQ29sdW1uKGYsMSksbT1XLl9nZXRGaXJzdE5vbkJsYW5rQ29sdW1uKGgsMSk7ZD4xJiZtPjE7KXtpZihmLmNoYXJDb2RlQXQoZC0yKSE9PWguY2hhckNvZGVBdChtLTIpKWJyZWFrO2QtLSxtLS19KGQ+MXx8bT4xKSYmdGhpcy5fcHVzaFRyaW1XaGl0ZXNwYWNlQ2hhckNoYW5nZShpLG8rMSwxLGQscysxLDEsbSk7Zm9yKHZhciBwPVcuX2dldExhc3ROb25CbGFua0NvbHVtbihmLDEpLGc9Vy5fZ2V0TGFzdE5vbkJsYW5rQ29sdW1uKGgsMSksXz1mLmxlbmd0aCsxLHY9aC5sZW5ndGgrMTtwPF8mJmc8djspe2lmKGYuY2hhckNvZGVBdChwLTEpIT09Zi5jaGFyQ29kZUF0KGctMSkpYnJlYWs7cCsrLGcrK30ocDxffHxnPHYpJiZ0aGlzLl9wdXNoVHJpbVdoaXRlc3BhY2VDaGFyQ2hhbmdlKGksbysxLHAsXyxzKzEsZyx2KX1vKysscysrfWEmJihpLnB1c2goUS5jcmVhdGVGcm9tRGlmZlJlc3VsdCh0aGlzLnNob3VsZElnbm9yZVRyaW1XaGl0ZXNwYWNlLGEsdGhpcy5vcmlnaW5hbCx0aGlzLm1vZGlmaWVkLHRoaXMuX2NvbnRpbnVlUHJvY2Vzc2luZ1ByZWRpY2F0ZS5iaW5kKHRoaXMpLHRoaXMuc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzLHRoaXMuc2hvdWxkUG9zdFByb2Nlc3NDaGFyQ2hhbmdlcykpLG8rPWEub3JpZ2luYWxMZW5ndGgscys9YS5tb2RpZmllZExlbmd0aCl9cmV0dXJuIGl9LGUucHJvdG90eXBlLl9wdXNoVHJpbVdoaXRlc3BhY2VDaGFyQ2hhbmdlPWZ1bmN0aW9uKGUsdCxuLHIsaSxvLHMpe2lmKCF0aGlzLl9tZXJnZVRyaW1XaGl0ZXNwYWNlQ2hhckNoYW5nZShlLHQsbixyLGksbyxzKSl7dmFyIHU9dm9pZCAwO3RoaXMuc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzJiYodT1bbmV3IEcodCxuLHQscixpLG8saSxzKV0pLGUucHVzaChuZXcgUSh0LHQsaSxpLHUpKX19LGUucHJvdG90eXBlLl9tZXJnZVRyaW1XaGl0ZXNwYWNlQ2hhckNoYW5nZT1mdW5jdGlvbihlLHQsbixyLGksbyxzKXt2YXIgdT1lLmxlbmd0aDtpZigwPT09dSlyZXR1cm4hMTt2YXIgYT1lW3UtMV07cmV0dXJuIDAhPT1hLm9yaWdpbmFsRW5kTGluZU51bWJlciYmMCE9PWEubW9kaWZpZWRFbmRMaW5lTnVtYmVyJiYoYS5vcmlnaW5hbEVuZExpbmVOdW1iZXIrMT09PXQmJmEubW9kaWZpZWRFbmRMaW5lTnVtYmVyKzE9PT1pJiYoYS5vcmlnaW5hbEVuZExpbmVOdW1iZXI9dCxhLm1vZGlmaWVkRW5kTGluZU51bWJlcj1pLHRoaXMuc2hvdWxkQ29tcHV0ZUNoYXJDaGFuZ2VzJiZhLmNoYXJDaGFuZ2VzLnB1c2gobmV3IEcodCxuLHQscixpLG8saSxzKSksITApKX0sZS5wcm90b3R5cGUuX2NvbnRpbnVlUHJvY2Vzc2luZ1ByZWRpY2F0ZT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5tYXhpbXVtUnVuVGltZU1zfHwobmV3IERhdGUpLmdldFRpbWUoKS10aGlzLmNvbXB1dGF0aW9uU3RhcnRUaW1lPHRoaXMubWF4aW11bVJ1blRpbWVNc30sZX0oKSxYPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbil7Zm9yKHZhciByPW5ldyBVaW50OEFycmF5KGUqdCksaT0wLG89ZSp0O2k8bztpKyspcltpXT1uO3RoaXMuX2RhdGE9cix0aGlzLnJvd3M9ZSx0aGlzLmNvbHM9dH1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2RhdGFbZSp0aGlzLmNvbHMrdF19LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQsbil7dGhpcy5fZGF0YVtlKnRoaXMuY29scyt0XT1ufSxlfSgpO2Z1bmN0aW9uICQoZSl7cmV0dXJuIGU8MD8wOmU+MjU1PzI1NTowfGV9ZnVuY3Rpb24gSihlKXtyZXR1cm4gZTwwPzA6ZT40Mjk0OTY3Mjk1PzQyOTQ5NjcyOTU6MHxlfXZhciBaPWZ1bmN0aW9uKGUsdCl7dGhpcy5pbmRleD1lLHRoaXMucmVtYWluZGVyPXR9LGVlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnZhbHVlcz1lLHRoaXMucHJlZml4U3VtPW5ldyBVaW50MzJBcnJheShlLmxlbmd0aCksdGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4PW5ldyBJbnQzMkFycmF5KDEpLHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXT0tMX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0Q291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RofSxlLnByb3RvdHlwZS5pbnNlcnRWYWx1ZXM9ZnVuY3Rpb24oZSx0KXtlPUooZSk7dmFyIG49dGhpcy52YWx1ZXMscj10aGlzLnByZWZpeFN1bSxpPXQubGVuZ3RoO3JldHVybiAwIT09aSYmKHRoaXMudmFsdWVzPW5ldyBVaW50MzJBcnJheShuLmxlbmd0aCtpKSx0aGlzLnZhbHVlcy5zZXQobi5zdWJhcnJheSgwLGUpLDApLHRoaXMudmFsdWVzLnNldChuLnN1YmFycmF5KGUpLGUraSksdGhpcy52YWx1ZXMuc2V0KHQsZSksZS0xPHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXSYmKHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXT1lLTEpLHRoaXMucHJlZml4U3VtPW5ldyBVaW50MzJBcnJheSh0aGlzLnZhbHVlcy5sZW5ndGgpLHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXT49MCYmdGhpcy5wcmVmaXhTdW0uc2V0KHIuc3ViYXJyYXkoMCx0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF0rMSkpLCEwKX0sZS5wcm90b3R5cGUuY2hhbmdlVmFsdWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1KKGUpLHQ9Sih0KSx0aGlzLnZhbHVlc1tlXSE9PXQmJih0aGlzLnZhbHVlc1tlXT10LGUtMTx0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF0mJih0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF09ZS0xKSwhMCl9LGUucHJvdG90eXBlLnJlbW92ZVZhbHVlcz1mdW5jdGlvbihlLHQpe2U9SihlKSx0PUoodCk7dmFyIG49dGhpcy52YWx1ZXMscj10aGlzLnByZWZpeFN1bTtpZihlPj1uLmxlbmd0aClyZXR1cm4hMTt2YXIgaT1uLmxlbmd0aC1lO3JldHVybiB0Pj1pJiYodD1pKSwwIT09dCYmKHRoaXMudmFsdWVzPW5ldyBVaW50MzJBcnJheShuLmxlbmd0aC10KSx0aGlzLnZhbHVlcy5zZXQobi5zdWJhcnJheSgwLGUpLDApLHRoaXMudmFsdWVzLnNldChuLnN1YmFycmF5KGUrdCksZSksdGhpcy5wcmVmaXhTdW09bmV3IFVpbnQzMkFycmF5KHRoaXMudmFsdWVzLmxlbmd0aCksZS0xPHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXSYmKHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXT1lLTEpLHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXT49MCYmdGhpcy5wcmVmaXhTdW0uc2V0KHIuc3ViYXJyYXkoMCx0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF0rMSkpLCEwKX0sZS5wcm90b3R5cGUuZ2V0VG90YWxWYWx1ZT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy52YWx1ZXMubGVuZ3RoPzA6dGhpcy5fZ2V0QWNjdW11bGF0ZWRWYWx1ZSh0aGlzLnZhbHVlcy5sZW5ndGgtMSl9LGUucHJvdG90eXBlLmdldEFjY3VtdWxhdGVkVmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU8MD8wOihlPUooZSksdGhpcy5fZ2V0QWNjdW11bGF0ZWRWYWx1ZShlKSl9LGUucHJvdG90eXBlLl9nZXRBY2N1bXVsYXRlZFZhbHVlPWZ1bmN0aW9uKGUpe2lmKGU8PXRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXSlyZXR1cm4gdGhpcy5wcmVmaXhTdW1bZV07dmFyIHQ9dGhpcy5wcmVmaXhTdW1WYWxpZEluZGV4WzBdKzE7MD09PXQmJih0aGlzLnByZWZpeFN1bVswXT10aGlzLnZhbHVlc1swXSx0KyspLGU+PXRoaXMudmFsdWVzLmxlbmd0aCYmKGU9dGhpcy52YWx1ZXMubGVuZ3RoLTEpO2Zvcih2YXIgbj10O248PWU7bisrKXRoaXMucHJlZml4U3VtW25dPXRoaXMucHJlZml4U3VtW24tMV0rdGhpcy52YWx1ZXNbbl07cmV0dXJuIHRoaXMucHJlZml4U3VtVmFsaWRJbmRleFswXT1NYXRoLm1heCh0aGlzLnByZWZpeFN1bVZhbGlkSW5kZXhbMF0sZSksdGhpcy5wcmVmaXhTdW1bZV19LGUucHJvdG90eXBlLmdldEluZGV4T2Y9ZnVuY3Rpb24oZSl7ZT1NYXRoLmZsb29yKGUpLHRoaXMuZ2V0VG90YWxWYWx1ZSgpO2Zvcih2YXIgdD0wLG49dGhpcy52YWx1ZXMubGVuZ3RoLTEscj0wLGk9MCxvPTA7dDw9bjspaWYocj10KyhuLXQpLzJ8MCxlPChvPShpPXRoaXMucHJlZml4U3VtW3JdKS10aGlzLnZhbHVlc1tyXSkpbj1yLTE7ZWxzZXtpZighKGU+PWkpKWJyZWFrO3Q9cisxfXJldHVybiBuZXcgWihyLGUtbyl9LGV9KCksdGU9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jYWNoZUFjY3VtdWxhdGVkVmFsdWVTdGFydD0wLHRoaXMuX2NhY2hlPW51bGwsdGhpcy5fYWN0dWFsPW5ldyBlZShlKSx0aGlzLl9idXN0Q2FjaGUoKX1lLnByb3RvdHlwZS5fYnVzdENhY2hlPWZ1bmN0aW9uKCl7dGhpcy5fY2FjaGVBY2N1bXVsYXRlZFZhbHVlU3RhcnQ9MCx0aGlzLl9jYWNoZT1udWxsfSxlLnByb3RvdHlwZS5pbnNlcnRWYWx1ZXM9ZnVuY3Rpb24oZSx0KXt0aGlzLl9hY3R1YWwuaW5zZXJ0VmFsdWVzKGUsdCkmJnRoaXMuX2J1c3RDYWNoZSgpfSxlLnByb3RvdHlwZS5jaGFuZ2VWYWx1ZT1mdW5jdGlvbihlLHQpe3RoaXMuX2FjdHVhbC5jaGFuZ2VWYWx1ZShlLHQpJiZ0aGlzLl9idXN0Q2FjaGUoKX0sZS5wcm90b3R5cGUucmVtb3ZlVmFsdWVzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fYWN0dWFsLnJlbW92ZVZhbHVlcyhlLHQpJiZ0aGlzLl9idXN0Q2FjaGUoKX0sZS5wcm90b3R5cGUuZ2V0VG90YWxWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3R1YWwuZ2V0VG90YWxWYWx1ZSgpfSxlLnByb3RvdHlwZS5nZXRBY2N1bXVsYXRlZFZhbHVlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hY3R1YWwuZ2V0QWNjdW11bGF0ZWRWYWx1ZShlKX0sZS5wcm90b3R5cGUuZ2V0SW5kZXhPZj1mdW5jdGlvbihlKXtpZihlPU1hdGguZmxvb3IoZSksbnVsbCE9PXRoaXMuX2NhY2hlKXt2YXIgdD1lLXRoaXMuX2NhY2hlQWNjdW11bGF0ZWRWYWx1ZVN0YXJ0O2lmKHQ+PTAmJnQ8dGhpcy5fY2FjaGUubGVuZ3RoKXJldHVybiB0aGlzLl9jYWNoZVt0XX1yZXR1cm4gdGhpcy5fYWN0dWFsLmdldEluZGV4T2YoZSl9LGUucHJvdG90eXBlLndhcm1VcENhY2hlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdLHI9ZTtyPD10O3IrKyluW3ItZV09dGhpcy5nZXRJbmRleE9mKHIpO3RoaXMuX2NhY2hlPW4sdGhpcy5fY2FjaGVBY2N1bXVsYXRlZFZhbHVlU3RhcnQ9ZX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuLHIpe3RoaXMuX3VyaT1lLHRoaXMuX2xpbmVzPXQsdGhpcy5fZW9sPW4sdGhpcy5fdmVyc2lvbklkPXIsdGhpcy5fbGluZVN0YXJ0cz1udWxsfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fbGluZXMubGVuZ3RoPTB9LGUucHJvdG90eXBlLmdldFRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGluZXMuam9pbih0aGlzLl9lb2wpfSxlLnByb3RvdHlwZS5vbkV2ZW50cz1mdW5jdGlvbihlKXtlLmVvbCYmZS5lb2whPT10aGlzLl9lb2wmJih0aGlzLl9lb2w9ZS5lb2wsdGhpcy5fbGluZVN0YXJ0cz1udWxsKTtmb3IodmFyIHQ9MCxuPWUuY2hhbmdlczt0PG4ubGVuZ3RoO3QrKyl7dmFyIHI9blt0XTt0aGlzLl9hY2NlcHREZWxldGVSYW5nZShyLnJhbmdlKSx0aGlzLl9hY2NlcHRJbnNlcnRUZXh0KG5ldyBqKHIucmFuZ2Uuc3RhcnRMaW5lTnVtYmVyLHIucmFuZ2Uuc3RhcnRDb2x1bW4pLHIudGV4dCl9dGhpcy5fdmVyc2lvbklkPWUudmVyc2lvbklkfSxlLnByb3RvdHlwZS5fZW5zdXJlTGluZVN0YXJ0cz1mdW5jdGlvbigpe2lmKCF0aGlzLl9saW5lU3RhcnRzKXtmb3IodmFyIGU9dGhpcy5fZW9sLmxlbmd0aCx0PXRoaXMuX2xpbmVzLmxlbmd0aCxuPW5ldyBVaW50MzJBcnJheSh0KSxyPTA7cjx0O3IrKyluW3JdPXRoaXMuX2xpbmVzW3JdLmxlbmd0aCtlO3RoaXMuX2xpbmVTdGFydHM9bmV3IGVlKG4pfX0sZS5wcm90b3R5cGUuX3NldExpbmVUZXh0PWZ1bmN0aW9uKGUsdCl7dGhpcy5fbGluZXNbZV09dCx0aGlzLl9saW5lU3RhcnRzJiZ0aGlzLl9saW5lU3RhcnRzLmNoYW5nZVZhbHVlKGUsdGhpcy5fbGluZXNbZV0ubGVuZ3RoK3RoaXMuX2VvbC5sZW5ndGgpfSxlLnByb3RvdHlwZS5fYWNjZXB0RGVsZXRlUmFuZ2U9ZnVuY3Rpb24oZSl7aWYoZS5zdGFydExpbmVOdW1iZXIhPT1lLmVuZExpbmVOdW1iZXIpdGhpcy5fc2V0TGluZVRleHQoZS5zdGFydExpbmVOdW1iZXItMSx0aGlzLl9saW5lc1tlLnN0YXJ0TGluZU51bWJlci0xXS5zdWJzdHJpbmcoMCxlLnN0YXJ0Q29sdW1uLTEpK3RoaXMuX2xpbmVzW2UuZW5kTGluZU51bWJlci0xXS5zdWJzdHJpbmcoZS5lbmRDb2x1bW4tMSkpLHRoaXMuX2xpbmVzLnNwbGljZShlLnN0YXJ0TGluZU51bWJlcixlLmVuZExpbmVOdW1iZXItZS5zdGFydExpbmVOdW1iZXIpLHRoaXMuX2xpbmVTdGFydHMmJnRoaXMuX2xpbmVTdGFydHMucmVtb3ZlVmFsdWVzKGUuc3RhcnRMaW5lTnVtYmVyLGUuZW5kTGluZU51bWJlci1lLnN0YXJ0TGluZU51bWJlcik7ZWxzZXtpZihlLnN0YXJ0Q29sdW1uPT09ZS5lbmRDb2x1bW4pcmV0dXJuO3RoaXMuX3NldExpbmVUZXh0KGUuc3RhcnRMaW5lTnVtYmVyLTEsdGhpcy5fbGluZXNbZS5zdGFydExpbmVOdW1iZXItMV0uc3Vic3RyaW5nKDAsZS5zdGFydENvbHVtbi0xKSt0aGlzLl9saW5lc1tlLnN0YXJ0TGluZU51bWJlci0xXS5zdWJzdHJpbmcoZS5lbmRDb2x1bW4tMSkpfX0sZS5wcm90b3R5cGUuX2FjY2VwdEluc2VydFRleHQ9ZnVuY3Rpb24oZSx0KXtpZigwIT09dC5sZW5ndGgpe3ZhciBuPXQuc3BsaXQoL1xyXG58XHJ8XG4vKTtpZigxIT09bi5sZW5ndGgpe25bbi5sZW5ndGgtMV0rPXRoaXMuX2xpbmVzW2UubGluZU51bWJlci0xXS5zdWJzdHJpbmcoZS5jb2x1bW4tMSksdGhpcy5fc2V0TGluZVRleHQoZS5saW5lTnVtYmVyLTEsdGhpcy5fbGluZXNbZS5saW5lTnVtYmVyLTFdLnN1YnN0cmluZygwLGUuY29sdW1uLTEpK25bMF0pO2Zvcih2YXIgcj1uZXcgVWludDMyQXJyYXkobi5sZW5ndGgtMSksaT0xO2k8bi5sZW5ndGg7aSsrKXRoaXMuX2xpbmVzLnNwbGljZShlLmxpbmVOdW1iZXIraS0xLDAsbltpXSkscltpLTFdPW5baV0ubGVuZ3RoK3RoaXMuX2VvbC5sZW5ndGg7dGhpcy5fbGluZVN0YXJ0cyYmdGhpcy5fbGluZVN0YXJ0cy5pbnNlcnRWYWx1ZXMoZS5saW5lTnVtYmVyLHIpfWVsc2UgdGhpcy5fc2V0TGluZVRleHQoZS5saW5lTnVtYmVyLTEsdGhpcy5fbGluZXNbZS5saW5lTnVtYmVyLTFdLnN1YnN0cmluZygwLGUuY29sdW1uLTEpK25bMF0rdGhpcy5fbGluZXNbZS5saW5lTnVtYmVyLTFdLnN1YnN0cmluZyhlLmNvbHVtbi0xKSl9fSxlfSgpKTt2YXIgbmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO2Zvcih2YXIgdD0iKC0/XFxkKlxcLlxcZFxcdyopfChbXiIsbj0wO248ImB+IUAjJCVeJiooKS09K1t7XX1cXHw7OidcIiwuPD4vPyIubGVuZ3RoO24rKyl7dmFyIHI9ImB+IUAjJCVeJiooKS09K1t7XX1cXHw7OidcIiwuPD4vPyJbbl07ZS5pbmRleE9mKHIpPj0wfHwodCs9IlxcIityKX1yZXR1cm4gdCs9Ilxcc10rKSIsbmV3IFJlZ0V4cCh0LCJnIil9KCk7dmFyIHJlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt2YXIgbj0kKHQpO3RoaXMuX2RlZmF1bHRWYWx1ZT1uLHRoaXMuX2FzY2lpTWFwPWUuX2NyZWF0ZUFzY2lpTWFwKG4pLHRoaXMuX21hcD1uZXcgTWFwfXJldHVybiBlLl9jcmVhdGVBc2NpaU1hcD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bmV3IFVpbnQ4QXJyYXkoMjU2KSxuPTA7bjwyNTY7bisrKXRbbl09ZTtyZXR1cm4gdH0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG49JCh0KTtlPj0wJiZlPDI1Nj90aGlzLl9hc2NpaU1hcFtlXT1uOnRoaXMuX21hcC5zZXQoZSxuKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBlPj0wJiZlPDI1Nj90aGlzLl9hc2NpaU1hcFtlXTp0aGlzLl9tYXAuZ2V0KGUpfHx0aGlzLl9kZWZhdWx0VmFsdWV9LGV9KCksaWU9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2FjdHVhbD1uZXcgcmUoMCl9ZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3RoaXMuX2FjdHVhbC5zZXQoZSwxKX0sZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiAxPT09dGhpcy5fYWN0dWFsLmdldChlKX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2Zvcih2YXIgdD0wLG49MCxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLHM9b1swXTsobD1vWzFdKT50JiYodD1sKSxzPm4mJihuPXMpLChjPW9bMl0pPm4mJihuPWMpfXQrKyxuKys7dmFyIHU9bmV3IFgobix0LDApO2ZvcihyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgYT1lW3JdLGw9KHM9YVswXSxhWzFdKSxjPWFbMl07dS5zZXQocyxsLGMpfXRoaXMuX3N0YXRlcz11LHRoaXMuX21heENoYXJDb2RlPXR9cmV0dXJuIGUucHJvdG90eXBlLm5leHRTdGF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiB0PDB8fHQ+PXRoaXMuX21heENoYXJDb2RlPzA6dGhpcy5fc3RhdGVzLmdldChlLHQpfSxlfSgpKSxvZT1udWxsO3ZhciBzZT1udWxsO3ZhciB1ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuX2NyZWF0ZUxpbms9ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz1pLTE7ZG97dmFyIHM9dC5jaGFyQ29kZUF0KG8pO2lmKDIhPT1lLmdldChzKSlicmVhaztvLS19d2hpbGUobz5yKTtpZihyPjApe3ZhciB1PXQuY2hhckNvZGVBdChyLTEpLGE9dC5jaGFyQ29kZUF0KG8pOyg0MD09PXUmJjQxPT09YXx8OTE9PT11JiY5Mz09PWF8fDEyMz09PXUmJjEyNT09PWEpJiZvLS19cmV0dXJue3JhbmdlOntzdGFydExpbmVOdW1iZXI6bixzdGFydENvbHVtbjpyKzEsZW5kTGluZU51bWJlcjpuLGVuZENvbHVtbjpvKzJ9LHVybDp0LnN1YnN0cmluZyhyLG8rMSl9fSxlLmNvbXB1dGVMaW5rcz1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PW4mJihudWxsPT09b2UmJihvZT1uZXcgaWUoW1sxLDEwNCwyXSxbMSw3MiwyXSxbMSwxMDIsNl0sWzEsNzAsNl0sWzIsMTE2LDNdLFsyLDg0LDNdLFszLDExNiw0XSxbMyw4NCw0XSxbNCwxMTIsNV0sWzQsODAsNV0sWzUsMTE1LDldLFs1LDgzLDldLFs1LDU4LDEwXSxbNiwxMDUsN10sWzYsNzMsN10sWzcsMTA4LDhdLFs3LDc2LDhdLFs4LDEwMSw5XSxbOCw2OSw5XSxbOSw1OCwxMF0sWzEwLDQ3LDExXSxbMTEsNDcsMTJdXSkpLG49b2UpO2Zvcih2YXIgcj1mdW5jdGlvbigpe2lmKG51bGw9PT1zZSl7c2U9bmV3IHJlKDApO2Zvcih2YXIgZT0wO2U8IiBcdDw+J1wi44CB44CC772h772k77yM77yO77ya77yb77yf77yB77yg77yD77yE77yF77yG77yK4oCY4oCc44CI44CK44CM44CO44CQ44CU77yI77y7772b772i772j772d77y977yJ44CV44CR44CP44CN44CL44CJ4oCd4oCZ772A772e4oCmIi5sZW5ndGg7ZSsrKXNlLnNldCgiIFx0PD4nXCLjgIHjgILvvaHvvaTvvIzvvI7vvJrvvJvvvJ/vvIHvvKDvvIPvvITvvIXvvIbvvIrigJjigJzjgIjjgIrjgIzjgI7jgJDjgJTvvIjvvLvvvZvvvaLvvaPvvZ3vvL3vvInjgJXjgJHjgI/jgI3jgIvjgInigJ3igJnvvYDvvZ7igKYiLmNoYXJDb2RlQXQoZSksMSk7Zm9yKGU9MDtlPCIuLDsiLmxlbmd0aDtlKyspc2Uuc2V0KCIuLDsiLmNoYXJDb2RlQXQoZSksMil9cmV0dXJuIHNlfSgpLGk9W10sbz0xLHM9dC5nZXRMaW5lQ291bnQoKTtvPD1zO28rKyl7Zm9yKHZhciB1PXQuZ2V0TGluZUNvbnRlbnQobyksYT11Lmxlbmd0aCxsPTAsYz0wLGY9MCxoPTEsZD0hMSxtPSExLHA9ITE7bDxhOyl7dmFyIGc9ITEsXz11LmNoYXJDb2RlQXQobCk7aWYoMTM9PT1oKXt2YXIgdj12b2lkIDA7c3dpdGNoKF8pe2Nhc2UgNDA6ZD0hMCx2PTA7YnJlYWs7Y2FzZSA0MTp2PWQ/MDoxO2JyZWFrO2Nhc2UgOTE6bT0hMCx2PTA7YnJlYWs7Y2FzZSA5Mzp2PW0/MDoxO2JyZWFrO2Nhc2UgMTIzOnA9ITAsdj0wO2JyZWFrO2Nhc2UgMTI1OnY9cD8wOjE7YnJlYWs7Y2FzZSAzOTp2PTM0PT09Znx8OTY9PT1mPzA6MTticmVhaztjYXNlIDM0OnY9Mzk9PT1mfHw5Nj09PWY/MDoxO2JyZWFrO2Nhc2UgOTY6dj0zOT09PWZ8fDM0PT09Zj8wOjE7YnJlYWs7ZGVmYXVsdDp2PXIuZ2V0KF8pfTE9PT12JiYoaS5wdXNoKGUuX2NyZWF0ZUxpbmsocix1LG8sYyxsKSksZz0hMCl9ZWxzZSBpZigxMj09PWgpe3Y9dm9pZCAwOzkxPT09Xz8obT0hMCx2PTApOnY9ci5nZXQoXyksMT09PXY/Zz0hMDpoPTEzfWVsc2UgMD09PShoPW4ubmV4dFN0YXRlKGgsXykpJiYoZz0hMCk7ZyYmKGg9MSxkPSExLG09ITEscD0hMSxjPWwrMSxmPV8pLGwrK30xMz09PWgmJmkucHVzaChlLl9jcmVhdGVMaW5rKHIsdSxvLGMsYSkpfXJldHVybiBpfSxlfSgpO3ZhciBhZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9kZWZhdWx0VmFsdWVTZXQ9W1sidHJ1ZSIsImZhbHNlIl0sWyJUcnVlIiwiRmFsc2UiXSxbIlByaXZhdGUiLCJQdWJsaWMiLCJGcmllbmQiLCJSZWFkT25seSIsIlBhcnRpYWwiLCJQcm90ZWN0ZWQiLCJXcml0ZU9ubHkiXSxbInB1YmxpYyIsInByb3RlY3RlZCIsInByaXZhdGUiXV19cmV0dXJuIGUucHJvdG90eXBlLm5hdmlnYXRlVmFsdWVTZXQ9ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbztpZihlJiZ0JiYobz10aGlzLmRvTmF2aWdhdGVWYWx1ZVNldCh0LGkpKSlyZXR1cm57cmFuZ2U6ZSx2YWx1ZTpvfTtpZihuJiZyJiYobz10aGlzLmRvTmF2aWdhdGVWYWx1ZVNldChyLGkpKSlyZXR1cm57cmFuZ2U6bix2YWx1ZTpvfTtyZXR1cm4gbnVsbH0sZS5wcm90b3R5cGUuZG9OYXZpZ2F0ZVZhbHVlU2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5udW1iZXJSZXBsYWNlKGUsdCk7cmV0dXJuIG51bGwhPT1uP246dGhpcy50ZXh0UmVwbGFjZShlLHQpfSxlLnByb3RvdHlwZS5udW1iZXJSZXBsYWNlPWZ1bmN0aW9uKGUsdCl7dmFyIG49TWF0aC5wb3coMTAsZS5sZW5ndGgtKGUubGFzdEluZGV4T2YoIi4iKSsxKSkscj1OdW1iZXIoZSksaT1wYXJzZUZsb2F0KGUpO3JldHVybiBpc05hTihyKXx8aXNOYU4oaSl8fHIhPT1pP251bGw6MCE9PXJ8fHQ/KHI9TWF0aC5mbG9vcihyKm4pLHIrPXQ/bjotbixTdHJpbmcoci9uKSk6bnVsbH0sZS5wcm90b3R5cGUudGV4dFJlcGxhY2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy52YWx1ZVNldHNSZXBsYWNlKHRoaXMuX2RlZmF1bHRWYWx1ZVNldCxlLHQpfSxlLnByb3RvdHlwZS52YWx1ZVNldHNSZXBsYWNlPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bnVsbCxpPTAsbz1lLmxlbmd0aDtudWxsPT09ciYmaTxvO2krKylyPXRoaXMudmFsdWVTZXRSZXBsYWNlKGVbaV0sdCxuKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUudmFsdWVTZXRSZXBsYWNlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmluZGV4T2YodCk7cmV0dXJuIHI+PTA/KChyKz1uPzE6LTEpPDA/cj1lLmxlbmd0aC0xOnIlPWUubGVuZ3RoLGVbcl0pOm51bGx9LGUuSU5TVEFOQ0U9bmV3IGUsZX0oKTtuKDMpO3ZhciBsZSxjZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7dGhpcy5lbGVtZW50PXQsdGhpcy5uZXh0PWUuVW5kZWZpbmVkLHRoaXMucHJldj1lLlVuZGVmaW5lZH1yZXR1cm4gZS5VbmRlZmluZWQ9bmV3IGUodm9pZCAwKSxlfSgpLGZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2ZpcnN0PWNlLlVuZGVmaW5lZCx0aGlzLl9sYXN0PWNlLlVuZGVmaW5lZCx0aGlzLl9zaXplPTB9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmlyc3Q9PT1jZS5VbmRlZmluZWR9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fZmlyc3Q9Y2UuVW5kZWZpbmVkLHRoaXMuX2xhc3Q9Y2UuVW5kZWZpbmVkLHRoaXMuX3NpemU9MH0sZS5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faW5zZXJ0KGUsITEpfSxlLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pbnNlcnQoZSwhMCl9LGUucHJvdG90eXBlLl9pbnNlcnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLHI9bmV3IGNlKGUpO2lmKHRoaXMuX2ZpcnN0PT09Y2UuVW5kZWZpbmVkKXRoaXMuX2ZpcnN0PXIsdGhpcy5fbGFzdD1yO2Vsc2UgaWYodCl7dmFyIGk9dGhpcy5fbGFzdDt0aGlzLl9sYXN0PXIsci5wcmV2PWksaS5uZXh0PXJ9ZWxzZXt2YXIgbz10aGlzLl9maXJzdDt0aGlzLl9maXJzdD1yLHIubmV4dD1vLG8ucHJldj1yfXRoaXMuX3NpemUrPTE7dmFyIHM9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7c3x8KHM9ITAsbi5fcmVtb3ZlKHIpKX19LGUucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKCl7aWYodGhpcy5fZmlyc3QhPT1jZS5VbmRlZmluZWQpe3ZhciBlPXRoaXMuX2ZpcnN0LmVsZW1lbnQ7cmV0dXJuIHRoaXMuX3JlbW92ZSh0aGlzLl9maXJzdCksZX19LGUucHJvdG90eXBlLl9yZW1vdmU9ZnVuY3Rpb24oZSl7aWYoZS5wcmV2IT09Y2UuVW5kZWZpbmVkJiZlLm5leHQhPT1jZS5VbmRlZmluZWQpe3ZhciB0PWUucHJldjt0Lm5leHQ9ZS5uZXh0LGUubmV4dC5wcmV2PXR9ZWxzZSBlLnByZXY9PT1jZS5VbmRlZmluZWQmJmUubmV4dD09PWNlLlVuZGVmaW5lZD8odGhpcy5fZmlyc3Q9Y2UuVW5kZWZpbmVkLHRoaXMuX2xhc3Q9Y2UuVW5kZWZpbmVkKTplLm5leHQ9PT1jZS5VbmRlZmluZWQ/KHRoaXMuX2xhc3Q9dGhpcy5fbGFzdC5wcmV2LHRoaXMuX2xhc3QubmV4dD1jZS5VbmRlZmluZWQpOmUucHJldj09PWNlLlVuZGVmaW5lZCYmKHRoaXMuX2ZpcnN0PXRoaXMuX2ZpcnN0Lm5leHQsdGhpcy5fZmlyc3QucHJldj1jZS5VbmRlZmluZWQpO3RoaXMuX3NpemUtPTF9LGUucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl9maXJzdDtyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiB0PT09Y2UuVW5kZWZpbmVkP3c6KGU/ZS52YWx1ZT10LmVsZW1lbnQ6ZT17ZG9uZTohMSx2YWx1ZTp0LmVsZW1lbnR9LHQ9dC5uZXh0LGUpfX19LGUucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD10aGlzLl9maXJzdDt0IT09Y2UuVW5kZWZpbmVkO3Q9dC5uZXh0KWUucHVzaCh0LmVsZW1lbnQpO3JldHVybiBlfSxlfSgpLGhlPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24odCxuKXtyZXR1cm4oZT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZVtuXT10W25dKX0pKHQsbil9O3JldHVybiBmdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPXR9ZSh0LG4pLHQucHJvdG90eXBlPW51bGw9PT1uP09iamVjdC5jcmVhdGUobik6KHIucHJvdG90eXBlPW4ucHJvdG90eXBlLG5ldyByKX19KCk7IWZ1bmN0aW9uKGUpe3ZhciB0PXtkaXNwb3NlOmZ1bmN0aW9uKCl7fX07ZnVuY3Rpb24gbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLHIpe3ZvaWQgMD09PW4mJihuPW51bGwpO3ZhciBpLG89ITE7cmV0dXJuIGk9ZSgoZnVuY3Rpb24oZSl7aWYoIW8pcmV0dXJuIGk/aS5kaXNwb3NlKCk6bz0hMCx0LmNhbGwobixlKX0pLG51bGwsciksbyYmaS5kaXNwb3NlKCksaX19ZnVuY3Rpb24gcihlLHQpe3JldHVybiB1KChmdW5jdGlvbihuLHIsaSl7cmV0dXJuIHZvaWQgMD09PXImJihyPW51bGwpLGUoKGZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwocix0KGUpKX0pLG51bGwsaSl9KSl9ZnVuY3Rpb24gaShlLHQpe3JldHVybiB1KChmdW5jdGlvbihuLHIsaSl7cmV0dXJuIHZvaWQgMD09PXImJihyPW51bGwpLGUoKGZ1bmN0aW9uKGUpe3QoZSksbi5jYWxsKHIsZSl9KSxudWxsLGkpfSkpfWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gdSgoZnVuY3Rpb24obixyLGkpe3JldHVybiB2b2lkIDA9PT1yJiYocj1udWxsKSxlKChmdW5jdGlvbihlKXtyZXR1cm4gdChlKSYmbi5jYWxsKHIsZSl9KSxudWxsLGkpfSkpfWZ1bmN0aW9uIHMoZSx0LG4pe3ZhciBpPW47cmV0dXJuIHIoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIGk9dChpLGUpfSkpfWZ1bmN0aW9uIHUoZSl7dmFyIHQsbj1uZXcgcGUoe29uRmlyc3RMaXN0ZW5lckFkZDpmdW5jdGlvbigpe3Q9ZShuLmZpcmUsbil9LG9uTGFzdExpc3RlbmVyUmVtb3ZlOmZ1bmN0aW9uKCl7dC5kaXNwb3NlKCl9fSk7cmV0dXJuIG4uZXZlbnR9ZnVuY3Rpb24gbChlKXt2YXIgdCxuPSEwO3JldHVybiBvKGUsKGZ1bmN0aW9uKGUpe3ZhciByPW58fGUhPT10O3JldHVybiBuPSExLHQ9ZSxyfSkpfWUuTm9uZT1mdW5jdGlvbigpe3JldHVybiB0fSxlLm9uY2U9bixlLm1hcD1yLGUuZm9yRWFjaD1pLGUuZmlsdGVyPW8sZS5zaWduYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGUuYW55PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdF09YXJndW1lbnRzW3RdO3JldHVybiBmdW5jdGlvbih0LG4scil7cmV0dXJuIHZvaWQgMD09PW4mJihuPW51bGwpLGEoZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlKChmdW5jdGlvbihlKXtyZXR1cm4gdC5jYWxsKG4sZSl9KSxudWxsLHIpfSkpKX19LGUucmVkdWNlPXMsZS5zbmFwc2hvdD11LGUuZGVib3VuY2U9ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbzt2b2lkIDA9PT1uJiYobj0xMDApLHZvaWQgMD09PXImJihyPSExKTt2YXIgcz12b2lkIDAsdT12b2lkIDAsYT0wLGw9bmV3IHBlKHtsZWFrV2FybmluZ1RocmVzaG9sZDppLG9uRmlyc3RMaXN0ZW5lckFkZDpmdW5jdGlvbigpe289ZSgoZnVuY3Rpb24oZSl7YSsrLHM9dChzLGUpLHImJiF1JiZsLmZpcmUocyksY2xlYXJUaW1lb3V0KHUpLHU9c2V0VGltZW91dCgoZnVuY3Rpb24oKXt2YXIgZT1zO3M9dm9pZCAwLHU9dm9pZCAwLCghcnx8YT4xKSYmbC5maXJlKGUpLGE9MH0pLG4pfSkpfSxvbkxhc3RMaXN0ZW5lclJlbW92ZTpmdW5jdGlvbigpe28uZGlzcG9zZSgpfX0pO3JldHVybiBsLmV2ZW50fSxlLnN0b3B3YXRjaD1mdW5jdGlvbihlKXt2YXIgdD0obmV3IERhdGUpLmdldFRpbWUoKTtyZXR1cm4gcihuKGUpLChmdW5jdGlvbihlKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKS10fSkpfSxlLmxhdGNoPWwsZS5idWZmZXI9ZnVuY3Rpb24oZSx0LG4pe3ZvaWQgMD09PXQmJih0PSExKSx2b2lkIDA9PT1uJiYobj1bXSk7dmFyIHI9bi5zbGljZSgpLGk9ZSgoZnVuY3Rpb24oZSl7cj9yLnB1c2goZSk6cy5maXJlKGUpfSkpLG89ZnVuY3Rpb24oKXtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBzLmZpcmUoZSl9KSkscj1udWxsfSxzPW5ldyBwZSh7b25GaXJzdExpc3RlbmVyQWRkOmZ1bmN0aW9uKCl7aXx8KGk9ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHMuZmlyZShlKX0pKSl9LG9uRmlyc3RMaXN0ZW5lckRpZEFkZDpmdW5jdGlvbigpe3ImJih0P3NldFRpbWVvdXQobyk6bygpKX0sb25MYXN0TGlzdGVuZXJSZW1vdmU6ZnVuY3Rpb24oKXtpJiZpLmRpc3Bvc2UoKSxpPW51bGx9fSk7cmV0dXJuIHMuZXZlbnR9O3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmV2ZW50PWV9cmV0dXJuIGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUocih0aGlzLmV2ZW50LHQpKX0sZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUoaSh0aGlzLmV2ZW50LHQpKX0sZS5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZShvKHRoaXMuZXZlbnQsdCkpfSxlLnByb3RvdHlwZS5yZWR1Y2U9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGUocyh0aGlzLmV2ZW50LHQsbikpfSxlLnByb3RvdHlwZS5sYXRjaD1mdW5jdGlvbigpe3JldHVybiBuZXcgZShsKHRoaXMuZXZlbnQpKX0sZS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmV2ZW50KGUsdCxuKX0sZS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4odGhpcy5ldmVudCkoZSx0LHIpfSxlfSgpO2UuY2hhaW49ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBjKGUpfSxlLmZyb21Ob2RlRXZlbnRFbWl0dGVyPWZ1bmN0aW9uKGUsdCxuKXt2b2lkIDA9PT1uJiYobj1mdW5jdGlvbihlKXtyZXR1cm4gZX0pO3ZhciByPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdF09YXJndW1lbnRzW3RdO3JldHVybiBpLmZpcmUobi5hcHBseSh2b2lkIDAsZSkpfSxpPW5ldyBwZSh7b25GaXJzdExpc3RlbmVyQWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGUub24odCxyKX0sb25MYXN0TGlzdGVuZXJSZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gZS5yZW1vdmVMaXN0ZW5lcih0LHIpfX0pO3JldHVybiBpLmV2ZW50fSxlLmZyb21Qcm9taXNlPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBwZSxuPSExO3JldHVybiBlLnRoZW4odm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBudWxsfSkpLnRoZW4oKGZ1bmN0aW9uKCl7bj90LmZpcmUodm9pZCAwKTpzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LmZpcmUodm9pZCAwKX0pLDApfSkpLG49ITAsdC5ldmVudH0sZS50b1Byb21pc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0KXtyZXR1cm4gbihlKSh0KX0pKX19KGxlfHwobGU9e30pKTshZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dm9pZCAwPT09dCYmKHQ9TWF0aC5yYW5kb20oKS50b1N0cmluZygxOCkuc2xpY2UoMiw1KSksdGhpcy5jdXN0b21UaHJlc2hvbGQ9ZSx0aGlzLm5hbWU9dCx0aGlzLl93YXJuQ291bnRkb3duPTB9ZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX3N0YWNrcyYmdGhpcy5fc3RhY2tzLmNsZWFyKCl9LGUucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj0tMTtpZigibnVtYmVyIj09dHlwZW9mIHRoaXMuY3VzdG9tVGhyZXNob2xkJiYobj10aGlzLmN1c3RvbVRocmVzaG9sZCksIShuPD0wfHxlPG4pKXt0aGlzLl9zdGFja3N8fCh0aGlzLl9zdGFja3M9bmV3IE1hcCk7dmFyIHI9KG5ldyBFcnJvcikuc3RhY2suc3BsaXQoIlxuIikuc2xpY2UoMykuam9pbigiXG4iKSxpPXRoaXMuX3N0YWNrcy5nZXQocil8fDA7aWYodGhpcy5fc3RhY2tzLnNldChyLGkrMSksdGhpcy5fd2FybkNvdW50ZG93bi09MSx0aGlzLl93YXJuQ291bnRkb3duPD0wKXt2YXIgbzt0aGlzLl93YXJuQ291bnRkb3duPS41Km47dmFyIHM9MDt0aGlzLl9zdGFja3MuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXsoIW98fHM8ZSkmJihvPXQscz1lKX0pKSxjb25zb2xlLndhcm4oIlsiK3RoaXMubmFtZSsiXSBwb3RlbnRpYWwgbGlzdGVuZXIgTEVBSyBkZXRlY3RlZCwgaGF2aW5nICIrZSsiIGxpc3RlbmVycyBhbHJlYWR5LiBNT1NUIGZyZXF1ZW50IGxpc3RlbmVyICgiK3MrIik6IiksY29uc29sZS53YXJuKG8pfXJldHVybiBmdW5jdGlvbigpe3ZhciBlPXQuX3N0YWNrcy5nZXQocil8fDA7dC5fc3RhY2tzLnNldChyLGUtMSl9fX19KCk7dmFyIGRlLG1lLHBlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9kaXNwb3NlZD0hMSx0aGlzLl9vcHRpb25zPWUsdGhpcy5fbGVha2FnZU1vbj12b2lkIDB9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZXZlbnQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9ldmVudHx8KHRoaXMuX2V2ZW50PWZ1bmN0aW9uKG4scixpKXt0Ll9saXN0ZW5lcnN8fCh0Ll9saXN0ZW5lcnM9bmV3IGZlKTt2YXIgbz10Ll9saXN0ZW5lcnMuaXNFbXB0eSgpO28mJnQuX29wdGlvbnMmJnQuX29wdGlvbnMub25GaXJzdExpc3RlbmVyQWRkJiZ0Ll9vcHRpb25zLm9uRmlyc3RMaXN0ZW5lckFkZCh0KTt2YXIgcyx1LGE9dC5fbGlzdGVuZXJzLnB1c2gocj9bbixyXTpuKTtyZXR1cm4gbyYmdC5fb3B0aW9ucyYmdC5fb3B0aW9ucy5vbkZpcnN0TGlzdGVuZXJEaWRBZGQmJnQuX29wdGlvbnMub25GaXJzdExpc3RlbmVyRGlkQWRkKHQpLHQuX29wdGlvbnMmJnQuX29wdGlvbnMub25MaXN0ZW5lckRpZEFkZCYmdC5fb3B0aW9ucy5vbkxpc3RlbmVyRGlkQWRkKHQsbixyKSx0Ll9sZWFrYWdlTW9uJiYocz10Ll9sZWFrYWdlTW9uLmNoZWNrKHQuX2xpc3RlbmVycy5zaXplKSksdT17ZGlzcG9zZTpmdW5jdGlvbigpeyhzJiZzKCksdS5kaXNwb3NlPWUuX25vb3AsdC5fZGlzcG9zZWQpfHwoYSgpLHQuX29wdGlvbnMmJnQuX29wdGlvbnMub25MYXN0TGlzdGVuZXJSZW1vdmUmJih0Ll9saXN0ZW5lcnMmJiF0Ll9saXN0ZW5lcnMuaXNFbXB0eSgpfHx0Ll9vcHRpb25zLm9uTGFzdExpc3RlbmVyUmVtb3ZlKHQpKSl9fSxBcnJheS5pc0FycmF5KGkpJiZpLnB1c2godSksdX0pLHRoaXMuX2V2ZW50fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmZpcmU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fbGlzdGVuZXJzKXt0aGlzLl9kZWxpdmVyeVF1ZXVlfHwodGhpcy5fZGVsaXZlcnlRdWV1ZT1uZXcgZmUpO2Zvcih2YXIgdD10aGlzLl9saXN0ZW5lcnMuaXRlcmF0b3IoKSxuPXQubmV4dCgpOyFuLmRvbmU7bj10Lm5leHQoKSl0aGlzLl9kZWxpdmVyeVF1ZXVlLnB1c2goW24udmFsdWUsZV0pO2Zvcig7dGhpcy5fZGVsaXZlcnlRdWV1ZS5zaXplPjA7KXt2YXIgcj10aGlzLl9kZWxpdmVyeVF1ZXVlLnNoaWZ0KCksbz1yWzBdLHM9clsxXTt0cnl7ImZ1bmN0aW9uIj09dHlwZW9mIG8/by5jYWxsKHZvaWQgMCxzKTpvWzBdLmNhbGwob1sxXSxzKX1jYXRjaChuKXtpKG4pfX19fSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fbGlzdGVuZXJzJiZ0aGlzLl9saXN0ZW5lcnMuY2xlYXIoKSx0aGlzLl9kZWxpdmVyeVF1ZXVlJiZ0aGlzLl9kZWxpdmVyeVF1ZXVlLmNsZWFyKCksdGhpcy5fbGVha2FnZU1vbiYmdGhpcy5fbGVha2FnZU1vbi5kaXNwb3NlKCksdGhpcy5fZGlzcG9zZWQ9ITB9LGUuX25vb3A9ZnVuY3Rpb24oKXt9LGV9KCksZ2U9KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG49ZS5jYWxsKHRoaXMsdCl8fHRoaXM7cmV0dXJuIG4uX2lzUGF1c2VkPTAsbi5fZXZlbnRRdWV1ZT1uZXcgZmUsbi5fbWVyZ2VGbj10JiZ0Lm1lcmdlLG59aGUodCxlKSx0LnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuX2lzUGF1c2VkKyt9LHQucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe2lmKDAhPT10aGlzLl9pc1BhdXNlZCYmMD09LS10aGlzLl9pc1BhdXNlZClpZih0aGlzLl9tZXJnZUZuKXt2YXIgdD10aGlzLl9ldmVudFF1ZXVlLnRvQXJyYXkoKTt0aGlzLl9ldmVudFF1ZXVlLmNsZWFyKCksZS5wcm90b3R5cGUuZmlyZS5jYWxsKHRoaXMsdGhpcy5fbWVyZ2VGbih0KSl9ZWxzZSBmb3IoOyF0aGlzLl9pc1BhdXNlZCYmMCE9PXRoaXMuX2V2ZW50UXVldWUuc2l6ZTspZS5wcm90b3R5cGUuZmlyZS5jYWxsKHRoaXMsdGhpcy5fZXZlbnRRdWV1ZS5zaGlmdCgpKX0sdC5wcm90b3R5cGUuZmlyZT1mdW5jdGlvbih0KXt0aGlzLl9saXN0ZW5lcnMmJigwIT09dGhpcy5faXNQYXVzZWQ/dGhpcy5fZXZlbnRRdWV1ZS5wdXNoKHQpOmUucHJvdG90eXBlLmZpcmUuY2FsbCh0aGlzLHQpKX19KHBlKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgZT10aGlzO3RoaXMuaGFzTGlzdGVuZXJzPSExLHRoaXMuZXZlbnRzPVtdLHRoaXMuZW1pdHRlcj1uZXcgcGUoe29uRmlyc3RMaXN0ZW5lckFkZDpmdW5jdGlvbigpe3JldHVybiBlLm9uRmlyc3RMaXN0ZW5lckFkZCgpfSxvbkxhc3RMaXN0ZW5lclJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBlLm9uTGFzdExpc3RlbmVyUmVtb3ZlKCl9fSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJldmVudCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVtaXR0ZXIuZXZlbnR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj17ZXZlbnQ6ZSxsaXN0ZW5lcjpudWxsfTt0aGlzLmV2ZW50cy5wdXNoKG4pLHRoaXMuaGFzTGlzdGVuZXJzJiZ0aGlzLmhvb2sobik7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybntkaXNwb3NlOmZ1bmN0aW9uKCl7ZSgpfX19KGZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcyxyPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiByP3Q6KHI9ITAsdD1lLmFwcGx5KG4sYXJndW1lbnRzKSl9fSgoZnVuY3Rpb24oKXt0Lmhhc0xpc3RlbmVycyYmdC51bmhvb2sobik7dmFyIGU9dC5ldmVudHMuaW5kZXhPZihuKTt0LmV2ZW50cy5zcGxpY2UoZSwxKX0pKSl9LGUucHJvdG90eXBlLm9uRmlyc3RMaXN0ZW5lckFkZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5oYXNMaXN0ZW5lcnM9ITAsdGhpcy5ldmVudHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIGUuaG9vayh0KX0pKX0sZS5wcm90b3R5cGUub25MYXN0TGlzdGVuZXJSZW1vdmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuaGFzTGlzdGVuZXJzPSExLHRoaXMuZXZlbnRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBlLnVuaG9vayh0KX0pKX0sZS5wcm90b3R5cGUuaG9vaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UubGlzdGVuZXI9ZS5ldmVudCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZW1pdHRlci5maXJlKGUpfSkpfSxlLnByb3RvdHlwZS51bmhvb2s9ZnVuY3Rpb24oZSl7ZS5saXN0ZW5lciYmZS5saXN0ZW5lci5kaXNwb3NlKCksZS5saXN0ZW5lcj1udWxsfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5lbWl0dGVyLmRpc3Bvc2UoKX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5idWZmZXJzPVtdfWUucHJvdG90eXBlLndyYXBFdmVudD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGUoKGZ1bmN0aW9uKGUpe3ZhciBpPXQuYnVmZmVyc1t0LmJ1ZmZlcnMubGVuZ3RoLTFdO2k/aS5wdXNoKChmdW5jdGlvbigpe3JldHVybiBuLmNhbGwocixlKX0pKTpuLmNhbGwocixlKX0pLHZvaWQgMCxpKX19LGUucHJvdG90eXBlLmJ1ZmZlckV2ZW50cz1mdW5jdGlvbihlKXt2YXIgdD1bXTt0aGlzLmJ1ZmZlcnMucHVzaCh0KTt2YXIgbj1lKCk7cmV0dXJuIHRoaXMuYnVmZmVycy5wb3AoKSx0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlKCl9KSksbn19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dmFyIGU9dGhpczt0aGlzLmxpc3RlbmluZz0hMSx0aGlzLmlucHV0RXZlbnQ9bGUuTm9uZSx0aGlzLmlucHV0RXZlbnRMaXN0ZW5lcj1sLk5vbmUsdGhpcy5lbWl0dGVyPW5ldyBwZSh7b25GaXJzdExpc3RlbmVyRGlkQWRkOmZ1bmN0aW9uKCl7ZS5saXN0ZW5pbmc9ITAsZS5pbnB1dEV2ZW50TGlzdGVuZXI9ZS5pbnB1dEV2ZW50KGUuZW1pdHRlci5maXJlLGUuZW1pdHRlcil9LG9uTGFzdExpc3RlbmVyUmVtb3ZlOmZ1bmN0aW9uKCl7ZS5saXN0ZW5pbmc9ITEsZS5pbnB1dEV2ZW50TGlzdGVuZXIuZGlzcG9zZSgpfX0pLHRoaXMuZXZlbnQ9dGhpcy5lbWl0dGVyLmV2ZW50fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaW5wdXQiLHtzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5pbnB1dEV2ZW50PWUsdGhpcy5saXN0ZW5pbmcmJih0aGlzLmlucHV0RXZlbnRMaXN0ZW5lci5kaXNwb3NlKCksdGhpcy5pbnB1dEV2ZW50TGlzdGVuZXI9ZSh0aGlzLmVtaXR0ZXIuZmlyZSx0aGlzLmVtaXR0ZXIpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dEV2ZW50TGlzdGVuZXIuZGlzcG9zZSgpLHRoaXMuZW1pdHRlci5kaXNwb3NlKCl9fSgpLE9iamVjdC5mcmVlemUoKGZ1bmN0aW9uKGUsdCl7dmFyIG49c2V0VGltZW91dChlLmJpbmQodCksMCk7cmV0dXJue2Rpc3Bvc2U6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQobil9fX0pKSk7KG1lPWRlfHwoZGU9e30pKS5pc0NhbmNlbGxhdGlvblRva2VuPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09bWUuTm9uZXx8ZT09PW1lLkNhbmNlbGxlZHx8ZSBpbnN0YW5jZW9mIHZlfHwhKCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpJiYiYm9vbGVhbiI9PXR5cGVvZiBlLmlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5vbkNhbmNlbGxhdGlvblJlcXVlc3RlZH0sbWUuTm9uZT1PYmplY3QuZnJlZXplKHtpc0NhbmNlbGxhdGlvblJlcXVlc3RlZDohMSxvbkNhbmNlbGxhdGlvblJlcXVlc3RlZDpsZS5Ob25lfSksbWUuQ2FuY2VsbGVkPU9iamVjdC5mcmVlemUoe2lzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkOiEwLG9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkOmdlfSk7dmFyIF9lLHZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2lzQ2FuY2VsbGVkPSExLHRoaXMuX2VtaXR0ZXI9bnVsbH1yZXR1cm4gZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5faXNDYW5jZWxsZWR8fCh0aGlzLl9pc0NhbmNlbGxlZD0hMCx0aGlzLl9lbWl0dGVyJiYodGhpcy5fZW1pdHRlci5maXJlKHZvaWQgMCksdGhpcy5kaXNwb3NlKCkpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc0NhbmNlbGxhdGlvblJlcXVlc3RlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NhbmNlbGxlZH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQ2FuY2VsbGVkP2dlOih0aGlzLl9lbWl0dGVyfHwodGhpcy5fZW1pdHRlcj1uZXcgcGUpLHRoaXMuX2VtaXR0ZXIuZXZlbnQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9lbWl0dGVyJiYodGhpcy5fZW1pdHRlci5kaXNwb3NlKCksdGhpcy5fZW1pdHRlcj1udWxsKX0sZX0oKSx5ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fdG9rZW49dm9pZCAwLHRoaXMuX3BhcmVudExpc3RlbmVyPXZvaWQgMCx0aGlzLl9wYXJlbnRMaXN0ZW5lcj1lJiZlLm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKHRoaXMuY2FuY2VsLHRoaXMpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInRva2VuIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Rva2VufHwodGhpcy5fdG9rZW49bmV3IHZlKSx0aGlzLl90b2tlbn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLl90b2tlbj90aGlzLl90b2tlbiBpbnN0YW5jZW9mIHZlJiZ0aGlzLl90b2tlbi5jYW5jZWwoKTp0aGlzLl90b2tlbj1kZS5DYW5jZWxsZWR9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9wYXJlbnRMaXN0ZW5lciYmdGhpcy5fcGFyZW50TGlzdGVuZXIuZGlzcG9zZSgpLHRoaXMuX3Rva2VuP3RoaXMuX3Rva2VuIGluc3RhbmNlb2YgdmUmJnRoaXMuX3Rva2VuLmRpc3Bvc2UoKTp0aGlzLl90b2tlbj1kZS5Ob25lfSxlfSgpLENlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2tleUNvZGVUb1N0cj1bXSx0aGlzLl9zdHJUb0tleUNvZGU9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuZGVmaW5lPWZ1bmN0aW9uKGUsdCl7dGhpcy5fa2V5Q29kZVRvU3RyW2VdPXQsdGhpcy5fc3RyVG9LZXlDb2RlW3QudG9Mb3dlckNhc2UoKV09ZX0sZS5wcm90b3R5cGUua2V5Q29kZVRvU3RyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9rZXlDb2RlVG9TdHJbZV19LGUucHJvdG90eXBlLnN0clRvS2V5Q29kZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc3RyVG9LZXlDb2RlW2UudG9Mb3dlckNhc2UoKV18fDB9LGV9KCksYmU9bmV3IENlLExlPW5ldyBDZSxOZT1uZXcgQ2U7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixyKXt2b2lkIDA9PT1uJiYobj10KSx2b2lkIDA9PT1yJiYocj1uKSxiZS5kZWZpbmUoZSx0KSxMZS5kZWZpbmUoZSxuKSxOZS5kZWZpbmUoZSxyKX1lKDAsInVua25vd24iKSxlKDEsIkJhY2tzcGFjZSIpLGUoMiwiVGFiIiksZSgzLCJFbnRlciIpLGUoNCwiU2hpZnQiKSxlKDUsIkN0cmwiKSxlKDYsIkFsdCIpLGUoNywiUGF1c2VCcmVhayIpLGUoOCwiQ2Fwc0xvY2siKSxlKDksIkVzY2FwZSIpLGUoMTAsIlNwYWNlIiksZSgxMSwiUGFnZVVwIiksZSgxMiwiUGFnZURvd24iKSxlKDEzLCJFbmQiKSxlKDE0LCJIb21lIiksZSgxNSwiTGVmdEFycm93IiwiTGVmdCIpLGUoMTYsIlVwQXJyb3ciLCJVcCIpLGUoMTcsIlJpZ2h0QXJyb3ciLCJSaWdodCIpLGUoMTgsIkRvd25BcnJvdyIsIkRvd24iKSxlKDE5LCJJbnNlcnQiKSxlKDIwLCJEZWxldGUiKSxlKDIxLCIwIiksZSgyMiwiMSIpLGUoMjMsIjIiKSxlKDI0LCIzIiksZSgyNSwiNCIpLGUoMjYsIjUiKSxlKDI3LCI2IiksZSgyOCwiNyIpLGUoMjksIjgiKSxlKDMwLCI5IiksZSgzMSwiQSIpLGUoMzIsIkIiKSxlKDMzLCJDIiksZSgzNCwiRCIpLGUoMzUsIkUiKSxlKDM2LCJGIiksZSgzNywiRyIpLGUoMzgsIkgiKSxlKDM5LCJJIiksZSg0MCwiSiIpLGUoNDEsIksiKSxlKDQyLCJMIiksZSg0MywiTSIpLGUoNDQsIk4iKSxlKDQ1LCJPIiksZSg0NiwiUCIpLGUoNDcsIlEiKSxlKDQ4LCJSIiksZSg0OSwiUyIpLGUoNTAsIlQiKSxlKDUxLCJVIiksZSg1MiwiViIpLGUoNTMsIlciKSxlKDU0LCJYIiksZSg1NSwiWSIpLGUoNTYsIloiKSxlKDU3LCJNZXRhIiksZSg1OCwiQ29udGV4dE1lbnUiKSxlKDU5LCJGMSIpLGUoNjAsIkYyIiksZSg2MSwiRjMiKSxlKDYyLCJGNCIpLGUoNjMsIkY1IiksZSg2NCwiRjYiKSxlKDY1LCJGNyIpLGUoNjYsIkY4IiksZSg2NywiRjkiKSxlKDY4LCJGMTAiKSxlKDY5LCJGMTEiKSxlKDcwLCJGMTIiKSxlKDcxLCJGMTMiKSxlKDcyLCJGMTQiKSxlKDczLCJGMTUiKSxlKDc0LCJGMTYiKSxlKDc1LCJGMTciKSxlKDc2LCJGMTgiKSxlKDc3LCJGMTkiKSxlKDc4LCJOdW1Mb2NrIiksZSg3OSwiU2Nyb2xsTG9jayIpLGUoODAsIjsiLCI7IiwiT0VNXzEiKSxlKDgxLCI9IiwiPSIsIk9FTV9QTFVTIiksZSg4MiwiLCIsIiwiLCJPRU1fQ09NTUEiKSxlKDgzLCItIiwiLSIsIk9FTV9NSU5VUyIpLGUoODQsIi4iLCIuIiwiT0VNX1BFUklPRCIpLGUoODUsIi8iLCIvIiwiT0VNXzIiKSxlKDg2LCJgIiwiYCIsIk9FTV8zIiksZSgxMTAsIkFCTlRfQzEiKSxlKDExMSwiQUJOVF9DMiIpLGUoODcsIlsiLCJbIiwiT0VNXzQiKSxlKDg4LCJcXCIsIlxcIiwiT0VNXzUiKSxlKDg5LCJdIiwiXSIsIk9FTV82IiksZSg5MCwiJyIsIiciLCJPRU1fNyIpLGUoOTEsIk9FTV84IiksZSg5MiwiT0VNXzEwMiIpLGUoOTMsIk51bVBhZDAiKSxlKDk0LCJOdW1QYWQxIiksZSg5NSwiTnVtUGFkMiIpLGUoOTYsIk51bVBhZDMiKSxlKDk3LCJOdW1QYWQ0IiksZSg5OCwiTnVtUGFkNSIpLGUoOTksIk51bVBhZDYiKSxlKDEwMCwiTnVtUGFkNyIpLGUoMTAxLCJOdW1QYWQ4IiksZSgxMDIsIk51bVBhZDkiKSxlKDEwMywiTnVtUGFkX011bHRpcGx5IiksZSgxMDQsIk51bVBhZF9BZGQiKSxlKDEwNSwiTnVtUGFkX1NlcGFyYXRvciIpLGUoMTA2LCJOdW1QYWRfU3VidHJhY3QiKSxlKDEwNywiTnVtUGFkX0RlY2ltYWwiKSxlKDEwOCwiTnVtUGFkX0RpdmlkZSIpfSgpLGZ1bmN0aW9uKGUpe2UudG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIGJlLmtleUNvZGVUb1N0cihlKX0sZS5mcm9tU3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiBiZS5zdHJUb0tleUNvZGUoZSl9LGUudG9Vc2VyU2V0dGluZ3NVUz1mdW5jdGlvbihlKXtyZXR1cm4gTGUua2V5Q29kZVRvU3RyKGUpfSxlLnRvVXNlclNldHRpbmdzR2VuZXJhbD1mdW5jdGlvbihlKXtyZXR1cm4gTmUua2V5Q29kZVRvU3RyKGUpfSxlLmZyb21Vc2VyU2V0dGluZ3M9ZnVuY3Rpb24oZSl7cmV0dXJuIExlLnN0clRvS2V5Q29kZShlKXx8TmUuc3RyVG9LZXlDb2RlKGUpfX0oX2V8fChfZT17fSkpOyFmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4scixpKXt0aGlzLmN0cmxLZXk9ZSx0aGlzLnNoaWZ0S2V5PXQsdGhpcy5hbHRLZXk9bix0aGlzLm1ldGFLZXk9cix0aGlzLmtleUNvZGU9aX1lLnByb3RvdHlwZS5lcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3RybEtleT09PWUuY3RybEtleSYmdGhpcy5zaGlmdEtleT09PWUuc2hpZnRLZXkmJnRoaXMuYWx0S2V5PT09ZS5hbHRLZXkmJnRoaXMubWV0YUtleT09PWUubWV0YUtleSYmdGhpcy5rZXlDb2RlPT09ZS5rZXlDb2RlfSxlLnByb3RvdHlwZS5pc01vZGlmaWVyS2V5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmtleUNvZGV8fDU9PT10aGlzLmtleUNvZGV8fDU3PT09dGhpcy5rZXlDb2RlfHw2PT09dGhpcy5rZXlDb2RlfHw0PT09dGhpcy5rZXlDb2RlfSxlLnByb3RvdHlwZS50b0Nob3JkPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyAkZShbdGhpc10pfSxlLnByb3RvdHlwZS5pc0R1cGxpY2F0ZU1vZGlmaWVyQ2FzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN0cmxLZXkmJjU9PT10aGlzLmtleUNvZGV8fHRoaXMuc2hpZnRLZXkmJjQ9PT10aGlzLmtleUNvZGV8fHRoaXMuYWx0S2V5JiY2PT09dGhpcy5rZXlDb2RlfHx0aGlzLm1ldGFLZXkmJjU3PT09dGhpcy5rZXlDb2RlfX0oKTt2YXIgRWUsU2Usd2UsQWUsVGUsTWUsUGUsT2UseGUsSWUsUmUsa2UsVWUsRmUsRGUsS2UscWUsVmUsamUsQmUsWWUsV2UsSGUsR2UsUWUsemUsWGUsJGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2lmKDA9PT1lLmxlbmd0aCl0aHJvdyh0PSJwYXJ0cyIpP25ldyBFcnJvcigiSWxsZWdhbCBhcmd1bWVudDogIit0KTpuZXcgRXJyb3IoIklsbGVnYWwgYXJndW1lbnQiKTt2YXIgdDt0aGlzLnBhcnRzPWV9cmV0dXJuIGUucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihlKXtpZihudWxsPT09ZSlyZXR1cm4hMTtpZih0aGlzLnBhcnRzLmxlbmd0aCE9PWUucGFydHMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgdD0wO3Q8dGhpcy5wYXJ0cy5sZW5ndGg7dCsrKWlmKCF0aGlzLnBhcnRzW3RdLmVxdWFscyhlLnBhcnRzW3RdKSlyZXR1cm4hMTtyZXR1cm4hMH0sZX0oKSxKZT1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKHQsbil7cmV0dXJuKGU9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09dFtuXSl9KSh0LG4pfTtyZXR1cm4gZnVuY3Rpb24odCxuKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWUodCxuKSx0LnByb3RvdHlwZT1udWxsPT09bj9PYmplY3QuY3JlYXRlKG4pOihyLnByb3RvdHlwZT1uLnByb3RvdHlwZSxuZXcgcil9fSgpLFplPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuLHIsaSl7dmFyIG89ZS5jYWxsKHRoaXMsdCxuLHIsaSl8fHRoaXM7cmV0dXJuIG8uc2VsZWN0aW9uU3RhcnRMaW5lTnVtYmVyPXQsby5zZWxlY3Rpb25TdGFydENvbHVtbj1uLG8ucG9zaXRpb25MaW5lTnVtYmVyPXIsby5wb3NpdGlvbkNvbHVtbj1pLG99cmV0dXJuIEplKHQsZSksdC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHQodGhpcy5zZWxlY3Rpb25TdGFydExpbmVOdW1iZXIsdGhpcy5zZWxlY3Rpb25TdGFydENvbHVtbix0aGlzLnBvc2l0aW9uTGluZU51bWJlcix0aGlzLnBvc2l0aW9uQ29sdW1uKX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iWyIrdGhpcy5zZWxlY3Rpb25TdGFydExpbmVOdW1iZXIrIiwiK3RoaXMuc2VsZWN0aW9uU3RhcnRDb2x1bW4rIiAtPiAiK3RoaXMucG9zaXRpb25MaW5lTnVtYmVyKyIsIit0aGlzLnBvc2l0aW9uQ29sdW1uKyJdIn0sdC5wcm90b3R5cGUuZXF1YWxzU2VsZWN0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0LnNlbGVjdGlvbnNFcXVhbCh0aGlzLGUpfSx0LnNlbGVjdGlvbnNFcXVhbD1mdW5jdGlvbihlLHQpe3JldHVybiBlLnNlbGVjdGlvblN0YXJ0TGluZU51bWJlcj09PXQuc2VsZWN0aW9uU3RhcnRMaW5lTnVtYmVyJiZlLnNlbGVjdGlvblN0YXJ0Q29sdW1uPT09dC5zZWxlY3Rpb25TdGFydENvbHVtbiYmZS5wb3NpdGlvbkxpbmVOdW1iZXI9PT10LnBvc2l0aW9uTGluZU51bWJlciYmZS5wb3NpdGlvbkNvbHVtbj09PXQucG9zaXRpb25Db2x1bW59LHQucHJvdG90eXBlLmdldERpcmVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvblN0YXJ0TGluZU51bWJlcj09PXRoaXMuc3RhcnRMaW5lTnVtYmVyJiZ0aGlzLnNlbGVjdGlvblN0YXJ0Q29sdW1uPT09dGhpcy5zdGFydENvbHVtbj8wOjF9LHQucHJvdG90eXBlLnNldEVuZFBvc2l0aW9uPWZ1bmN0aW9uKGUsbil7cmV0dXJuIDA9PT10aGlzLmdldERpcmVjdGlvbigpP25ldyB0KHRoaXMuc3RhcnRMaW5lTnVtYmVyLHRoaXMuc3RhcnRDb2x1bW4sZSxuKTpuZXcgdChlLG4sdGhpcy5zdGFydExpbmVOdW1iZXIsdGhpcy5zdGFydENvbHVtbil9LHQucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBqKHRoaXMucG9zaXRpb25MaW5lTnVtYmVyLHRoaXMucG9zaXRpb25Db2x1bW4pfSx0LnByb3RvdHlwZS5zZXRTdGFydFBvc2l0aW9uPWZ1bmN0aW9uKGUsbil7cmV0dXJuIDA9PT10aGlzLmdldERpcmVjdGlvbigpP25ldyB0KGUsbix0aGlzLmVuZExpbmVOdW1iZXIsdGhpcy5lbmRDb2x1bW4pOm5ldyB0KHRoaXMuZW5kTGluZU51bWJlcix0aGlzLmVuZENvbHVtbixlLG4pfSx0LmZyb21Qb3NpdGlvbnM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49ZSksbmV3IHQoZS5saW5lTnVtYmVyLGUuY29sdW1uLG4ubGluZU51bWJlcixuLmNvbHVtbil9LHQubGlmdFNlbGVjdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZS5zZWxlY3Rpb25TdGFydExpbmVOdW1iZXIsZS5zZWxlY3Rpb25TdGFydENvbHVtbixlLnBvc2l0aW9uTGluZU51bWJlcixlLnBvc2l0aW9uQ29sdW1uKX0sdC5zZWxlY3Rpb25zQXJyRXF1YWw9ZnVuY3Rpb24oZSx0KXtpZihlJiYhdHx8IWUmJnQpcmV0dXJuITE7aWYoIWUmJiF0KXJldHVybiEwO2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKWlmKCF0aGlzLnNlbGVjdGlvbnNFcXVhbChlW25dLHRbbl0pKXJldHVybiExO3JldHVybiEwfSx0LmlzSVNlbGVjdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmIm51bWJlciI9PXR5cGVvZiBlLnNlbGVjdGlvblN0YXJ0TGluZU51bWJlciYmIm51bWJlciI9PXR5cGVvZiBlLnNlbGVjdGlvblN0YXJ0Q29sdW1uJiYibnVtYmVyIj09dHlwZW9mIGUucG9zaXRpb25MaW5lTnVtYmVyJiYibnVtYmVyIj09dHlwZW9mIGUucG9zaXRpb25Db2x1bW59LHQuY3JlYXRlV2l0aERpcmVjdGlvbj1mdW5jdGlvbihlLG4scixpLG8pe3JldHVybiAwPT09bz9uZXcgdChlLG4scixpKTpuZXcgdChyLGksZSxuKX0sdH0oQiksZXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLm9mZnNldD0wfGUsdGhpcy50eXBlPXQsdGhpcy5sYW5ndWFnZT1ufXJldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIoIit0aGlzLm9mZnNldCsiLCAiK3RoaXMudHlwZSsiKSJ9LGV9KCk7IWZ1bmN0aW9uKGUpe2VbZS5Vbm5lY2Vzc2FyeT0xXT0iVW5uZWNlc3NhcnkifShFZXx8KEVlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkhpbnQ9MV09IkhpbnQiLGVbZS5JbmZvPTJdPSJJbmZvIixlW2UuV2FybmluZz00XT0iV2FybmluZyIsZVtlLkVycm9yPThdPSJFcnJvciJ9KFNlfHwoU2U9e30pKSxmdW5jdGlvbihlKXtlW2UuVW5rbm93bj0wXT0iVW5rbm93biIsZVtlLkJhY2tzcGFjZT0xXT0iQmFja3NwYWNlIixlW2UuVGFiPTJdPSJUYWIiLGVbZS5FbnRlcj0zXT0iRW50ZXIiLGVbZS5TaGlmdD00XT0iU2hpZnQiLGVbZS5DdHJsPTVdPSJDdHJsIixlW2UuQWx0PTZdPSJBbHQiLGVbZS5QYXVzZUJyZWFrPTddPSJQYXVzZUJyZWFrIixlW2UuQ2Fwc0xvY2s9OF09IkNhcHNMb2NrIixlW2UuRXNjYXBlPTldPSJFc2NhcGUiLGVbZS5TcGFjZT0xMF09IlNwYWNlIixlW2UuUGFnZVVwPTExXT0iUGFnZVVwIixlW2UuUGFnZURvd249MTJdPSJQYWdlRG93biIsZVtlLkVuZD0xM109IkVuZCIsZVtlLkhvbWU9MTRdPSJIb21lIixlW2UuTGVmdEFycm93PTE1XT0iTGVmdEFycm93IixlW2UuVXBBcnJvdz0xNl09IlVwQXJyb3ciLGVbZS5SaWdodEFycm93PTE3XT0iUmlnaHRBcnJvdyIsZVtlLkRvd25BcnJvdz0xOF09IkRvd25BcnJvdyIsZVtlLkluc2VydD0xOV09Ikluc2VydCIsZVtlLkRlbGV0ZT0yMF09IkRlbGV0ZSIsZVtlLktFWV8wPTIxXT0iS0VZXzAiLGVbZS5LRVlfMT0yMl09IktFWV8xIixlW2UuS0VZXzI9MjNdPSJLRVlfMiIsZVtlLktFWV8zPTI0XT0iS0VZXzMiLGVbZS5LRVlfND0yNV09IktFWV80IixlW2UuS0VZXzU9MjZdPSJLRVlfNSIsZVtlLktFWV82PTI3XT0iS0VZXzYiLGVbZS5LRVlfNz0yOF09IktFWV83IixlW2UuS0VZXzg9MjldPSJLRVlfOCIsZVtlLktFWV85PTMwXT0iS0VZXzkiLGVbZS5LRVlfQT0zMV09IktFWV9BIixlW2UuS0VZX0I9MzJdPSJLRVlfQiIsZVtlLktFWV9DPTMzXT0iS0VZX0MiLGVbZS5LRVlfRD0zNF09IktFWV9EIixlW2UuS0VZX0U9MzVdPSJLRVlfRSIsZVtlLktFWV9GPTM2XT0iS0VZX0YiLGVbZS5LRVlfRz0zN109IktFWV9HIixlW2UuS0VZX0g9MzhdPSJLRVlfSCIsZVtlLktFWV9JPTM5XT0iS0VZX0kiLGVbZS5LRVlfSj00MF09IktFWV9KIixlW2UuS0VZX0s9NDFdPSJLRVlfSyIsZVtlLktFWV9MPTQyXT0iS0VZX0wiLGVbZS5LRVlfTT00M109IktFWV9NIixlW2UuS0VZX049NDRdPSJLRVlfTiIsZVtlLktFWV9PPTQ1XT0iS0VZX08iLGVbZS5LRVlfUD00Nl09IktFWV9QIixlW2UuS0VZX1E9NDddPSJLRVlfUSIsZVtlLktFWV9SPTQ4XT0iS0VZX1IiLGVbZS5LRVlfUz00OV09IktFWV9TIixlW2UuS0VZX1Q9NTBdPSJLRVlfVCIsZVtlLktFWV9VPTUxXT0iS0VZX1UiLGVbZS5LRVlfVj01Ml09IktFWV9WIixlW2UuS0VZX1c9NTNdPSJLRVlfVyIsZVtlLktFWV9YPTU0XT0iS0VZX1giLGVbZS5LRVlfWT01NV09IktFWV9ZIixlW2UuS0VZX1o9NTZdPSJLRVlfWiIsZVtlLk1ldGE9NTddPSJNZXRhIixlW2UuQ29udGV4dE1lbnU9NThdPSJDb250ZXh0TWVudSIsZVtlLkYxPTU5XT0iRjEiLGVbZS5GMj02MF09IkYyIixlW2UuRjM9NjFdPSJGMyIsZVtlLkY0PTYyXT0iRjQiLGVbZS5GNT02M109IkY1IixlW2UuRjY9NjRdPSJGNiIsZVtlLkY3PTY1XT0iRjciLGVbZS5GOD02Nl09IkY4IixlW2UuRjk9NjddPSJGOSIsZVtlLkYxMD02OF09IkYxMCIsZVtlLkYxMT02OV09IkYxMSIsZVtlLkYxMj03MF09IkYxMiIsZVtlLkYxMz03MV09IkYxMyIsZVtlLkYxND03Ml09IkYxNCIsZVtlLkYxNT03M109IkYxNSIsZVtlLkYxNj03NF09IkYxNiIsZVtlLkYxNz03NV09IkYxNyIsZVtlLkYxOD03Nl09IkYxOCIsZVtlLkYxOT03N109IkYxOSIsZVtlLk51bUxvY2s9NzhdPSJOdW1Mb2NrIixlW2UuU2Nyb2xsTG9jaz03OV09IlNjcm9sbExvY2siLGVbZS5VU19TRU1JQ09MT049ODBdPSJVU19TRU1JQ09MT04iLGVbZS5VU19FUVVBTD04MV09IlVTX0VRVUFMIixlW2UuVVNfQ09NTUE9ODJdPSJVU19DT01NQSIsZVtlLlVTX01JTlVTPTgzXT0iVVNfTUlOVVMiLGVbZS5VU19ET1Q9ODRdPSJVU19ET1QiLGVbZS5VU19TTEFTSD04NV09IlVTX1NMQVNIIixlW2UuVVNfQkFDS1RJQ0s9ODZdPSJVU19CQUNLVElDSyIsZVtlLlVTX09QRU5fU1FVQVJFX0JSQUNLRVQ9ODddPSJVU19PUEVOX1NRVUFSRV9CUkFDS0VUIixlW2UuVVNfQkFDS1NMQVNIPTg4XT0iVVNfQkFDS1NMQVNIIixlW2UuVVNfQ0xPU0VfU1FVQVJFX0JSQUNLRVQ9ODldPSJVU19DTE9TRV9TUVVBUkVfQlJBQ0tFVCIsZVtlLlVTX1FVT1RFPTkwXT0iVVNfUVVPVEUiLGVbZS5PRU1fOD05MV09Ik9FTV84IixlW2UuT0VNXzEwMj05Ml09Ik9FTV8xMDIiLGVbZS5OVU1QQURfMD05M109Ik5VTVBBRF8wIixlW2UuTlVNUEFEXzE9OTRdPSJOVU1QQURfMSIsZVtlLk5VTVBBRF8yPTk1XT0iTlVNUEFEXzIiLGVbZS5OVU1QQURfMz05Nl09Ik5VTVBBRF8zIixlW2UuTlVNUEFEXzQ9OTddPSJOVU1QQURfNCIsZVtlLk5VTVBBRF81PTk4XT0iTlVNUEFEXzUiLGVbZS5OVU1QQURfNj05OV09Ik5VTVBBRF82IixlW2UuTlVNUEFEXzc9MTAwXT0iTlVNUEFEXzciLGVbZS5OVU1QQURfOD0xMDFdPSJOVU1QQURfOCIsZVtlLk5VTVBBRF85PTEwMl09Ik5VTVBBRF85IixlW2UuTlVNUEFEX01VTFRJUExZPTEwM109Ik5VTVBBRF9NVUxUSVBMWSIsZVtlLk5VTVBBRF9BREQ9MTA0XT0iTlVNUEFEX0FERCIsZVtlLk5VTVBBRF9TRVBBUkFUT1I9MTA1XT0iTlVNUEFEX1NFUEFSQVRPUiIsZVtlLk5VTVBBRF9TVUJUUkFDVD0xMDZdPSJOVU1QQURfU1VCVFJBQ1QiLGVbZS5OVU1QQURfREVDSU1BTD0xMDddPSJOVU1QQURfREVDSU1BTCIsZVtlLk5VTVBBRF9ESVZJREU9MTA4XT0iTlVNUEFEX0RJVklERSIsZVtlLktFWV9JTl9DT01QT1NJVElPTj0xMDldPSJLRVlfSU5fQ09NUE9TSVRJT04iLGVbZS5BQk5UX0MxPTExMF09IkFCTlRfQzEiLGVbZS5BQk5UX0MyPTExMV09IkFCTlRfQzIiLGVbZS5NQVhfVkFMVUU9MTEyXT0iTUFYX1ZBTFVFIn0od2V8fCh3ZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5MVFI9MF09IkxUUiIsZVtlLlJUTD0xXT0iUlRMIn0oQWV8fChBZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5BdXRvPTFdPSJBdXRvIixlW2UuSGlkZGVuPTJdPSJIaWRkZW4iLGVbZS5WaXNpYmxlPTNdPSJWaXNpYmxlIn0oVGV8fChUZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5MZWZ0PTFdPSJMZWZ0IixlW2UuQ2VudGVyPTJdPSJDZW50ZXIiLGVbZS5SaWdodD00XT0iUmlnaHQiLGVbZS5GdWxsPTddPSJGdWxsIn0oTWV8fChNZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5UZXh0RGVmaW5lZD0wXT0iVGV4dERlZmluZWQiLGVbZS5MRj0xXT0iTEYiLGVbZS5DUkxGPTJdPSJDUkxGIn0oUGV8fChQZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5MRj0xXT0iTEYiLGVbZS5DUkxGPTJdPSJDUkxGIn0oT2V8fChPZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5MRj0wXT0iTEYiLGVbZS5DUkxGPTFdPSJDUkxGIn0oeGV8fCh4ZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5BbHdheXNHcm93c1doZW5UeXBpbmdBdEVkZ2VzPTBdPSJBbHdheXNHcm93c1doZW5UeXBpbmdBdEVkZ2VzIixlW2UuTmV2ZXJHcm93c1doZW5UeXBpbmdBdEVkZ2VzPTFdPSJOZXZlckdyb3dzV2hlblR5cGluZ0F0RWRnZXMiLGVbZS5Hcm93c09ubHlXaGVuVHlwaW5nQmVmb3JlPTJdPSJHcm93c09ubHlXaGVuVHlwaW5nQmVmb3JlIixlW2UuR3Jvd3NPbmx5V2hlblR5cGluZ0FmdGVyPTNdPSJHcm93c09ubHlXaGVuVHlwaW5nQWZ0ZXIifShJZXx8KEllPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlNtb290aD0wXT0iU21vb3RoIixlW2UuSW1tZWRpYXRlPTFdPSJJbW1lZGlhdGUifShSZXx8KFJlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk5vdFNldD0wXT0iTm90U2V0IixlW2UuQ29udGVudEZsdXNoPTFdPSJDb250ZW50Rmx1c2giLGVbZS5SZWNvdmVyRnJvbU1hcmtlcnM9Ml09IlJlY292ZXJGcm9tTWFya2VycyIsZVtlLkV4cGxpY2l0PTNdPSJFeHBsaWNpdCIsZVtlLlBhc3RlPTRdPSJQYXN0ZSIsZVtlLlVuZG89NV09IlVuZG8iLGVbZS5SZWRvPTZdPSJSZWRvIn0oa2V8fChrZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Ob25lPTBdPSJOb25lIixlW2UuU21hbGw9MV09IlNtYWxsIixlW2UuTGFyZ2U9Ml09IkxhcmdlIixlW2UuU21hbGxCbG9ja3M9M109IlNtYWxsQmxvY2tzIixlW2UuTGFyZ2VCbG9ja3M9NF09IkxhcmdlQmxvY2tzIn0oVWV8fChVZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Ob25lPTBdPSJOb25lIixlW2UuU2FtZT0xXT0iU2FtZSIsZVtlLkluZGVudD0yXT0iSW5kZW50IixlW2UuRGVlcEluZGVudD0zXT0iRGVlcEluZGVudCJ9KEZlfHwoRmU9e30pKSxmdW5jdGlvbihlKXtlW2UuSGlkZGVuPTBdPSJIaWRkZW4iLGVbZS5CbGluaz0xXT0iQmxpbmsiLGVbZS5TbW9vdGg9Ml09IlNtb290aCIsZVtlLlBoYXNlPTNdPSJQaGFzZSIsZVtlLkV4cGFuZD00XT0iRXhwYW5kIixlW2UuU29saWQ9NV09IlNvbGlkIn0oRGV8fChEZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5MaW5lPTFdPSJMaW5lIixlW2UuQmxvY2s9Ml09IkJsb2NrIixlW2UuVW5kZXJsaW5lPTNdPSJVbmRlcmxpbmUiLGVbZS5MaW5lVGhpbj00XT0iTGluZVRoaW4iLGVbZS5CbG9ja091dGxpbmU9NV09IkJsb2NrT3V0bGluZSIsZVtlLlVuZGVybGluZVRoaW49Nl09IlVuZGVybGluZVRoaW4ifShLZXx8KEtlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk9mZj0wXT0iT2ZmIixlW2UuT249MV09Ik9uIixlW2UuUmVsYXRpdmU9Ml09IlJlbGF0aXZlIixlW2UuSW50ZXJ2YWw9M109IkludGVydmFsIixlW2UuQ3VzdG9tPTRdPSJDdXN0b20ifShxZXx8KHFlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkVYQUNUPTBdPSJFWEFDVCIsZVtlLkFCT1ZFPTFdPSJBQk9WRSIsZVtlLkJFTE9XPTJdPSJCRUxPVyJ9KFZlfHwoVmU9e30pKSxmdW5jdGlvbihlKXtlW2UuVE9QX1JJR0hUX0NPUk5FUj0wXT0iVE9QX1JJR0hUX0NPUk5FUiIsZVtlLkJPVFRPTV9SSUdIVF9DT1JORVI9MV09IkJPVFRPTV9SSUdIVF9DT1JORVIiLGVbZS5UT1BfQ0VOVEVSPTJdPSJUT1BfQ0VOVEVSIn0oamV8fChqZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5VTktOT1dOPTBdPSJVTktOT1dOIixlW2UuVEVYVEFSRUE9MV09IlRFWFRBUkVBIixlW2UuR1VUVEVSX0dMWVBIX01BUkdJTj0yXT0iR1VUVEVSX0dMWVBIX01BUkdJTiIsZVtlLkdVVFRFUl9MSU5FX05VTUJFUlM9M109IkdVVFRFUl9MSU5FX05VTUJFUlMiLGVbZS5HVVRURVJfTElORV9ERUNPUkFUSU9OUz00XT0iR1VUVEVSX0xJTkVfREVDT1JBVElPTlMiLGVbZS5HVVRURVJfVklFV19aT05FPTVdPSJHVVRURVJfVklFV19aT05FIixlW2UuQ09OVEVOVF9URVhUPTZdPSJDT05URU5UX1RFWFQiLGVbZS5DT05URU5UX0VNUFRZPTddPSJDT05URU5UX0VNUFRZIixlW2UuQ09OVEVOVF9WSUVXX1pPTkU9OF09IkNPTlRFTlRfVklFV19aT05FIixlW2UuQ09OVEVOVF9XSURHRVQ9OV09IkNPTlRFTlRfV0lER0VUIixlW2UuT1ZFUlZJRVdfUlVMRVI9MTBdPSJPVkVSVklFV19SVUxFUiIsZVtlLlNDUk9MTEJBUj0xMV09IlNDUk9MTEJBUiIsZVtlLk9WRVJMQVlfV0lER0VUPTEyXT0iT1ZFUkxBWV9XSURHRVQiLGVbZS5PVVRTSURFX0VESVRPUj0xM109Ik9VVFNJREVfRURJVE9SIn0oQmV8fChCZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Ob25lPTBdPSJOb25lIixlW2UuSW5kZW50PTFdPSJJbmRlbnQiLGVbZS5JbmRlbnRPdXRkZW50PTJdPSJJbmRlbnRPdXRkZW50IixlW2UuT3V0ZGVudD0zXT0iT3V0ZGVudCJ9KFllfHwoWWU9e30pKSxmdW5jdGlvbihlKXtlW2UuTWV0aG9kPTBdPSJNZXRob2QiLGVbZS5GdW5jdGlvbj0xXT0iRnVuY3Rpb24iLGVbZS5Db25zdHJ1Y3Rvcj0yXT0iQ29uc3RydWN0b3IiLGVbZS5GaWVsZD0zXT0iRmllbGQiLGVbZS5WYXJpYWJsZT00XT0iVmFyaWFibGUiLGVbZS5DbGFzcz01XT0iQ2xhc3MiLGVbZS5TdHJ1Y3Q9Nl09IlN0cnVjdCIsZVtlLkludGVyZmFjZT03XT0iSW50ZXJmYWNlIixlW2UuTW9kdWxlPThdPSJNb2R1bGUiLGVbZS5Qcm9wZXJ0eT05XT0iUHJvcGVydHkiLGVbZS5FdmVudD0xMF09IkV2ZW50IixlW2UuT3BlcmF0b3I9MTFdPSJPcGVyYXRvciIsZVtlLlVuaXQ9MTJdPSJVbml0IixlW2UuVmFsdWU9MTNdPSJWYWx1ZSIsZVtlLkNvbnN0YW50PTE0XT0iQ29uc3RhbnQiLGVbZS5FbnVtPTE1XT0iRW51bSIsZVtlLkVudW1NZW1iZXI9MTZdPSJFbnVtTWVtYmVyIixlW2UuS2V5d29yZD0xN109IktleXdvcmQiLGVbZS5UZXh0PTE4XT0iVGV4dCIsZVtlLkNvbG9yPTE5XT0iQ29sb3IiLGVbZS5GaWxlPTIwXT0iRmlsZSIsZVtlLlJlZmVyZW5jZT0yMV09IlJlZmVyZW5jZSIsZVtlLkN1c3RvbWNvbG9yPTIyXT0iQ3VzdG9tY29sb3IiLGVbZS5Gb2xkZXI9MjNdPSJGb2xkZXIiLGVbZS5UeXBlUGFyYW1ldGVyPTI0XT0iVHlwZVBhcmFtZXRlciIsZVtlLlNuaXBwZXQ9MjVdPSJTbmlwcGV0In0oV2V8fChXZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5LZWVwV2hpdGVzcGFjZT0xXT0iS2VlcFdoaXRlc3BhY2UiLGVbZS5JbnNlcnRBc1NuaXBwZXQ9NF09Ikluc2VydEFzU25pcHBldCJ9KEhlfHwoSGU9e30pKSxmdW5jdGlvbihlKXtlW2UuSW52b2tlPTBdPSJJbnZva2UiLGVbZS5UcmlnZ2VyQ2hhcmFjdGVyPTFdPSJUcmlnZ2VyQ2hhcmFjdGVyIixlW2UuVHJpZ2dlckZvckluY29tcGxldGVDb21wbGV0aW9ucz0yXT0iVHJpZ2dlckZvckluY29tcGxldGVDb21wbGV0aW9ucyJ9KEdlfHwoR2U9e30pKSxmdW5jdGlvbihlKXtlW2UuSW52b2tlPTFdPSJJbnZva2UiLGVbZS5UcmlnZ2VyQ2hhcmFjdGVyPTJdPSJUcmlnZ2VyQ2hhcmFjdGVyIixlW2UuQ29udGVudENoYW5nZT0zXT0iQ29udGVudENoYW5nZSJ9KFFlfHwoUWU9e30pKSxmdW5jdGlvbihlKXtlW2UuVGV4dD0wXT0iVGV4dCIsZVtlLlJlYWQ9MV09IlJlYWQiLGVbZS5Xcml0ZT0yXT0iV3JpdGUifSh6ZXx8KHplPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkZpbGU9MF09IkZpbGUiLGVbZS5Nb2R1bGU9MV09Ik1vZHVsZSIsZVtlLk5hbWVzcGFjZT0yXT0iTmFtZXNwYWNlIixlW2UuUGFja2FnZT0zXT0iUGFja2FnZSIsZVtlLkNsYXNzPTRdPSJDbGFzcyIsZVtlLk1ldGhvZD01XT0iTWV0aG9kIixlW2UuUHJvcGVydHk9Nl09IlByb3BlcnR5IixlW2UuRmllbGQ9N109IkZpZWxkIixlW2UuQ29uc3RydWN0b3I9OF09IkNvbnN0cnVjdG9yIixlW2UuRW51bT05XT0iRW51bSIsZVtlLkludGVyZmFjZT0xMF09IkludGVyZmFjZSIsZVtlLkZ1bmN0aW9uPTExXT0iRnVuY3Rpb24iLGVbZS5WYXJpYWJsZT0xMl09IlZhcmlhYmxlIixlW2UuQ29uc3RhbnQ9MTNdPSJDb25zdGFudCIsZVtlLlN0cmluZz0xNF09IlN0cmluZyIsZVtlLk51bWJlcj0xNV09Ik51bWJlciIsZVtlLkJvb2xlYW49MTZdPSJCb29sZWFuIixlW2UuQXJyYXk9MTddPSJBcnJheSIsZVtlLk9iamVjdD0xOF09Ik9iamVjdCIsZVtlLktleT0xOV09IktleSIsZVtlLk51bGw9MjBdPSJOdWxsIixlW2UuRW51bU1lbWJlcj0yMV09IkVudW1NZW1iZXIiLGVbZS5TdHJ1Y3Q9MjJdPSJTdHJ1Y3QiLGVbZS5FdmVudD0yM109IkV2ZW50IixlW2UuT3BlcmF0b3I9MjRdPSJPcGVyYXRvciIsZVtlLlR5cGVQYXJhbWV0ZXI9MjVdPSJUeXBlUGFyYW1ldGVyIn0oWGV8fChYZT17fSkpO3ZhciB0dD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuY2hvcmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4oZXwoNjU1MzUmdCk8PDE2Pj4+MCk+Pj4wfShlLHQpfSxlLkN0cmxDbWQ9MjA0OCxlLlNoaWZ0PTEwMjQsZS5BbHQ9NTEyLGUuV2luQ3RybD0yNTYsZX0oKTt2YXIgbnQ9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbih0LG4pe3JldHVybihlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pfSkodCxuKX07cmV0dXJuIGZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9dH1lKHQsbiksdC5wcm90b3R5cGU9bnVsbD09PW4/T2JqZWN0LmNyZWF0ZShuKTooci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfX0oKSxydD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gbnQodCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInVyaSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cml9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJ2ZXJzaW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnNpb25JZH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImVvbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lb2x9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUZXh0KCl9LHQucHJvdG90eXBlLmdldExpbmVzQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lcy5zbGljZSgwKX0sdC5wcm90b3R5cGUuZ2V0TGluZUNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmVzLmxlbmd0aH0sdC5wcm90b3R5cGUuZ2V0TGluZUNvbnRlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2xpbmVzW2UtMV19LHQucHJvdG90eXBlLmdldFdvcmRBdFBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSx0LG4scil7dC5sYXN0SW5kZXg9MDt2YXIgaT10LmV4ZWMobik7aWYoIWkpcmV0dXJuIG51bGw7dmFyIG89aVswXS5pbmRleE9mKCIgIik+PTA/ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbz1lLTEtcjtmb3IodC5sYXN0SW5kZXg9MDtpPXQuZXhlYyhuKTspe3ZhciBzPWkuaW5kZXh8fDA7aWYocz5vKXJldHVybiBudWxsO2lmKHQubGFzdEluZGV4Pj1vKXJldHVybnt3b3JkOmlbMF0sc3RhcnRDb2x1bW46cisxK3MsZW5kQ29sdW1uOnIrMSt0Lmxhc3RJbmRleH19cmV0dXJuIG51bGx9KGUsdCxuLHIpOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG89ZS0xLXIscz1uLmxhc3RJbmRleE9mKCIgIixvLTEpKzE7Zm9yKHQubGFzdEluZGV4PXM7aT10LmV4ZWMobik7KXt2YXIgdT1pLmluZGV4fHwwO2lmKHU8PW8mJnQubGFzdEluZGV4Pj1vKXJldHVybnt3b3JkOmlbMF0sc3RhcnRDb2x1bW46cisxK3UsZW5kQ29sdW1uOnIrMSt0Lmxhc3RJbmRleH19cmV0dXJuIG51bGx9KGUsdCxuLHIpO3JldHVybiB0Lmxhc3RJbmRleD0wLG99KGUuY29sdW1uLGZ1bmN0aW9uKGUpe3ZhciB0PW5lO2lmKGUmJmUgaW5zdGFuY2VvZiBSZWdFeHApaWYoZS5nbG9iYWwpdD1lO2Vsc2V7dmFyIG49ImciO2UuaWdub3JlQ2FzZSYmKG4rPSJpIiksZS5tdWx0aWxpbmUmJihuKz0ibSIpLGUudW5pY29kZSYmKG4rPSJ1IiksdD1uZXcgUmVnRXhwKGUuc291cmNlLG4pfXJldHVybiB0Lmxhc3RJbmRleD0wLHR9KHQpLHRoaXMuX2xpbmVzW2UubGluZU51bWJlci0xXSwwKTtyZXR1cm4gbj9uZXcgQihlLmxpbmVOdW1iZXIsbi5zdGFydENvbHVtbixlLmxpbmVOdW1iZXIsbi5lbmRDb2x1bW4pOm51bGx9LHQucHJvdG90eXBlLmdldFdvcmRVbnRpbFBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5nZXRXb3JkQXRQb3NpdGlvbihlLHQpO3JldHVybiBuP3t3b3JkOnRoaXMuX2xpbmVzW2UubGluZU51bWJlci0xXS5zdWJzdHJpbmcobi5zdGFydENvbHVtbi0xLGUuY29sdW1uLTEpLHN0YXJ0Q29sdW1uOm4uc3RhcnRDb2x1bW4sZW5kQ29sdW1uOmUuY29sdW1ufTp7d29yZDoiIixzdGFydENvbHVtbjplLmNvbHVtbixlbmRDb2x1bW46ZS5jb2x1bW59fSx0LnByb3RvdHlwZS5jcmVhdGVXb3JkSXRlcmF0b3I9ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMsaT0wLG89MCxzPVtdLHU9ZnVuY3Rpb24oKXtpZihvPHMubGVuZ3RoKXt2YXIgYT1uLnN1YnN0cmluZyhzW29dLnN0YXJ0LHNbb10uZW5kKTtyZXR1cm4gbys9MSx0P3QudmFsdWU9YTp0PXtkb25lOiExLHZhbHVlOmF9LHR9cmV0dXJuIGk+PXIuX2xpbmVzLmxlbmd0aD93OihuPXIuX2xpbmVzW2ldLHM9ci5fd29yZGVuaXplKG4sZSksbz0wLGkrPTEsdSgpKX07cmV0dXJue25leHQ6dX19LHQucHJvdG90eXBlLmdldExpbmVXb3Jkcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj10aGlzLl9saW5lc1tlLTFdLHI9W10saT0wLG89dGhpcy5fd29yZGVuaXplKG4sdCk7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV07ci5wdXNoKHt3b3JkOm4uc3Vic3RyaW5nKHMuc3RhcnQscy5lbmQpLHN0YXJ0Q29sdW1uOnMuc3RhcnQrMSxlbmRDb2x1bW46cy5lbmQrMX0pfXJldHVybiByfSx0LnByb3RvdHlwZS5fd29yZGVuaXplPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXTtmb3IodC5sYXN0SW5kZXg9MDsobj10LmV4ZWMoZSkpJiYwIT09blswXS5sZW5ndGg7KXIucHVzaCh7c3RhcnQ6bi5pbmRleCxlbmQ6bi5pbmRleCtuWzBdLmxlbmd0aH0pO3JldHVybiByfSx0LnByb3RvdHlwZS5nZXRWYWx1ZUluUmFuZ2U9ZnVuY3Rpb24oZSl7aWYoKGU9dGhpcy5fdmFsaWRhdGVSYW5nZShlKSkuc3RhcnRMaW5lTnVtYmVyPT09ZS5lbmRMaW5lTnVtYmVyKXJldHVybiB0aGlzLl9saW5lc1tlLnN0YXJ0TGluZU51bWJlci0xXS5zdWJzdHJpbmcoZS5zdGFydENvbHVtbi0xLGUuZW5kQ29sdW1uLTEpO3ZhciB0PXRoaXMuX2VvbCxuPWUuc3RhcnRMaW5lTnVtYmVyLTEscj1lLmVuZExpbmVOdW1iZXItMSxpPVtdO2kucHVzaCh0aGlzLl9saW5lc1tuXS5zdWJzdHJpbmcoZS5zdGFydENvbHVtbi0xKSk7Zm9yKHZhciBvPW4rMTtvPHI7bysrKWkucHVzaCh0aGlzLl9saW5lc1tvXSk7cmV0dXJuIGkucHVzaCh0aGlzLl9saW5lc1tyXS5zdWJzdHJpbmcoMCxlLmVuZENvbHVtbi0xKSksaS5qb2luKHQpfSx0LnByb3RvdHlwZS5vZmZzZXRBdD1mdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLl92YWxpZGF0ZVBvc2l0aW9uKGUpLHRoaXMuX2Vuc3VyZUxpbmVTdGFydHMoKSx0aGlzLl9saW5lU3RhcnRzLmdldEFjY3VtdWxhdGVkVmFsdWUoZS5saW5lTnVtYmVyLTIpKyhlLmNvbHVtbi0xKX0sdC5wcm90b3R5cGUucG9zaXRpb25BdD1mdW5jdGlvbihlKXtlPU1hdGguZmxvb3IoZSksZT1NYXRoLm1heCgwLGUpLHRoaXMuX2Vuc3VyZUxpbmVTdGFydHMoKTt2YXIgdD10aGlzLl9saW5lU3RhcnRzLmdldEluZGV4T2YoZSksbj10aGlzLl9saW5lc1t0LmluZGV4XS5sZW5ndGg7cmV0dXJue2xpbmVOdW1iZXI6MSt0LmluZGV4LGNvbHVtbjoxK01hdGgubWluKHQucmVtYWluZGVyLG4pfX0sdC5wcm90b3R5cGUuX3ZhbGlkYXRlUmFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fdmFsaWRhdGVQb3NpdGlvbih7bGluZU51bWJlcjplLnN0YXJ0TGluZU51bWJlcixjb2x1bW46ZS5zdGFydENvbHVtbn0pLG49dGhpcy5fdmFsaWRhdGVQb3NpdGlvbih7bGluZU51bWJlcjplLmVuZExpbmVOdW1iZXIsY29sdW1uOmUuZW5kQ29sdW1ufSk7cmV0dXJuIHQubGluZU51bWJlciE9PWUuc3RhcnRMaW5lTnVtYmVyfHx0LmNvbHVtbiE9PWUuc3RhcnRDb2x1bW58fG4ubGluZU51bWJlciE9PWUuZW5kTGluZU51bWJlcnx8bi5jb2x1bW4hPT1lLmVuZENvbHVtbj97c3RhcnRMaW5lTnVtYmVyOnQubGluZU51bWJlcixzdGFydENvbHVtbjp0LmNvbHVtbixlbmRMaW5lTnVtYmVyOm4ubGluZU51bWJlcixlbmRDb2x1bW46bi5jb2x1bW59OmV9LHQucHJvdG90eXBlLl92YWxpZGF0ZVBvc2l0aW9uPWZ1bmN0aW9uKGUpe2lmKCFqLmlzSVBvc2l0aW9uKGUpKXRocm93IG5ldyBFcnJvcigiYmFkIHBvc2l0aW9uIik7dmFyIHQ9ZS5saW5lTnVtYmVyLG49ZS5jb2x1bW4scj0hMTtpZih0PDEpdD0xLG49MSxyPSEwO2Vsc2UgaWYodD50aGlzLl9saW5lcy5sZW5ndGgpdD10aGlzLl9saW5lcy5sZW5ndGgsbj10aGlzLl9saW5lc1t0LTFdLmxlbmd0aCsxLHI9ITA7ZWxzZXt2YXIgaT10aGlzLl9saW5lc1t0LTFdLmxlbmd0aCsxO248MT8obj0xLHI9ITApOm4+aSYmKG49aSxyPSEwKX1yZXR1cm4gcj97bGluZU51bWJlcjp0LGNvbHVtbjpufTplfSx0fSh0ZSksaXQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gbi5fbW9kZWxzPU9iamVjdC5jcmVhdGUobnVsbCksbn1yZXR1cm4gbnQodCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fbW9kZWxzPU9iamVjdC5jcmVhdGUobnVsbCl9LHQucHJvdG90eXBlLl9nZXRNb2RlbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW9kZWxzW2VdfSx0LnByb3RvdHlwZS5fZ2V0TW9kZWxzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVtdO3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9tb2RlbHMpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3JldHVybiB0LnB1c2goZS5fbW9kZWxzW25dKX0pKSx0fSx0LnByb3RvdHlwZS5hY2NlcHROZXdNb2RlbD1mdW5jdGlvbihlKXt0aGlzLl9tb2RlbHNbZS51cmxdPW5ldyBydChrLnBhcnNlKGUudXJsKSxlLmxpbmVzLGUuRU9MLGUudmVyc2lvbklkKX0sdC5wcm90b3R5cGUuYWNjZXB0TW9kZWxDaGFuZ2VkPWZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kZWxzW2VdJiZ0aGlzLl9tb2RlbHNbZV0ub25FdmVudHModCl9LHQucHJvdG90eXBlLmFjY2VwdFJlbW92ZWRNb2RlbD1mdW5jdGlvbihlKXt0aGlzLl9tb2RlbHNbZV0mJmRlbGV0ZSB0aGlzLl9tb2RlbHNbZV19LHR9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9mb3JlaWduTW9kdWxlRmFjdG9yeT1lLHRoaXMuX2ZvcmVpZ25Nb2R1bGU9bnVsbH1yZXR1cm4gZS5wcm90b3R5cGUuY29tcHV0ZURpZmY9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMuX2dldE1vZGVsKGUpLGk9dGhpcy5fZ2V0TW9kZWwodCk7aWYoIXJ8fCFpKXJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7dmFyIG89ci5nZXRMaW5lc0NvbnRlbnQoKSxzPWkuZ2V0TGluZXNDb250ZW50KCksdT1uZXcgeihvLHMse3Nob3VsZENvbXB1dGVDaGFyQ2hhbmdlczohMCxzaG91bGRQb3N0UHJvY2Vzc0NoYXJDaGFuZ2VzOiEwLHNob3VsZElnbm9yZVRyaW1XaGl0ZXNwYWNlOm4sc2hvdWxkTWFrZVByZXR0eURpZmY6ITB9KS5jb21wdXRlRGlmZigpLGE9ISh1Lmxlbmd0aD4wKSYmdGhpcy5fbW9kZWxzQXJlSWRlbnRpY2FsKHIsaSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7aWRlbnRpY2FsOmEsY2hhbmdlczp1fSl9LGUucHJvdG90eXBlLl9tb2RlbHNBcmVJZGVudGljYWw9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmdldExpbmVDb3VudCgpO2lmKG4hPT10LmdldExpbmVDb3VudCgpKXJldHVybiExO2Zvcih2YXIgcj0xO3I8PW47cisrKXtpZihlLmdldExpbmVDb250ZW50KHIpIT09dC5nZXRMaW5lQ29udGVudChyKSlyZXR1cm4hMX1yZXR1cm4hMH0sZS5wcm90b3R5cGUuY29tcHV0ZU1vcmVNaW5pbWFsRWRpdHM9ZnVuY3Rpb24odCxuKXt2YXIgcj10aGlzLl9nZXRNb2RlbCh0KTtpZighcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG4pO2Zvcih2YXIgaT1bXSxvPXZvaWQgMCxzPTAsdT1uPWcobiwoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5yYW5nZSYmdC5yYW5nZT9CLmNvbXBhcmVSYW5nZXNVc2luZ1N0YXJ0cyhlLnJhbmdlLHQucmFuZ2UpOihlLnJhbmdlPzA6MSktKHQucmFuZ2U/MDoxKX0pKTtzPHUubGVuZ3RoO3MrKyl7dmFyIGE9dVtzXSxsPWEucmFuZ2UsYz1hLnRleHQsZj1hLmVvbDtpZigibnVtYmVyIj09dHlwZW9mIGYmJihvPWYpLCFCLmlzRW1wdHkobCl8fGMpe3ZhciBoPXIuZ2V0VmFsdWVJblJhbmdlKGwpO2lmKGghPT0oYz1jLnJlcGxhY2UoL1xyXG58XG58XHIvZyxyLmVvbCkpKWlmKE1hdGgubWF4KGMubGVuZ3RoLGgubGVuZ3RoKT5lLl9kaWZmTGltaXQpaS5wdXNoKHtyYW5nZTpsLHRleHQ6Y30pO2Vsc2UgZm9yKHZhciBkPXkoaCxjLCExKSxtPXIub2Zmc2V0QXQoQi5saWZ0KGwpLmdldFN0YXJ0UG9zaXRpb24oKSkscD0wLF89ZDtwPF8ubGVuZ3RoO3ArKyl7dmFyIHY9X1twXSxDPXIucG9zaXRpb25BdChtK3Yub3JpZ2luYWxTdGFydCksYj1yLnBvc2l0aW9uQXQobSt2Lm9yaWdpbmFsU3RhcnQrdi5vcmlnaW5hbExlbmd0aCksTD17dGV4dDpjLnN1YnN0cih2Lm1vZGlmaWVkU3RhcnQsdi5tb2RpZmllZExlbmd0aCkscmFuZ2U6e3N0YXJ0TGluZU51bWJlcjpDLmxpbmVOdW1iZXIsc3RhcnRDb2x1bW46Qy5jb2x1bW4sZW5kTGluZU51bWJlcjpiLmxpbmVOdW1iZXIsZW5kQ29sdW1uOmIuY29sdW1ufX07ci5nZXRWYWx1ZUluUmFuZ2UoTC5yYW5nZSkhPT1MLnRleHQmJmkucHVzaChMKX19fXJldHVybiJudW1iZXIiPT10eXBlb2YgbyYmaS5wdXNoKHtlb2w6byx0ZXh0OiIiLHJhbmdlOntzdGFydExpbmVOdW1iZXI6MCxzdGFydENvbHVtbjowLGVuZExpbmVOdW1iZXI6MCxlbmRDb2x1bW46MH19KSxQcm9taXNlLnJlc29sdmUoaSl9LGUucHJvdG90eXBlLmNvbXB1dGVMaW5rcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRNb2RlbChlKTtyZXR1cm4gdD9Qcm9taXNlLnJlc29sdmUoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmdldExpbmVDb3VudCYmImZ1bmN0aW9uIj09dHlwZW9mIGUuZ2V0TGluZUNvbnRlbnQ/dWUuY29tcHV0ZUxpbmtzKGUpOltdfSh0KSk6UHJvbWlzZS5yZXNvbHZlKG51bGwpfSxlLnByb3RvdHlwZS50ZXh0dWFsU3VnZ2VzdD1mdW5jdGlvbih0LG4scixpKXt2YXIgbz10aGlzLl9nZXRNb2RlbCh0KTtpZighbylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO3ZhciBzPU9iamVjdC5jcmVhdGUobnVsbCksdT1bXSxhPW5ldyBSZWdFeHAocixpKSxsPW8uZ2V0V29yZFVudGlsUG9zaXRpb24obixhKSxjPW8uZ2V0V29yZEF0UG9zaXRpb24obixhKTtjJiYoc1tvLmdldFZhbHVlSW5SYW5nZShjKV09ITApO2Zvcih2YXIgZj1vLmNyZWF0ZVdvcmRJdGVyYXRvcihhKSxoPWYubmV4dCgpOyFoLmRvbmUmJnUubGVuZ3RoPD1lLl9zdWdnZXN0aW9uc0xpbWl0O2g9Zi5uZXh0KCkpe3ZhciBkPWgudmFsdWU7c1tkXXx8KHNbZF09ITAsaXNOYU4oTnVtYmVyKGQpKSYmdS5wdXNoKHtraW5kOjE4LGxhYmVsOmQsaW5zZXJ0VGV4dDpkLHJhbmdlOntzdGFydExpbmVOdW1iZXI6bi5saW5lTnVtYmVyLHN0YXJ0Q29sdW1uOmwuc3RhcnRDb2x1bW4sZW5kTGluZU51bWJlcjpuLmxpbmVOdW1iZXIsZW5kQ29sdW1uOmwuZW5kQ29sdW1ufX0pKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtzdWdnZXN0aW9uczp1fSl9LGUucHJvdG90eXBlLmNvbXB1dGVXb3JkUmFuZ2VzPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXRoaXMuX2dldE1vZGVsKGUpO2lmKCFpKXJldHVybiBQcm9taXNlLnJlc29sdmUoT2JqZWN0LmNyZWF0ZShudWxsKSk7Zm9yKHZhciBvPW5ldyBSZWdFeHAobixyKSxzPU9iamVjdC5jcmVhdGUobnVsbCksdT10LnN0YXJ0TGluZU51bWJlcjt1PHQuZW5kTGluZU51bWJlcjt1KyspZm9yKHZhciBhPTAsbD1pLmdldExpbmVXb3Jkcyh1LG8pO2E8bC5sZW5ndGg7YSsrKXt2YXIgYz1sW2FdO2lmKGlzTmFOKE51bWJlcihjLndvcmQpKSl7dmFyIGY9c1tjLndvcmRdO2Z8fChmPVtdLHNbYy53b3JkXT1mKSxmLnB1c2goe3N0YXJ0TGluZU51bWJlcjp1LHN0YXJ0Q29sdW1uOmMuc3RhcnRDb2x1bW4sZW5kTGluZU51bWJlcjp1LGVuZENvbHVtbjpjLmVuZENvbHVtbn0pfX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHMpfSxlLnByb3RvdHlwZS5uYXZpZ2F0ZVZhbHVlU2V0PWZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG89dGhpcy5fZ2V0TW9kZWwoZSk7aWYoIW8pcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTt2YXIgcz1uZXcgUmVnRXhwKHIsaSk7dC5zdGFydENvbHVtbj09PXQuZW5kQ29sdW1uJiYodD17c3RhcnRMaW5lTnVtYmVyOnQuc3RhcnRMaW5lTnVtYmVyLHN0YXJ0Q29sdW1uOnQuc3RhcnRDb2x1bW4sZW5kTGluZU51bWJlcjp0LmVuZExpbmVOdW1iZXIsZW5kQ29sdW1uOnQuZW5kQ29sdW1uKzF9KTt2YXIgdT1vLmdldFZhbHVlSW5SYW5nZSh0KSxhPW8uZ2V0V29yZEF0UG9zaXRpb24oe2xpbmVOdW1iZXI6dC5zdGFydExpbmVOdW1iZXIsY29sdW1uOnQuc3RhcnRDb2x1bW59LHMpO2lmKCFhKXJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7dmFyIGw9by5nZXRWYWx1ZUluUmFuZ2UoYSksYz1hZS5JTlNUQU5DRS5uYXZpZ2F0ZVZhbHVlU2V0KHQsdSxhLGwsbik7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjKX0sZS5wcm90b3R5cGUubG9hZEZvcmVpZ25Nb2R1bGU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLHI9e2dldE1pcnJvck1vZGVsczpmdW5jdGlvbigpe3JldHVybiBuLl9nZXRNb2RlbHMoKX19O2lmKHRoaXMuX2ZvcmVpZ25Nb2R1bGVGYWN0b3J5KXt0aGlzLl9mb3JlaWduTW9kdWxlPXRoaXMuX2ZvcmVpZ25Nb2R1bGVGYWN0b3J5KHIsdCk7Zm9yKHZhciBpPVtdLG89MCxzPWYodGhpcy5fZm9yZWlnbk1vZHVsZSk7bzxzLmxlbmd0aDtvKyspe3ZhciB1PXNbb107ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuX2ZvcmVpZ25Nb2R1bGVbdV0mJmkucHVzaCh1KX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGkpfXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgdXNhZ2UiKSl9LGUucHJvdG90eXBlLmZtcj1mdW5jdGlvbihlLHQpe2lmKCF0aGlzLl9mb3JlaWduTW9kdWxlfHwiZnVuY3Rpb24iIT10eXBlb2YgdGhpcy5fZm9yZWlnbk1vZHVsZVtlXSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJNaXNzaW5nIHJlcXVlc3RIYW5kbGVyIG9yIG1ldGhvZDogIitlKSk7dHJ5e3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fZm9yZWlnbk1vZHVsZVtlXS5hcHBseSh0aGlzLl9mb3JlaWduTW9kdWxlLHQpKX1jYXRjaChlKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QoZSl9fSxlLl9kaWZmTGltaXQ9MWU1LGUuX3N1Z2dlc3Rpb25zTGltaXQ9MWU0LGV9KCkpOyJmdW5jdGlvbiI9PXR5cGVvZiBpbXBvcnRTY3JpcHRzJiYoYy5hLm1vbmFjbz17ZWRpdG9yOnZvaWQgMCxsYW5ndWFnZXM6dm9pZCAwLENhbmNlbGxhdGlvblRva2VuU291cmNlOnllLEVtaXR0ZXI6cGUsS2V5Q29kZTp3ZSxLZXlNb2Q6dHQsUG9zaXRpb246aixSYW5nZTpCLFNlbGVjdGlvbjpaZSxTZWxlY3Rpb25EaXJlY3Rpb246QWUsTWFya2VyU2V2ZXJpdHk6U2UsTWFya2VyVGFnOkVlLFVyaTprLFRva2VuOmV0fSksbi5kKHQsImluaXRpYWxpemUiLChmdW5jdGlvbigpe3JldHVybiBzdH0pKTt2YXIgb3Q9ITE7ZnVuY3Rpb24gc3QoZSl7aWYoIW90KXtvdD0hMDt2YXIgdD1uZXcgaXQoZSksbj1uZXcgcCgoZnVuY3Rpb24oZSl7c2VsZi5wb3N0TWVzc2FnZShlKX0pLHQpO3NlbGYub25tZXNzYWdlPWZ1bmN0aW9uKGUpe24ub25tZXNzYWdlKGUuZGF0YSl9fX1zZWxmLm9ubWVzc2FnZT1mdW5jdGlvbihlKXtvdHx8c3QobnVsbCl9fV0pOw==")
